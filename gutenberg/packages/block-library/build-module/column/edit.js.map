{"version":3,"sources":["@wordpress/block-library/src/column/edit.js"],"names":["classnames","InnerBlocks","BlockControls","BlockVerticalAlignmentToolbar","InspectorControls","__experimentalBlock","Block","PanelBody","RangeControl","withDispatch","withSelect","compose","__","ColumnEdit","attributes","setAttributes","updateAlignment","hasChildBlocks","verticalAlignment","width","classes","hasWidth","Number","isFinite","nextWidth","undefined","div","className","style","flexBasis","select","ownProps","clientId","getBlockOrder","length","dispatch","registry","updateBlockAttributes","getBlockRootClientId","rootClientId"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tInnerBlocks,\n\tBlockControls,\n\tBlockVerticalAlignmentToolbar,\n\tInspectorControls,\n\t__experimentalBlock as Block,\n} from '@wordpress/block-editor';\nimport { PanelBody, RangeControl } from '@wordpress/components';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\nfunction ColumnEdit( {\n\tattributes,\n\tsetAttributes,\n\tupdateAlignment,\n\thasChildBlocks,\n} ) {\n\tconst { verticalAlignment, width } = attributes;\n\n\tconst classes = classnames( 'block-core-columns', {\n\t\t[ `is-vertically-aligned-${ verticalAlignment }` ]: verticalAlignment,\n\t} );\n\n\tconst hasWidth = Number.isFinite( width );\n\n\treturn (\n\t\t<>\n\t\t\t<BlockControls>\n\t\t\t\t<BlockVerticalAlignmentToolbar\n\t\t\t\t\tonChange={ updateAlignment }\n\t\t\t\t\tvalue={ verticalAlignment }\n\t\t\t\t/>\n\t\t\t</BlockControls>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Column settings' ) }>\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\tlabel={ __( 'Percentage width' ) }\n\t\t\t\t\t\tvalue={ width || '' }\n\t\t\t\t\t\tonChange={ ( nextWidth ) => {\n\t\t\t\t\t\t\tsetAttributes( { width: nextWidth } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\tmax={ 100 }\n\t\t\t\t\t\tstep={ 0.1 }\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tallowReset\n\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\twidth === undefined ? __( 'Auto' ) : undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<InnerBlocks\n\t\t\t\ttemplateLock={ false }\n\t\t\t\trenderAppender={\n\t\t\t\t\thasChildBlocks\n\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t: () => <InnerBlocks.ButtonBlockAppender />\n\t\t\t\t}\n\t\t\t\t__experimentalTagName={ Block.div }\n\t\t\t\t__experimentalPassedProps={ {\n\t\t\t\t\tclassName: classes,\n\t\t\t\t\tstyle: hasWidth ? { flexBasis: width + '%' } : undefined,\n\t\t\t\t} }\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nexport default compose(\n\twithSelect( ( select, ownProps ) => {\n\t\tconst { clientId } = ownProps;\n\t\tconst { getBlockOrder } = select( 'core/block-editor' );\n\n\t\treturn {\n\t\t\thasChildBlocks: getBlockOrder( clientId ).length > 0,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, ownProps, registry ) => {\n\t\treturn {\n\t\t\tupdateAlignment( verticalAlignment ) {\n\t\t\t\tconst { clientId, setAttributes } = ownProps;\n\t\t\t\tconst { updateBlockAttributes } = dispatch(\n\t\t\t\t\t'core/block-editor'\n\t\t\t\t);\n\t\t\t\tconst { getBlockRootClientId } = registry.select(\n\t\t\t\t\t'core/block-editor'\n\t\t\t\t);\n\n\t\t\t\t// Update own alignment.\n\t\t\t\tsetAttributes( { verticalAlignment } );\n\n\t\t\t\t// Reset Parent Columns Block\n\t\t\t\tconst rootClientId = getBlockRootClientId( clientId );\n\t\t\t\tupdateBlockAttributes( rootClientId, {\n\t\t\t\t\tverticalAlignment: null,\n\t\t\t\t} );\n\t\t\t},\n\t\t};\n\t} )\n)( ColumnEdit );\n"]}