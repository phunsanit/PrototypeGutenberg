{"version":3,"sources":["@wordpress/block-library/src/query/edit/query-toolbar.js"],"names":["useSelect","Toolbar","Dropdown","ToolbarButton","RangeControl","FormTokenField","__","postList","QueryToolbar","query","setQuery","select","_categories","getEntityRecords","categories","reduce","acc","category","categoriesMapById","id","categoriesMapByName","name","onToggle","perPage","value","pages","offset","categoryIds","map","categoryId","newCategoryNames","categoryName","includes","undefined"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport {\n\tToolbar,\n\tDropdown,\n\tToolbarButton,\n\tRangeControl,\n\tFormTokenField,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { postList } from '@wordpress/icons';\n\nexport default function QueryToolbar( { query, setQuery } ) {\n\tconst { categories, categoriesMapById, categoriesMapByName } = useSelect(\n\t\t( select ) => {\n\t\t\tconst _categories = select( 'core' ).getEntityRecords(\n\t\t\t\t'taxonomy',\n\t\t\t\t'category'\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tcategories: _categories,\n\t\t\t\t..._categories?.reduce(\n\t\t\t\t\t( acc, category ) => ( {\n\t\t\t\t\t\tcategoriesMapById: {\n\t\t\t\t\t\t\t...acc.categoriesMapById,\n\t\t\t\t\t\t\t[ category.id ]: category,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcategoriesMapByName: {\n\t\t\t\t\t\t\t...acc.categoriesMapByName,\n\t\t\t\t\t\t\t[ category.name ]: category,\n\t\t\t\t\t\t},\n\t\t\t\t\t} ),\n\t\t\t\t\t{ categoriesMapById: {}, categoriesMapByName: {} }\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[]\n\t);\n\treturn (\n\t\t<Toolbar>\n\t\t\t<Dropdown\n\t\t\t\trenderToggle={ ( { onToggle } ) => (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\ticon={ postList }\n\t\t\t\t\t\tlabel={ __( 'Query' ) }\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\trenderContent={ () => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Posts per Page' ) }\n\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t\tallowReset\n\t\t\t\t\t\t\tvalue={ query.perPage }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tsetQuery( { perPage: value ?? -1 } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Number of Pages' ) }\n\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t\tallowReset\n\t\t\t\t\t\t\tvalue={ query.pages }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tsetQuery( { pages: value ?? -1 } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Offset' ) }\n\t\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\t\tallowReset\n\t\t\t\t\t\t\tvalue={ query.offset }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tsetQuery( { offset: value ?? 0 } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ categories && (\n\t\t\t\t\t\t\t<FormTokenField\n\t\t\t\t\t\t\t\tlabel={ __( 'Categories' ) }\n\t\t\t\t\t\t\t\tvalue={ query.categoryIds.map(\n\t\t\t\t\t\t\t\t\t( categoryId ) => ( {\n\t\t\t\t\t\t\t\t\t\tid: categoryId,\n\t\t\t\t\t\t\t\t\t\tvalue:\n\t\t\t\t\t\t\t\t\t\t\tcategoriesMapById[ categoryId ]\n\t\t\t\t\t\t\t\t\t\t\t\t.name,\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tsuggestions={ categories.map(\n\t\t\t\t\t\t\t\t\t( category ) => category.name\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tonChange={ ( newCategoryNames ) => {\n\t\t\t\t\t\t\t\t\tconst categoryIds = newCategoryNames.map(\n\t\t\t\t\t\t\t\t\t\t( categoryName ) =>\n\t\t\t\t\t\t\t\t\t\t\tcategoriesMapByName[ categoryName ]\n\t\t\t\t\t\t\t\t\t\t\t\t?.id\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tif ( categoryIds.includes( undefined ) )\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\tsetQuery( { categoryIds } );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t/>\n\t\t</Toolbar>\n\t);\n}\n"]}