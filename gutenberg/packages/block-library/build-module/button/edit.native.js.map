{"version":3,"sources":["@wordpress/block-library/src/button/edit.native.js"],"names":["View","AccessibilityInfo","Platform","Clipboard","Text","withInstanceId","compose","__","RichText","withColors","InspectorControls","BlockControls","SETTINGS_DEFAULTS","TextControl","ToggleControl","PanelBody","PanelActions","RangeControl","ToolbarGroup","ToolbarButton","BottomSheet","Component","withSelect","withDispatch","isURL","prependHTTP","link","external","richTextStyle","styles","ColorBackground","LinkRelIcon","ColorEdit","getColorAndStyleProps","NEW_TAB_REL","MIN_BORDER_RADIUS_VALUE","MAX_BORDER_RADIUS_VALUE","INITIAL_MAX_WIDTH","PREPEND_HTTP","ButtonEdit","props","onChangeText","bind","onChangeBorderRadius","onChangeLinkRel","onChangeOpenInNewTab","onChangeURL","onClearSettings","onLayout","onSetMaxWidth","dismissSheet","getURLFromClipboard","onShowLinkSettings","onHideLinkSettings","onToggleButtonFocus","setRef","onRemove","getPlaceholderWidth","isEditingURL","state","maxWidth","isLinkSheetVisible","isButtonFocused","placeholderTextWidth","prevProps","prevState","selectedId","setAttributes","editorSidebarOpened","url","attributes","parentWidth","OS","richTextRef","blur","selectedRichText","id","isScreenReaderEnabled","then","enabled","focus","getString","clipboardText","backgroundColor","gradient","customGradient","defaultGradients","gradients","find","defaultGradient","slug","colorAndStyleProps","style","background","color","defaultButton","textColor","value","text","borderRadius","rel","newLinkTarget","undefined","updatedRel","linkTarget","setState","nativeEvent","width","layout","spacing","marginRight","isParentWidthChanged","isWidthChanged","numOfButtons","onDeleteBlock","onReplace","closeSettingsBottomSheet","isCompatibleWithSettings","richText","placeholderText","placeholder","textWidth","lines","Math","min","isSelected","clientId","mergeBlocks","paddingTop","borderWidth","borderRadiusValue","Number","isInteger","outlineBorderRadius","minWidth","getBackgroundColor","getTextColor","actions","label","onPress","outline","borderColor","placeholderTextColor","linkSettingsPanel","getLinkSettings","select","isEditorSidebarOpened","getSelectedBlockClientId","getBlockCount","getBlockRootClientId","parentId","dispatch","closeGeneralSidebar"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport {\n\tView,\n\tAccessibilityInfo,\n\tPlatform,\n\tClipboard,\n\tText,\n} from 'react-native';\n/**\n * WordPress dependencies\n */\nimport { withInstanceId, compose } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tRichText,\n\twithColors,\n\tInspectorControls,\n\tBlockControls,\n\tSETTINGS_DEFAULTS,\n} from '@wordpress/block-editor';\nimport {\n\tTextControl,\n\tToggleControl,\n\tPanelBody,\n\tPanelActions,\n\tRangeControl,\n\tToolbarGroup,\n\tToolbarButton,\n\tBottomSheet,\n} from '@wordpress/components';\nimport { Component } from '@wordpress/element';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { isURL, prependHTTP } from '@wordpress/url';\nimport { link, external } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport richTextStyle from './rich-text.scss';\nimport styles from './editor.scss';\nimport ColorBackground from './color-background';\nimport LinkRelIcon from './link-rel';\nimport ColorEdit from './color-edit';\nimport getColorAndStyleProps from './color-props';\n\nconst NEW_TAB_REL = 'noreferrer noopener';\nconst MIN_BORDER_RADIUS_VALUE = 0;\nconst MAX_BORDER_RADIUS_VALUE = 50;\nconst INITIAL_MAX_WIDTH = 108;\nconst PREPEND_HTTP = 'http://';\n\nclass ButtonEdit extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.onChangeText = this.onChangeText.bind( this );\n\t\tthis.onChangeBorderRadius = this.onChangeBorderRadius.bind( this );\n\t\tthis.onChangeLinkRel = this.onChangeLinkRel.bind( this );\n\t\tthis.onChangeOpenInNewTab = this.onChangeOpenInNewTab.bind( this );\n\t\tthis.onChangeURL = this.onChangeURL.bind( this );\n\t\tthis.onClearSettings = this.onClearSettings.bind( this );\n\t\tthis.onLayout = this.onLayout.bind( this );\n\t\tthis.onSetMaxWidth = this.onSetMaxWidth.bind( this );\n\t\tthis.dismissSheet = this.dismissSheet.bind( this );\n\t\tthis.getURLFromClipboard = this.getURLFromClipboard.bind( this );\n\t\tthis.onShowLinkSettings = this.onShowLinkSettings.bind( this );\n\t\tthis.onHideLinkSettings = this.onHideLinkSettings.bind( this );\n\t\tthis.onToggleButtonFocus = this.onToggleButtonFocus.bind( this );\n\t\tthis.setRef = this.setRef.bind( this );\n\t\tthis.onRemove = this.onRemove.bind( this );\n\t\tthis.getPlaceholderWidth = this.getPlaceholderWidth.bind( this );\n\n\t\t// `isEditingURL` property is used to prevent from automatically pasting\n\t\t// URL from clipboard while trying to clear `Button URL` field and then\n\t\t// manually adding specific link\n\t\tthis.isEditingURL = false;\n\n\t\tthis.state = {\n\t\t\tmaxWidth: INITIAL_MAX_WIDTH,\n\t\t\tisLinkSheetVisible: false,\n\t\t\tisButtonFocused: true,\n\t\t\tplaceholderTextWidth: 0,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.onSetMaxWidth();\n\t}\n\n\tcomponentDidUpdate( prevProps, prevState ) {\n\t\tconst {\n\t\t\tselectedId,\n\t\t\tsetAttributes,\n\t\t\teditorSidebarOpened,\n\t\t\tattributes: { url },\n\t\t\tparentWidth,\n\t\t} = this.props;\n\t\tconst { isLinkSheetVisible, isButtonFocused } = this.state;\n\n\t\tif ( prevProps.selectedId !== selectedId ) {\n\t\t\tthis.onToggleButtonFocus( true );\n\t\t}\n\n\t\tif ( prevProps.parentWidth !== parentWidth ) {\n\t\t\tthis.onSetMaxWidth();\n\t\t}\n\n\t\tif (\n\t\t\t( prevProps.editorSidebarOpened && ! editorSidebarOpened ) ||\n\t\t\t( prevState.isLinkSheetVisible && ! isLinkSheetVisible )\n\t\t) {\n\t\t\t// Prepends \"http://\" to an url when closing link settings sheet and button settings sheet\n\t\t\tsetAttributes( { url: prependHTTP( url ) } );\n\t\t\t// Get initial value for `isEditingURL` when closing link settings sheet or button settings sheet\n\t\t\tthis.isEditingURL = false;\n\t\t}\n\n\t\t// Blur `RichText` on Android when link settings sheet or button settings sheet is opened,\n\t\t// to avoid flashing caret after closing one of them\n\t\tif (\n\t\t\t( ! prevProps.editorSidebarOpened && editorSidebarOpened ) ||\n\t\t\t( ! prevState.isLinkSheetVisible && isLinkSheetVisible )\n\t\t) {\n\t\t\tif ( Platform.OS === 'android' && this.richTextRef ) {\n\t\t\t\tthis.richTextRef.blur();\n\t\t\t\tthis.onToggleButtonFocus( false );\n\t\t\t}\n\t\t}\n\n\t\t// Paste a URL from clipboard\n\t\tif (\n\t\t\t( isLinkSheetVisible || editorSidebarOpened ) &&\n\t\t\t! url &&\n\t\t\t! this.isEditingURL\n\t\t) {\n\t\t\tthis.getURLFromClipboard();\n\t\t}\n\n\t\tif ( this.richTextRef ) {\n\t\t\tconst selectedRichText = this.richTextRef.props.id === selectedId;\n\n\t\t\tif ( ! selectedRichText && isButtonFocused ) {\n\t\t\t\tthis.onToggleButtonFocus( false );\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tselectedRichText &&\n\t\t\t\tselectedId !== prevProps.selectedId &&\n\t\t\t\t! isButtonFocused\n\t\t\t) {\n\t\t\t\tAccessibilityInfo.isScreenReaderEnabled().then( ( enabled ) => {\n\t\t\t\t\tif ( enabled ) {\n\t\t\t\t\t\tthis.onToggleButtonFocus( true );\n\t\t\t\t\t\tthis.richTextRef.focus();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\tasync getURLFromClipboard() {\n\t\tconst { setAttributes } = this.props;\n\t\tconst clipboardText = await Clipboard.getString();\n\n\t\tif ( ! clipboardText ) {\n\t\t\treturn;\n\t\t}\n\t\t// Check if pasted text is URL\n\t\tif ( ! isURL( clipboardText ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetAttributes( { url: clipboardText } );\n\t}\n\n\tgetBackgroundColor() {\n\t\tconst { backgroundColor, attributes } = this.props;\n\t\tconst { gradient, customGradient } = attributes;\n\t\tconst defaultGradients = SETTINGS_DEFAULTS.gradients;\n\n\t\tif ( customGradient || gradient ) {\n\t\t\treturn (\n\t\t\t\tcustomGradient ||\n\t\t\t\tdefaultGradients.find(\n\t\t\t\t\t( defaultGradient ) => defaultGradient.slug === gradient\n\t\t\t\t).gradient\n\t\t\t);\n\t\t}\n\t\tconst colorAndStyleProps = getColorAndStyleProps( attributes );\n\t\treturn (\n\t\t\tcolorAndStyleProps.style?.backgroundColor ||\n\t\t\tcolorAndStyleProps.style?.background ||\n\t\t\t// We still need the `backgroundColor.color` to support colors from the color pallete (not custom ones)\n\t\t\tbackgroundColor.color ||\n\t\t\tstyles.defaultButton.backgroundColor\n\t\t);\n\t}\n\n\tgetTextColor() {\n\t\tconst { textColor, attributes } = this.props;\n\t\tconst colorAndStyleProps = getColorAndStyleProps( attributes );\n\n\t\treturn (\n\t\t\tcolorAndStyleProps.style?.color ||\n\t\t\t// We still need the `textColor.color` to support colors from the color pallete (not custom ones)\n\t\t\ttextColor.color ||\n\t\t\tstyles.defaultButton.color\n\t\t);\n\t}\n\n\tonChangeText( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { text: value } );\n\t}\n\n\tonChangeBorderRadius( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( {\n\t\t\tborderRadius: value,\n\t\t} );\n\t}\n\n\tonChangeLinkRel( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { rel: value } );\n\t}\n\n\tonChangeURL( value ) {\n\t\tthis.isEditingURL = true;\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { url: value } );\n\t}\n\n\tonChangeOpenInNewTab( value ) {\n\t\tconst { setAttributes, attributes } = this.props;\n\t\tconst { rel } = attributes;\n\n\t\tconst newLinkTarget = value ? '_blank' : undefined;\n\n\t\tlet updatedRel = rel;\n\t\tif ( newLinkTarget && ! rel ) {\n\t\t\tupdatedRel = NEW_TAB_REL;\n\t\t} else if ( ! newLinkTarget && rel === NEW_TAB_REL ) {\n\t\t\tupdatedRel = undefined;\n\t\t}\n\n\t\tsetAttributes( {\n\t\t\tlinkTarget: newLinkTarget,\n\t\t\trel: updatedRel,\n\t\t} );\n\t}\n\n\tonShowLinkSettings() {\n\t\tthis.setState( { isLinkSheetVisible: true } );\n\t}\n\n\tonHideLinkSettings() {\n\t\tthis.setState( { isLinkSheetVisible: false } );\n\t}\n\n\tonToggleButtonFocus( value ) {\n\t\tthis.setState( { isButtonFocused: value } );\n\t}\n\n\tonClearSettings() {\n\t\tconst { setAttributes } = this.props;\n\n\t\tsetAttributes( {\n\t\t\turl: '',\n\t\t\trel: '',\n\t\t\tlinkTarget: '',\n\t\t} );\n\n\t\tthis.setState( { isLinkSheetVisible: false } );\n\t}\n\n\tonLayout( { nativeEvent } ) {\n\t\tconst { width } = nativeEvent.layout;\n\t\tthis.onSetMaxWidth( width );\n\t}\n\n\tonSetMaxWidth( width ) {\n\t\tconst { maxWidth } = this.state;\n\t\tconst { parentWidth } = this.props;\n\t\tconst { marginRight: spacing } = styles.defaultButton;\n\n\t\tconst isParentWidthChanged = maxWidth !== parentWidth;\n\t\tconst isWidthChanged = maxWidth !== width;\n\n\t\tif ( parentWidth && ! width && isParentWidthChanged ) {\n\t\t\tthis.setState( {\n\t\t\t\tmaxWidth: parentWidth,\n\t\t\t} );\n\t\t} else if ( ! parentWidth && width && isWidthChanged ) {\n\t\t\tthis.setState( { maxWidth: width - spacing } );\n\t\t}\n\t}\n\n\tonRemove() {\n\t\tconst { numOfButtons, onDeleteBlock, onReplace } = this.props;\n\n\t\tif ( numOfButtons === 1 ) {\n\t\t\tonDeleteBlock();\n\t\t} else {\n\t\t\tonReplace( [] );\n\t\t}\n\t}\n\n\tdismissSheet() {\n\t\tthis.setState( {\n\t\t\tisLinkSheetVisible: false,\n\t\t} );\n\t\tthis.props.closeSettingsBottomSheet();\n\t}\n\n\tgetLinkSettings( url, rel, linkTarget, isCompatibleWithSettings ) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<TextControl\n\t\t\t\t\ticon={ ! isCompatibleWithSettings && link }\n\t\t\t\t\tlabel={ __( 'Button Link URL' ) }\n\t\t\t\t\tvalue={ url || '' }\n\t\t\t\t\tvaluePlaceholder={ __( 'Add URL' ) }\n\t\t\t\t\tonChange={ this.onChangeURL }\n\t\t\t\t\tonSubmit={ this.dismissSheet }\n\t\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\t\tautoCorrect={ false }\n\t\t\t\t\t// eslint-disable-next-line jsx-a11y/no-autofocus\n\t\t\t\t\tautoFocus={\n\t\t\t\t\t\t! isCompatibleWithSettings && Platform.OS === 'ios'\n\t\t\t\t\t}\n\t\t\t\t\tkeyboardType=\"url\"\n\t\t\t\t/>\n\t\t\t\t<ToggleControl\n\t\t\t\t\ticon={ ! isCompatibleWithSettings && external }\n\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\t\tchecked={ linkTarget === '_blank' }\n\t\t\t\t\tonChange={ this.onChangeOpenInNewTab }\n\t\t\t\t/>\n\t\t\t\t<TextControl\n\t\t\t\t\ticon={ ! isCompatibleWithSettings && LinkRelIcon }\n\t\t\t\t\tlabel={ __( 'Link Rel' ) }\n\t\t\t\t\tvalue={ rel || '' }\n\t\t\t\t\tvaluePlaceholder={ __( 'None' ) }\n\t\t\t\t\tonChange={ this.onChangeLinkRel }\n\t\t\t\t\tonSubmit={ this.dismissSheet }\n\t\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\t\tautoCorrect={ false }\n\t\t\t\t\tkeyboardType=\"url\"\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t}\n\n\tsetRef( richText ) {\n\t\tthis.richTextRef = richText;\n\t}\n\n\t// Render `Text` with `placeholderText` styled as a placeholder\n\t// to calculate its width which then is set as a `minWidth`\n\tgetPlaceholderWidth( placeholderText ) {\n\t\tconst { maxWidth, placeholderTextWidth } = this.state;\n\t\treturn (\n\t\t\t<Text\n\t\t\t\tstyle={ styles.placeholder }\n\t\t\t\tonTextLayout={ ( { nativeEvent } ) => {\n\t\t\t\t\tconst textWidth =\n\t\t\t\t\t\tnativeEvent.lines[ 0 ] && nativeEvent.lines[ 0 ].width;\n\t\t\t\t\tif ( textWidth && textWidth !== placeholderTextWidth ) {\n\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\tplaceholderTextWidth: Math.min(\n\t\t\t\t\t\t\t\ttextWidth,\n\t\t\t\t\t\t\t\tmaxWidth\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ placeholderText }\n\t\t\t</Text>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tattributes,\n\t\t\tisSelected,\n\t\t\tclientId,\n\t\t\tonReplace,\n\t\t\tmergeBlocks,\n\t\t\tparentWidth,\n\t\t} = this.props;\n\t\tconst {\n\t\t\tplaceholder,\n\t\t\ttext,\n\t\t\tborderRadius,\n\t\t\turl,\n\t\t\tlinkTarget,\n\t\t\trel,\n\t\t} = attributes;\n\t\tconst {\n\t\t\tmaxWidth,\n\t\t\tisLinkSheetVisible,\n\t\t\tisButtonFocused,\n\t\t\tplaceholderTextWidth,\n\t\t} = this.state;\n\t\tconst { paddingTop: spacing, borderWidth } = styles.defaultButton;\n\n\t\tif ( parentWidth === 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst borderRadiusValue = Number.isInteger( borderRadius )\n\t\t\t? borderRadius\n\t\t\t: styles.defaultButton.borderRadius;\n\t\tconst outlineBorderRadius =\n\t\t\tborderRadiusValue > 0\n\t\t\t\t? borderRadiusValue + spacing + borderWidth\n\t\t\t\t: 0;\n\n\t\t// To achieve proper expanding and shrinking `RichText` on iOS, there is a need to set a `minWidth`\n\t\t// value at least on 1 when `RichText` is focused or when is not focused, but `RichText` value is\n\t\t// different than empty string.\n\t\tconst minWidth =\n\t\t\tisButtonFocused || ( ! isButtonFocused && text && text !== '' )\n\t\t\t\t? 1\n\t\t\t\t: placeholderTextWidth;\n\t\t// To achieve proper expanding and shrinking `RichText` on Android, there is a need to set\n\t\t// a `placeholder` as an empty string when `RichText` is focused,\n\t\t// because `AztecView` is calculating a `minWidth` based on placeholder text.\n\t\tconst placeholderText =\n\t\t\tisButtonFocused || ( ! isButtonFocused && text && text !== '' )\n\t\t\t\t? ''\n\t\t\t\t: placeholder || __( 'Add text…' );\n\n\t\tconst backgroundColor = this.getBackgroundColor();\n\t\tconst textColor = this.getTextColor();\n\n\t\tconst actions = [\n\t\t\t{\n\t\t\t\tlabel: __( 'Remove link' ),\n\t\t\t\tonPress: this.onClearSettings,\n\t\t\t},\n\t\t];\n\n\t\treturn (\n\t\t\t<View onLayout={ this.onLayout }>\n\t\t\t\t{ this.getPlaceholderWidth( placeholderText ) }\n\t\t\t\t<ColorBackground\n\t\t\t\t\tborderRadiusValue={ borderRadiusValue }\n\t\t\t\t\tbackgroundColor={ backgroundColor }\n\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t>\n\t\t\t\t\t{ isSelected && (\n\t\t\t\t\t\t<View\n\t\t\t\t\t\t\tpointerEvents=\"none\"\n\t\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\t\tstyles.outline,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tborderRadius: outlineBorderRadius,\n\t\t\t\t\t\t\t\t\tborderColor: backgroundColor,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<RichText\n\t\t\t\t\t\tsetRef={ this.setRef }\n\t\t\t\t\t\tplaceholder={ placeholderText }\n\t\t\t\t\t\tvalue={ text }\n\t\t\t\t\t\tonChange={ this.onChangeText }\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t...richTextStyle.richText,\n\t\t\t\t\t\t\tcolor: textColor,\n\t\t\t\t\t\t} }\n\t\t\t\t\t\ttextAlign=\"center\"\n\t\t\t\t\t\tplaceholderTextColor={\n\t\t\t\t\t\t\tstyles.placeholderTextColor.color\n\t\t\t\t\t\t}\n\t\t\t\t\t\tidentifier=\"content\"\n\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\tminWidth={ minWidth }\n\t\t\t\t\t\tmaxWidth={ maxWidth }\n\t\t\t\t\t\tid={ clientId }\n\t\t\t\t\t\tisSelected={ isButtonFocused }\n\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\tunstableOnFocus={ () =>\n\t\t\t\t\t\t\tthis.onToggleButtonFocus( true )\n\t\t\t\t\t\t}\n\t\t\t\t\t\t__unstableMobileNoFocusOnMount={ ! isSelected }\n\t\t\t\t\t\tselectionColor={ textColor }\n\t\t\t\t\t\tonBlur={ () => {\n\t\t\t\t\t\t\tthis.onToggleButtonFocus( false );\n\t\t\t\t\t\t\tthis.onSetMaxWidth();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonReplace={ onReplace }\n\t\t\t\t\t\tonRemove={ this.onRemove }\n\t\t\t\t\t\tonMerge={ mergeBlocks }\n\t\t\t\t\t/>\n\t\t\t\t</ColorBackground>\n\n\t\t\t\t{ isSelected && (\n\t\t\t\t\t<BlockControls>\n\t\t\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\t\ttitle={ __( 'Edit link' ) }\n\t\t\t\t\t\t\t\ticon={ link }\n\t\t\t\t\t\t\t\tonClick={ this.onShowLinkSettings }\n\t\t\t\t\t\t\t\tisActive={ url && url !== PREPEND_HTTP }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t\t</BlockControls>\n\t\t\t\t) }\n\n\t\t\t\t<BottomSheet\n\t\t\t\t\tisVisible={ isLinkSheetVisible }\n\t\t\t\t\tonClose={ this.onHideLinkSettings }\n\t\t\t\t\thideHeader\n\t\t\t\t>\n\t\t\t\t\t<PanelBody style={ styles.linkSettingsPanel }>\n\t\t\t\t\t\t{ this.getLinkSettings( url, rel, linkTarget ) }\n\t\t\t\t\t</PanelBody>\n\t\t\t\t\t<PanelActions actions={ actions } />\n\t\t\t\t</BottomSheet>\n\n\t\t\t\t<ColorEdit { ...this.props } />\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Border Settings' ) }>\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Border Radius' ) }\n\t\t\t\t\t\t\tminimumValue={ MIN_BORDER_RADIUS_VALUE }\n\t\t\t\t\t\t\tmaximumValue={ MAX_BORDER_RADIUS_VALUE }\n\t\t\t\t\t\t\tvalue={ borderRadiusValue }\n\t\t\t\t\t\t\tonChange={ this.onChangeBorderRadius }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t\t<PanelBody title={ __( 'Link Settings' ) }>\n\t\t\t\t\t\t{ this.getLinkSettings( url, rel, linkTarget, true ) }\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithInstanceId,\n\twithColors( 'backgroundColor', { textColor: 'color' } ),\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst { isEditorSidebarOpened } = select( 'core/edit-post' );\n\t\tconst {\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlockCount,\n\t\t\tgetBlockRootClientId,\n\t\t} = select( 'core/block-editor' );\n\n\t\tconst parentId = getBlockRootClientId( clientId );\n\t\tconst selectedId = getSelectedBlockClientId();\n\t\tconst numOfButtons = getBlockCount( parentId );\n\n\t\treturn {\n\t\t\tselectedId,\n\t\t\teditorSidebarOpened: isEditorSidebarOpened(),\n\t\t\tnumOfButtons,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\treturn {\n\t\t\tcloseSettingsBottomSheet() {\n\t\t\t\tdispatch( 'core/edit-post' ).closeGeneralSidebar();\n\t\t\t},\n\t\t};\n\t} ),\n] )( ButtonEdit );\n"]}