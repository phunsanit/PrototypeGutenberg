{"version":3,"sources":["@wordpress/block-library/src/post-comments-count/edit.js"],"names":["useEntityId","useState","useEffect","apiFetch","addQueryArgs","PostCommentsCountDisplay","className","postId","commentsCount","setCommentsCount","currentPostId","path","post","parse","then","res","headers","get","undefined","PostCommentsCountEdit"],"mappings":";;;AAAA;;;AAGA,SAASA,WAAT,QAA4B,sBAA5B;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,oBAApC;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,SAASC,YAAT,QAA6B,gBAA7B;;AAEA,SAASC,wBAAT,OAAmD;AAAA,MAAdC,SAAc,QAAdA,SAAc;AAClD,MAAMC,MAAM,GAAGP,WAAW,CAAE,UAAF,EAAc,MAAd,CAA1B;;AADkD,kBAENC,QAAQ,EAFF;AAAA;AAAA,MAE1CO,aAF0C;AAAA,MAE3BC,gBAF2B;;AAGlDP,EAAAA,SAAS,CAAE,YAAM;AAChB,QAAMQ,aAAa,GAAGH,MAAtB;AACAJ,IAAAA,QAAQ,CAAE;AACTQ,MAAAA,IAAI,EAAEP,YAAY,CAAE,iBAAF,EAAqB;AACtCQ,QAAAA,IAAI,EAAEL;AADgC,OAArB,CADT;AAITM,MAAAA,KAAK,EAAE;AAJE,KAAF,CAAR,CAKIC,IALJ,CAKU,UAAEC,GAAF,EAAW;AACpB;AACA,UAAKL,aAAa,KAAKH,MAAvB,EAAgC;AAC/BE,QAAAA,gBAAgB,CAAEM,GAAG,CAACC,OAAJ,CAAYC,GAAZ,CAAiB,YAAjB,CAAF,CAAhB;AACA;AACD,KAVD;AAWA,GAbQ,EAaN,CAAEV,MAAF,CAbM,CAAT;AAcA,SACC;AAAM,IAAA,SAAS,EAAGD;AAAlB,KACGE,aAAa,KAAKU,SAAlB,IAA+BV,aADlC,CADD;AAKA;;AAED,eAAe,SAASW,qBAAT,QAAgD;AAAA,MAAdb,SAAc,SAAdA,SAAc;;AAC9D,MAAK,CAAEN,WAAW,CAAE,UAAF,EAAc,MAAd,CAAlB,EAA2C;AAC1C,WAAO,iCAAP;AACA;;AACD,SAAO,cAAC,wBAAD;AAA0B,IAAA,SAAS,EAAGM;AAAtC,IAAP;AACA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEntityId } from '@wordpress/core-data';\nimport { useState, useEffect } from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\n\nfunction PostCommentsCountDisplay( { className } ) {\n\tconst postId = useEntityId( 'postType', 'post' );\n\tconst [ commentsCount, setCommentsCount ] = useState();\n\tuseEffect( () => {\n\t\tconst currentPostId = postId;\n\t\tapiFetch( {\n\t\t\tpath: addQueryArgs( '/wp/v2/comments', {\n\t\t\t\tpost: postId,\n\t\t\t} ),\n\t\t\tparse: false,\n\t\t} ).then( ( res ) => {\n\t\t\t// Stale requests will have the `currentPostId` of an older closure.\n\t\t\tif ( currentPostId === postId ) {\n\t\t\t\tsetCommentsCount( res.headers.get( 'X-WP-Total' ) );\n\t\t\t}\n\t\t} );\n\t}, [ postId ] );\n\treturn (\n\t\t<span className={ className }>\n\t\t\t{ commentsCount !== undefined && commentsCount }\n\t\t</span>\n\t);\n}\n\nexport default function PostCommentsCountEdit( { className } ) {\n\tif ( ! useEntityId( 'postType', 'post' ) ) {\n\t\treturn 'Post Comments Count Placeholder';\n\t}\n\treturn <PostCommentsCountDisplay className={ className } />;\n}\n"]}