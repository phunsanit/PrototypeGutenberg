{"version":3,"sources":["@wordpress/block-library/src/calendar/edit.js"],"names":["moment","memoize","Disabled","Component","withSelect","ServerSideRender","CalendarEdit","arguments","getYearMonth","bind","maxSize","getServerSideAttributes","date","momentDate","year","month","attributes","props","select","coreEditorSelect","getEditedPostAttribute","postType","undefined"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;;AAGA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,OAAP,MAAoB,QAApB;AAEA;;;;AAGA,SAASC,QAAT,QAAyB,uBAAzB;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,UAAT,QAA2B,iBAA3B;AACA,OAAOC,gBAAP,MAA6B,+BAA7B;;IAEMC,Y;;;;;AACL,0BAAc;AAAA;;AAAA;;AACb,+BAAUC,SAAV;AACA,UAAKC,YAAL,GAAoBP,OAAO,CAAE,MAAKO,YAAL,CAAkBC,IAAlB,+BAAF,EAAkC;AAC5DC,MAAAA,OAAO,EAAE;AADmD,KAAlC,CAA3B;AAGA,UAAKC,uBAAL,GAA+BV,OAAO,CACrC,MAAKU,uBAAL,CAA6BF,IAA7B,+BADqC,EAErC;AACCC,MAAAA,OAAO,EAAE;AADV,KAFqC,CAAtC;AALa;AAWb;;;;iCAEaE,I,EAAO;AACpB,UAAK,CAAEA,IAAP,EAAc;AACb,eAAO,EAAP;AACA;;AACD,UAAMC,UAAU,GAAGb,MAAM,CAAEY,IAAF,CAAzB;AACA,aAAO;AACNE,QAAAA,IAAI,EAAED,UAAU,CAACC,IAAX,EADA;AAENC,QAAAA,KAAK,EAAEF,UAAU,CAACE,KAAX,KAAqB;AAFtB,OAAP;AAIA;;;4CAEwBC,U,EAAYJ,I,EAAO;AAC3C,+BACII,UADJ,MAEI,KAAKR,YAAL,CAAmBI,IAAnB,CAFJ;AAIA;;;6BAEQ;AACR,aACC,cAAC,QAAD,QACC,cAAC,gBAAD;AACC,QAAA,KAAK,EAAC,eADP;AAEC,QAAA,UAAU,EAAG,KAAKD,uBAAL,CACZ,KAAKM,KAAL,CAAWD,UADC,EAEZ,KAAKC,KAAL,CAAWL,IAFC;AAFd,QADD,CADD;AAWA;;;;EA5CyBT,S;;AA+C3B,eAAeC,UAAU,CAAE,UAAEc,MAAF,EAAc;AACxC,MAAMC,gBAAgB,GAAGD,MAAM,CAAE,aAAF,CAA/B;;AACA,MAAK,CAAEC,gBAAP,EAA0B;AACzB;AACA;;AAJuC,MAKhCC,sBALgC,GAKLD,gBALK,CAKhCC,sBALgC;AAMxC,MAAMC,QAAQ,GAAGD,sBAAsB,CAAE,MAAF,CAAvC,CANwC,CAOxC;AACA;AACA;;AACA,SAAO;AACNR,IAAAA,IAAI,EACHS,QAAQ,KAAK,MAAb,GAAsBD,sBAAsB,CAAE,MAAF,CAA5C,GAAyDE;AAFpD,GAAP;AAIA,CAdwB,CAAV,CAcVhB,YAdU,CAAf","sourcesContent":["/**\n * External dependencies\n */\nimport moment from 'moment';\nimport memoize from 'memize';\n\n/**\n * WordPress dependencies\n */\nimport { Disabled } from '@wordpress/components';\nimport { Component } from '@wordpress/element';\nimport { withSelect } from '@wordpress/data';\nimport ServerSideRender from '@wordpress/server-side-render';\n\nclass CalendarEdit extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.getYearMonth = memoize( this.getYearMonth.bind( this ), {\n\t\t\tmaxSize: 1,\n\t\t} );\n\t\tthis.getServerSideAttributes = memoize(\n\t\t\tthis.getServerSideAttributes.bind( this ),\n\t\t\t{\n\t\t\t\tmaxSize: 1,\n\t\t\t}\n\t\t);\n\t}\n\n\tgetYearMonth( date ) {\n\t\tif ( ! date ) {\n\t\t\treturn {};\n\t\t}\n\t\tconst momentDate = moment( date );\n\t\treturn {\n\t\t\tyear: momentDate.year(),\n\t\t\tmonth: momentDate.month() + 1,\n\t\t};\n\t}\n\n\tgetServerSideAttributes( attributes, date ) {\n\t\treturn {\n\t\t\t...attributes,\n\t\t\t...this.getYearMonth( date ),\n\t\t};\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Disabled>\n\t\t\t\t<ServerSideRender\n\t\t\t\t\tblock=\"core/calendar\"\n\t\t\t\t\tattributes={ this.getServerSideAttributes(\n\t\t\t\t\t\tthis.props.attributes,\n\t\t\t\t\t\tthis.props.date\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t</Disabled>\n\t\t);\n\t}\n}\n\nexport default withSelect( ( select ) => {\n\tconst coreEditorSelect = select( 'core/editor' );\n\tif ( ! coreEditorSelect ) {\n\t\treturn;\n\t}\n\tconst { getEditedPostAttribute } = coreEditorSelect;\n\tconst postType = getEditedPostAttribute( 'type' );\n\t// Dates are used to overwrite year and month used on the calendar.\n\t// This overwrite should only happen for 'post' post types.\n\t// For other post types the calendar always displays the current month.\n\treturn {\n\t\tdate:\n\t\t\tpostType === 'post' ? getEditedPostAttribute( 'date' ) : undefined,\n\t};\n} )( CalendarEdit );\n"]}