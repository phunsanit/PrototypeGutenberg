{"version":3,"sources":["@wordpress/block-library/src/navigation/edit.js"],"names":["Navigation","selectedBlockHasDescendants","attributes","clientId","fontSize","hasExistingNavItems","hasResolvedPages","isImmediateParentOfSelectedBlock","isRequestingPages","isSelected","pages","setAttributes","setFontSize","updateNavItemBlocks","className","ref","selectBlock","name","property","contrastCheckers","backgroundColor","textColor","size","colorDetector","targetRef","colorPanelProps","initialOpen","TextColor","BackgroundColor","ColorPanel","navigatorToolbarButton","navigatorModal","defaultPagesNavigationItems","map","title","type","url","link","id","label","rendered","opensInNewTab","handleItemsAlignment","align","itemsJustification","undefined","handleCreateEmpty","emptyNavLinkBlock","handleCreateFromExistingPages","hasPages","length","blockInlineStyles","icon","blockClassNames","class","orientation","navIcons","justifyLeftIcon","isActive","onClick","justifyCenterIcon","justifyRightIcon","showSubmenuIcon","value","InnerBlocks","DefaultAppender","select","innerBlocks","getBlocks","getClientIdsOfDescendants","hasSelectedInnerBlock","getSelectedBlockClientId","filterDefaultPages","parent","order","orderby","pagesSelect","selectedBlockId","getEntityRecords","isResolving","hasFinishedResolution","dispatch","blocks","replaceInnerBlocks"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { escape, upperFirst } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useMemo, Fragment, useRef } from '@wordpress/element';\nimport {\n\tInnerBlocks,\n\tInspectorControls,\n\tBlockControls,\n\tFontSizePicker,\n\twithFontSizes,\n\t__experimentalUseColors,\n\t__experimentalBlock as Block,\n} from '@wordpress/block-editor';\n\nimport { createBlock } from '@wordpress/blocks';\nimport { useDispatch, withSelect, withDispatch } from '@wordpress/data';\nimport {\n\tButton,\n\tPanelBody,\n\tPlaceholder,\n\tSpinner,\n\tToggleControl,\n\tToolbar,\n\tToolbarGroup,\n} from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\nimport { navigation as icon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport useBlockNavigator from './use-block-navigator';\nimport BlockNavigationList from './block-navigation-list';\nimport BlockColorsStyleSelector from './block-colors-selector';\nimport * as navIcons from './icons';\n\nfunction Navigation( {\n\tselectedBlockHasDescendants,\n\tattributes,\n\tclientId,\n\tfontSize,\n\thasExistingNavItems,\n\thasResolvedPages,\n\tisImmediateParentOfSelectedBlock,\n\tisRequestingPages,\n\tisSelected,\n\tpages,\n\tsetAttributes,\n\tsetFontSize,\n\tupdateNavItemBlocks,\n\tclassName,\n} ) {\n\t//\n\t// HOOKS\n\t//\n\n\tconst ref = useRef();\n\tconst { selectBlock } = useDispatch( 'core/block-editor' );\n\tconst { TextColor, BackgroundColor, ColorPanel } = __experimentalUseColors(\n\t\t[\n\t\t\t{ name: 'textColor', property: 'color' },\n\t\t\t{ name: 'backgroundColor', className: 'has-background' },\n\t\t],\n\t\t{\n\t\t\tcontrastCheckers: [\n\t\t\t\t{\n\t\t\t\t\tbackgroundColor: true,\n\t\t\t\t\ttextColor: true,\n\t\t\t\t\tfontSize: fontSize.size,\n\t\t\t\t},\n\t\t\t],\n\t\t\tcolorDetector: { targetRef: ref },\n\t\t\tcolorPanelProps: {\n\t\t\t\tinitialOpen: true,\n\t\t\t},\n\t\t},\n\t\t[ fontSize.size ]\n\t);\n\n\tconst { navigatorToolbarButton, navigatorModal } = useBlockNavigator(\n\t\tclientId,\n\t\ttrue\n\t);\n\n\t// Builds navigation links from default Pages.\n\tconst defaultPagesNavigationItems = useMemo( () => {\n\t\tif ( ! pages ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn pages.map( ( { title, type, link: url, id } ) =>\n\t\t\tcreateBlock( 'core/navigation-link', {\n\t\t\t\ttype,\n\t\t\t\tid,\n\t\t\t\turl,\n\t\t\t\tlabel: ! title.rendered\n\t\t\t\t\t? __( '(no title)' )\n\t\t\t\t\t: escape( title.rendered ),\n\t\t\t\topensInNewTab: false,\n\t\t\t} )\n\t\t);\n\t}, [ pages ] );\n\n\t//\n\t// HANDLERS\n\t//\n\tfunction handleItemsAlignment( align ) {\n\t\treturn () => {\n\t\t\tconst itemsJustification =\n\t\t\t\tattributes.itemsJustification === align ? undefined : align;\n\t\t\tsetAttributes( {\n\t\t\t\titemsJustification,\n\t\t\t} );\n\t\t};\n\t}\n\n\tfunction handleCreateEmpty() {\n\t\tconst emptyNavLinkBlock = createBlock( 'core/navigation-link' );\n\t\tupdateNavItemBlocks( [ emptyNavLinkBlock ] );\n\t}\n\n\tfunction handleCreateFromExistingPages() {\n\t\tupdateNavItemBlocks( defaultPagesNavigationItems );\n\t\tselectBlock( clientId );\n\t}\n\n\tconst hasPages = hasResolvedPages && pages && pages.length;\n\n\tconst blockInlineStyles = {\n\t\tfontSize: fontSize.size ? fontSize.size + 'px' : undefined,\n\t};\n\n\t// If we don't have existing items or the User hasn't\n\t// indicated they want to automatically add top level Pages\n\t// then show the Placeholder\n\tif ( ! hasExistingNavItems ) {\n\t\treturn (\n\t\t\t<Block.div>\n\t\t\t\t<Placeholder\n\t\t\t\t\tclassName=\"wp-block-navigation-placeholder\"\n\t\t\t\t\ticon={ icon }\n\t\t\t\t\tlabel={ __( 'Navigation' ) }\n\t\t\t\t\tinstructions={ __(\n\t\t\t\t\t\t'Create a Navigation from all existing pages, or create an empty one.'\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\tclassName=\"wp-block-navigation-placeholder__buttons\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\tclassName=\"wp-block-navigation-placeholder__button\"\n\t\t\t\t\t\t\tonClick={ handleCreateFromExistingPages }\n\t\t\t\t\t\t\tdisabled={ ! hasPages }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Create from all top-level pages' ) }\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisLink\n\t\t\t\t\t\t\tclassName=\"wp-block-navigation-placeholder__button\"\n\t\t\t\t\t\t\tonClick={ handleCreateEmpty }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Create empty' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</Placeholder>\n\t\t\t</Block.div>\n\t\t);\n\t}\n\n\tconst blockClassNames = classnames( className, {\n\t\t[ `items-justified-${ attributes.itemsJustification }` ]: attributes.itemsJustification,\n\t\t[ fontSize.class ]: fontSize.class,\n\t\t'is-vertical': attributes.orientation === 'vertical',\n\t} );\n\n\t// UI State: rendered Block UI\n\treturn (\n\t\t<Fragment>\n\t\t\t<BlockControls>\n\t\t\t\t<Toolbar\n\t\t\t\t\ticon={\n\t\t\t\t\t\tattributes.itemsJustification\n\t\t\t\t\t\t\t? navIcons[\n\t\t\t\t\t\t\t\t\t`justify${ upperFirst(\n\t\t\t\t\t\t\t\t\t\tattributes.itemsJustification\n\t\t\t\t\t\t\t\t\t) }Icon`\n\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t: navIcons.justifyLeftIcon\n\t\t\t\t\t}\n\t\t\t\t\tlabel={ __( 'Change items justification' ) }\n\t\t\t\t\tisCollapsed\n\t\t\t\t\tcontrols={ [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: navIcons.justifyLeftIcon,\n\t\t\t\t\t\t\ttitle: __( 'Justify items left' ),\n\t\t\t\t\t\t\tisActive: 'left' === attributes.itemsJustification,\n\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'left' ),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: navIcons.justifyCenterIcon,\n\t\t\t\t\t\t\ttitle: __( 'Justify items center' ),\n\t\t\t\t\t\t\tisActive:\n\t\t\t\t\t\t\t\t'center' === attributes.itemsJustification,\n\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'center' ),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: navIcons.justifyRightIcon,\n\t\t\t\t\t\t\ttitle: __( 'Justify items right' ),\n\t\t\t\t\t\t\tisActive: 'right' === attributes.itemsJustification,\n\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'right' ),\n\t\t\t\t\t\t},\n\t\t\t\t\t] }\n\t\t\t\t/>\n\t\t\t\t<ToolbarGroup>{ navigatorToolbarButton }</ToolbarGroup>\n\n\t\t\t\t<BlockColorsStyleSelector\n\t\t\t\t\tTextColor={ TextColor }\n\t\t\t\t\tBackgroundColor={ BackgroundColor }\n\t\t\t\t>\n\t\t\t\t\t{ ColorPanel }\n\t\t\t\t</BlockColorsStyleSelector>\n\t\t\t</BlockControls>\n\t\t\t{ navigatorModal }\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Navigation Structure' ) }>\n\t\t\t\t\t<BlockNavigationList\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t__experimentalWithBlockNavigationSlots\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody title={ __( 'Text settings' ) }>\n\t\t\t\t\t<FontSizePicker\n\t\t\t\t\t\tvalue={ fontSize.size }\n\t\t\t\t\t\tonChange={ setFontSize }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Display settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tchecked={ attributes.showSubmenuIcon }\n\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\tsetAttributes( { showSubmenuIcon: value } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tlabel={ __( 'Show submenu indicator icons' ) }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<TextColor>\n\t\t\t\t<BackgroundColor>\n\t\t\t\t\t<Block.nav\n\t\t\t\t\t\tclassName={ blockClassNames }\n\t\t\t\t\t\tstyle={ blockInlineStyles }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ ! hasExistingNavItems && isRequestingPages && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Spinner /> { __( 'Loading Navigation…' ) }{ ' ' }\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<InnerBlocks\n\t\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\t\tallowedBlocks={ [ 'core/navigation-link' ] }\n\t\t\t\t\t\t\trenderAppender={\n\t\t\t\t\t\t\t\t( isImmediateParentOfSelectedBlock &&\n\t\t\t\t\t\t\t\t\t! selectedBlockHasDescendants ) ||\n\t\t\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t\t\t? InnerBlocks.DefaultAppender\n\t\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttemplateInsertUpdatesSelection={ false }\n\t\t\t\t\t\t\t__experimentalMoverDirection={\n\t\t\t\t\t\t\t\tattributes.orientation || 'horizontal'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t__experimentalTagName=\"ul\"\n\t\t\t\t\t\t\t__experimentalAppenderTagName=\"li\"\n\t\t\t\t\t\t\t__experimentalPassedProps={ {\n\t\t\t\t\t\t\t\tclassName: 'wp-block-navigation__container',\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t__experimentalCaptureToolbars={ true }\n\t\t\t\t\t\t\t// Template lock set to false here so that the Nav\n\t\t\t\t\t\t\t// Block on the experimental menus screen does not\n\t\t\t\t\t\t\t// inherit templateLock={ 'all' }.\n\t\t\t\t\t\t\ttemplateLock={ false }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Block.nav>\n\t\t\t\t</BackgroundColor>\n\t\t\t</TextColor>\n\t\t</Fragment>\n\t);\n}\n\nexport default compose( [\n\twithFontSizes( 'fontSize' ),\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst innerBlocks = select( 'core/block-editor' ).getBlocks( clientId );\n\t\tconst {\n\t\t\tgetClientIdsOfDescendants,\n\t\t\thasSelectedInnerBlock,\n\t\t\tgetSelectedBlockClientId,\n\t\t} = select( 'core/block-editor' );\n\n\t\tconst filterDefaultPages = {\n\t\t\tparent: 0,\n\t\t\torder: 'asc',\n\t\t\torderby: 'id',\n\t\t};\n\n\t\tconst pagesSelect = [\n\t\t\t'core',\n\t\t\t'getEntityRecords',\n\t\t\t[ 'postType', 'page', filterDefaultPages ],\n\t\t];\n\n\t\tconst isImmediateParentOfSelectedBlock = hasSelectedInnerBlock(\n\t\t\tclientId,\n\t\t\tfalse\n\t\t);\n\t\tconst selectedBlockId = getSelectedBlockClientId();\n\t\tconst selectedBlockHasDescendants = !! getClientIdsOfDescendants( [\n\t\t\tselectedBlockId,\n\t\t] )?.length;\n\n\t\treturn {\n\t\t\tisImmediateParentOfSelectedBlock,\n\t\t\tselectedBlockHasDescendants,\n\t\t\thasExistingNavItems: !! innerBlocks.length,\n\t\t\tpages: select( 'core' ).getEntityRecords(\n\t\t\t\t'postType',\n\t\t\t\t'page',\n\t\t\t\tfilterDefaultPages\n\t\t\t),\n\t\t\tisRequestingPages: select( 'core/data' ).isResolving(\n\t\t\t\t...pagesSelect\n\t\t\t),\n\t\t\thasResolvedPages: select( 'core/data' ).hasFinishedResolution(\n\t\t\t\t...pagesSelect\n\t\t\t),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\treturn {\n\t\t\tupdateNavItemBlocks( blocks ) {\n\t\t\t\tdispatch( 'core/block-editor' ).replaceInnerBlocks(\n\t\t\t\t\tclientId,\n\t\t\t\t\tblocks\n\t\t\t\t);\n\t\t\t},\n\t\t};\n\t} ),\n] )( Navigation );\n"]}