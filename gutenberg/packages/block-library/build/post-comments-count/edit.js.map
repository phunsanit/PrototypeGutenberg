{"version":3,"sources":["@wordpress/block-library/src/post-comments-count/edit.js"],"names":["PostCommentsCountDisplay","className","postId","commentsCount","setCommentsCount","currentPostId","path","post","parse","then","res","headers","get","undefined","PostCommentsCountEdit"],"mappings":";;;;;;;;;AAIA;;;;AADA;;AAEA;;AACA;;AANA;;;AAQA,SAASA,wBAAT,OAAmD;AAAA,MAAdC,SAAc,QAAdA,SAAc;AAClD,MAAMC,MAAM,GAAG,2BAAa,UAAb,EAAyB,MAAzB,CAAf;;AADkD,kBAEN,wBAFM;AAAA;AAAA,MAE1CC,aAF0C;AAAA,MAE3BC,gBAF2B;;AAGlD,0BAAW,YAAM;AAChB,QAAMC,aAAa,GAAGH,MAAtB;AACA,2BAAU;AACTI,MAAAA,IAAI,EAAE,uBAAc,iBAAd,EAAiC;AACtCC,QAAAA,IAAI,EAAEL;AADgC,OAAjC,CADG;AAITM,MAAAA,KAAK,EAAE;AAJE,KAAV,EAKIC,IALJ,CAKU,UAAEC,GAAF,EAAW;AACpB;AACA,UAAKL,aAAa,KAAKH,MAAvB,EAAgC;AAC/BE,QAAAA,gBAAgB,CAAEM,GAAG,CAACC,OAAJ,CAAYC,GAAZ,CAAiB,YAAjB,CAAF,CAAhB;AACA;AACD,KAVD;AAWA,GAbD,EAaG,CAAEV,MAAF,CAbH;AAcA,SACC;AAAM,IAAA,SAAS,EAAGD;AAAlB,KACGE,aAAa,KAAKU,SAAlB,IAA+BV,aADlC,CADD;AAKA;;AAEc,SAASW,qBAAT,QAAgD;AAAA,MAAdb,SAAc,SAAdA,SAAc;;AAC9D,MAAK,CAAE,2BAAa,UAAb,EAAyB,MAAzB,CAAP,EAA2C;AAC1C,WAAO,iCAAP;AACA;;AACD,SAAO,4BAAC,wBAAD;AAA0B,IAAA,SAAS,EAAGA;AAAtC,IAAP;AACA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEntityId } from '@wordpress/core-data';\nimport { useState, useEffect } from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\n\nfunction PostCommentsCountDisplay( { className } ) {\n\tconst postId = useEntityId( 'postType', 'post' );\n\tconst [ commentsCount, setCommentsCount ] = useState();\n\tuseEffect( () => {\n\t\tconst currentPostId = postId;\n\t\tapiFetch( {\n\t\t\tpath: addQueryArgs( '/wp/v2/comments', {\n\t\t\t\tpost: postId,\n\t\t\t} ),\n\t\t\tparse: false,\n\t\t} ).then( ( res ) => {\n\t\t\t// Stale requests will have the `currentPostId` of an older closure.\n\t\t\tif ( currentPostId === postId ) {\n\t\t\t\tsetCommentsCount( res.headers.get( 'X-WP-Total' ) );\n\t\t\t}\n\t\t} );\n\t}, [ postId ] );\n\treturn (\n\t\t<span className={ className }>\n\t\t\t{ commentsCount !== undefined && commentsCount }\n\t\t</span>\n\t);\n}\n\nexport default function PostCommentsCountEdit( { className } ) {\n\tif ( ! useEntityId( 'postType', 'post' ) ) {\n\t\treturn 'Post Comments Count Placeholder';\n\t}\n\treturn <PostCommentsCountDisplay className={ className } />;\n}\n"]}