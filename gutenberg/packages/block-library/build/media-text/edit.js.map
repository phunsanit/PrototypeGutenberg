{"version":3,"sources":["@wordpress/block-library/src/media-text/edit.js"],"names":["TEMPLATE","fontSize","placeholder","WIDTH_CONSTRAINT_PERCENTAGE","applyWidthConstraints","width","Math","max","min","LINK_DESTINATION_MEDIA","LINK_DESTINATION_ATTACHMENT","MediaTextEdit","arguments","onSelectMedia","bind","onWidthChange","commitWidthChange","state","mediaWidth","onSetHref","media","setAttributes","props","attributes","linkDestination","href","mediaType","src","media_type","type","newHref","url","link","mediaAlt","alt","mediaId","id","mediaUrl","mediaLink","undefined","focalPoint","setState","isSelected","mediaPosition","imageFill","isStackedOnMobile","className","image","verticalAlignment","rel","linkTarget","linkClass","temporaryMediaWidth","classNames","widthString","gridTemplateColumns","style","msGridColumns","toolbarControls","icon","pullLeft","title","isActive","onClick","pullRight","onMediaAltChange","newMediaAlt","onVerticalAlignmentChange","alignment","mediaTextGeneralSettings","value","source_url","renderMediaArea","Component","select","getMedia"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x } from '@wordpress/i18n';\nimport { compose } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\nimport {\n\tBlockControls,\n\tBlockVerticalAlignmentToolbar,\n\tInnerBlocks,\n\tInspectorControls,\n\t__experimentalImageURLInputUI as ImageURLInputUI,\n} from '@wordpress/block-editor';\nimport { Component } from '@wordpress/element';\nimport {\n\tPanelBody,\n\tTextareaControl,\n\tToggleControl,\n\tToolbarGroup,\n\tExternalLink,\n\tFocalPointPicker,\n} from '@wordpress/components';\nimport { pullLeft, pullRight } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport MediaContainer from './media-container';\n\n/**\n * Constants\n */\nconst TEMPLATE = [\n\t[\n\t\t'core/paragraph',\n\t\t{\n\t\t\tfontSize: 'large',\n\t\t\tplaceholder: _x( 'Contentâ€¦', 'content placeholder' ),\n\t\t},\n\t],\n];\n// this limits the resize to a safe zone to avoid making broken layouts\nconst WIDTH_CONSTRAINT_PERCENTAGE = 15;\nconst applyWidthConstraints = ( width ) =>\n\tMath.max(\n\t\tWIDTH_CONSTRAINT_PERCENTAGE,\n\t\tMath.min( width, 100 - WIDTH_CONSTRAINT_PERCENTAGE )\n\t);\n\nconst LINK_DESTINATION_MEDIA = 'media';\nconst LINK_DESTINATION_ATTACHMENT = 'attachment';\n\nclass MediaTextEdit extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onSelectMedia = this.onSelectMedia.bind( this );\n\t\tthis.onWidthChange = this.onWidthChange.bind( this );\n\t\tthis.commitWidthChange = this.commitWidthChange.bind( this );\n\t\tthis.state = {\n\t\t\tmediaWidth: null,\n\t\t};\n\t\tthis.onSetHref = this.onSetHref.bind( this );\n\t}\n\n\tonSelectMedia( media ) {\n\t\tconst { setAttributes } = this.props;\n\t\tconst { linkDestination, href } = this.props.attributes;\n\n\t\tlet mediaType;\n\t\tlet src;\n\t\t// for media selections originated from a file upload.\n\t\tif ( media.media_type ) {\n\t\t\tif ( media.media_type === 'image' ) {\n\t\t\t\tmediaType = 'image';\n\t\t\t} else {\n\t\t\t\t// only images and videos are accepted so if the media_type is not an image we can assume it is a video.\n\t\t\t\t// video contain the media type of 'file' in the object returned from the rest api.\n\t\t\t\tmediaType = 'video';\n\t\t\t}\n\t\t} else {\n\t\t\t// for media selections originated from existing files in the media library.\n\t\t\tmediaType = media.type;\n\t\t}\n\n\t\tif ( mediaType === 'image' ) {\n\t\t\t// Try the \"large\" size URL, falling back to the \"full\" size URL below.\n\t\t\tsrc =\n\t\t\t\tget( media, [ 'sizes', 'large', 'url' ] ) ||\n\t\t\t\tget( media, [\n\t\t\t\t\t'media_details',\n\t\t\t\t\t'sizes',\n\t\t\t\t\t'large',\n\t\t\t\t\t'source_url',\n\t\t\t\t] );\n\t\t}\n\n\t\tlet newHref = href;\n\t\tif ( linkDestination === LINK_DESTINATION_MEDIA ) {\n\t\t\t// Update the media link.\n\t\t\tnewHref = media.url;\n\t\t}\n\n\t\t// Check if the image is linked to the attachment page.\n\t\tif ( linkDestination === LINK_DESTINATION_ATTACHMENT ) {\n\t\t\t// Update the media link.\n\t\t\tnewHref = media.link;\n\t\t}\n\n\t\tsetAttributes( {\n\t\t\tmediaAlt: media.alt,\n\t\t\tmediaId: media.id,\n\t\t\tmediaType,\n\t\t\tmediaUrl: src || media.url,\n\t\t\tmediaLink: media.link || undefined,\n\t\t\thref: newHref,\n\t\t\tfocalPoint: undefined,\n\t\t} );\n\t}\n\n\tonWidthChange( width ) {\n\t\tthis.setState( {\n\t\t\tmediaWidth: applyWidthConstraints( width ),\n\t\t} );\n\t}\n\n\tonSetHref( props ) {\n\t\tthis.props.setAttributes( props );\n\t}\n\n\tcommitWidthChange( width ) {\n\t\tconst { setAttributes } = this.props;\n\n\t\tsetAttributes( {\n\t\t\tmediaWidth: applyWidthConstraints( width ),\n\t\t} );\n\t\tthis.setState( {\n\t\t\tmediaWidth: null,\n\t\t} );\n\t}\n\n\trenderMediaArea() {\n\t\tconst { attributes, isSelected } = this.props;\n\t\tconst {\n\t\t\tmediaAlt,\n\t\t\tmediaId,\n\t\t\tmediaPosition,\n\t\t\tmediaType,\n\t\t\tmediaUrl,\n\t\t\tmediaWidth,\n\t\t\timageFill,\n\t\t\tfocalPoint,\n\t\t\tisStackedOnMobile,\n\t\t} = attributes;\n\t\treturn (\n\t\t\t<MediaContainer\n\t\t\t\tclassName=\"wp-block-media-text__media\"\n\t\t\t\tonSelectMedia={ this.onSelectMedia }\n\t\t\t\tonWidthChange={ this.onWidthChange }\n\t\t\t\tcommitWidthChange={ this.commitWidthChange }\n\t\t\t\t{ ...{\n\t\t\t\t\tmediaAlt,\n\t\t\t\t\tmediaId,\n\t\t\t\t\tmediaType,\n\t\t\t\t\tmediaUrl,\n\t\t\t\t\tmediaPosition,\n\t\t\t\t\tmediaWidth,\n\t\t\t\t\timageFill,\n\t\t\t\t\tfocalPoint,\n\t\t\t\t\tisSelected,\n\t\t\t\t\tisStackedOnMobile,\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tattributes,\n\t\t\tclassName,\n\t\t\tisSelected,\n\t\t\tsetAttributes,\n\t\t\timage,\n\t\t} = this.props;\n\t\tconst {\n\t\t\tisStackedOnMobile,\n\t\t\tmediaAlt,\n\t\t\tmediaPosition,\n\t\t\tmediaType,\n\t\t\tmediaWidth,\n\t\t\tverticalAlignment,\n\t\t\tmediaUrl,\n\t\t\timageFill,\n\t\t\tfocalPoint,\n\t\t\trel,\n\t\t\thref,\n\t\t\tlinkTarget,\n\t\t\tlinkClass,\n\t\t\tlinkDestination,\n\t\t} = attributes;\n\n\t\tconst temporaryMediaWidth = this.state.mediaWidth;\n\t\tconst classNames = classnames( className, {\n\t\t\t'has-media-on-the-right': 'right' === mediaPosition,\n\t\t\t'is-selected': isSelected,\n\t\t\t'is-stacked-on-mobile': isStackedOnMobile,\n\t\t\t[ `is-vertically-aligned-${ verticalAlignment }` ]: verticalAlignment,\n\t\t\t'is-image-fill': imageFill,\n\t\t} );\n\t\tconst widthString = `${ temporaryMediaWidth || mediaWidth }%`;\n\t\tconst gridTemplateColumns =\n\t\t\t'right' === mediaPosition\n\t\t\t\t? `1fr ${ widthString }`\n\t\t\t\t: `${ widthString } 1fr`;\n\t\tconst style = {\n\t\t\tgridTemplateColumns,\n\t\t\tmsGridColumns: gridTemplateColumns,\n\t\t};\n\t\tconst toolbarControls = [\n\t\t\t{\n\t\t\t\ticon: pullLeft,\n\t\t\t\ttitle: __( 'Show media on left' ),\n\t\t\t\tisActive: mediaPosition === 'left',\n\t\t\t\tonClick: () => setAttributes( { mediaPosition: 'left' } ),\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: pullRight,\n\t\t\t\ttitle: __( 'Show media on right' ),\n\t\t\t\tisActive: mediaPosition === 'right',\n\t\t\t\tonClick: () => setAttributes( { mediaPosition: 'right' } ),\n\t\t\t},\n\t\t];\n\t\tconst onMediaAltChange = ( newMediaAlt ) => {\n\t\t\tsetAttributes( { mediaAlt: newMediaAlt } );\n\t\t};\n\t\tconst onVerticalAlignmentChange = ( alignment ) => {\n\t\t\tsetAttributes( { verticalAlignment: alignment } );\n\t\t};\n\t\tconst mediaTextGeneralSettings = (\n\t\t\t<PanelBody title={ __( 'Media & Text settings' ) }>\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={ __( 'Stack on mobile' ) }\n\t\t\t\t\tchecked={ isStackedOnMobile }\n\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tisStackedOnMobile: ! isStackedOnMobile,\n\t\t\t\t\t\t} )\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t{ mediaType === 'image' && (\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Crop image to fill entire column' ) }\n\t\t\t\t\t\tchecked={ imageFill }\n\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\timageFill: ! imageFill,\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ imageFill && (\n\t\t\t\t\t<FocalPointPicker\n\t\t\t\t\t\tlabel={ __( 'Focal point picker' ) }\n\t\t\t\t\t\turl={ mediaUrl }\n\t\t\t\t\t\tvalue={ focalPoint }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { focalPoint: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ mediaType === 'image' && (\n\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\tlabel={ __( 'Alt text (alternative text)' ) }\n\t\t\t\t\t\tvalue={ mediaAlt }\n\t\t\t\t\t\tonChange={ onMediaAltChange }\n\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ExternalLink href=\"https://www.w3.org/WAI/tutorials/images/decision-tree\">\n\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t'Describe the purpose of the image'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'Leave empty if the image is purely decorative.'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</PanelBody>\n\t\t);\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t{ mediaTextGeneralSettings }\n\t\t\t\t</InspectorControls>\n\t\t\t\t<BlockControls>\n\t\t\t\t\t<ToolbarGroup controls={ toolbarControls } />\n\t\t\t\t\t<BlockVerticalAlignmentToolbar\n\t\t\t\t\t\tonChange={ onVerticalAlignmentChange }\n\t\t\t\t\t\tvalue={ verticalAlignment }\n\t\t\t\t\t/>\n\t\t\t\t\t{ mediaType === 'image' && (\n\t\t\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t\t\t<ImageURLInputUI\n\t\t\t\t\t\t\t\turl={ href || '' }\n\t\t\t\t\t\t\t\tonChangeUrl={ this.onSetHref }\n\t\t\t\t\t\t\t\tlinkDestination={ linkDestination }\n\t\t\t\t\t\t\t\tmediaType={ mediaType }\n\t\t\t\t\t\t\t\tmediaUrl={ image && image.source_url }\n\t\t\t\t\t\t\t\tmediaLink={ image && image.link }\n\t\t\t\t\t\t\t\tlinkTarget={ linkTarget }\n\t\t\t\t\t\t\t\tlinkClass={ linkClass }\n\t\t\t\t\t\t\t\trel={ rel }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t\t) }\n\t\t\t\t</BlockControls>\n\t\t\t\t<div className={ classNames } style={ style }>\n\t\t\t\t\t{ this.renderMediaArea() }\n\t\t\t\t\t<InnerBlocks\n\t\t\t\t\t\ttemplate={ TEMPLATE }\n\t\t\t\t\t\ttemplateInsertUpdatesSelection={ false }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, props ) => {\n\t\tconst { getMedia } = select( 'core' );\n\t\tconst {\n\t\t\tattributes: { mediaId },\n\t\t\tisSelected,\n\t\t} = props;\n\t\treturn {\n\t\t\timage: mediaId && isSelected ? getMedia( mediaId ) : null,\n\t\t};\n\t} ),\n] )( MediaTextEdit );\n"]}