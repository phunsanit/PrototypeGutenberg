{"version":3,"sources":["@wordpress/block-library/src/image/utils.js"],"names":["calculatePreferedImageSize","image","container","maxWidth","clientWidth","exceedMaxWidth","width","ratio","height","removeNewTabRel","currentRel","newRel","undefined","NEW_TAB_REL","relVal","regExp","RegExp","replace","trim","getUpdatedLinkTargetSettings","value","rel","linkTarget","updatedRel"],"mappings":";;;;;;;;;AAGA;;AAKA;;AARA;;;;AAKA;;;AAKO,SAASA,0BAAT,CAAqCC,KAArC,EAA4CC,SAA5C,EAAwD;AAC9D,MAAMC,QAAQ,GAAGD,SAAS,CAACE,WAA3B;AACA,MAAMC,cAAc,GAAGJ,KAAK,CAACK,KAAN,GAAcH,QAArC;AACA,MAAMI,KAAK,GAAGN,KAAK,CAACO,MAAN,GAAeP,KAAK,CAACK,KAAnC;AACA,MAAMA,KAAK,GAAGD,cAAc,GAAGF,QAAH,GAAcF,KAAK,CAACK,KAAhD;AACA,MAAME,MAAM,GAAGH,cAAc,GAAGF,QAAQ,GAAGI,KAAd,GAAsBN,KAAK,CAACO,MAAzD;AACA,SAAO;AAAEF,IAAAA,KAAK,EAALA,KAAF;AAASE,IAAAA,MAAM,EAANA;AAAT,GAAP;AACA;;AAEM,SAASC,eAAT,CAA0BC,UAA1B,EAAuC;AAC7C,MAAIC,MAAM,GAAGD,UAAb;;AAEA,MAAKA,UAAU,KAAKE,SAAf,IAA4B,CAAE,qBAASD,MAAT,CAAnC,EAAuD;AACtD,QAAK,CAAE,qBAASA,MAAT,CAAP,EAA2B;AAC1B,wBAAME,sBAAN,EAAmB,UAAUC,MAAV,EAAmB;AACrC,YAAMC,MAAM,GAAG,IAAIC,MAAJ,CAAY,QAAQF,MAAR,GAAiB,KAA7B,EAAoC,IAApC,CAAf;AACAH,QAAAA,MAAM,GAAGA,MAAM,CAACM,OAAP,CAAgBF,MAAhB,EAAwB,EAAxB,CAAT;AACA,OAHD,EAD0B,CAM1B;;AACA,UAAKJ,MAAM,KAAKD,UAAhB,EAA6B;AAC5BC,QAAAA,MAAM,GAAGA,MAAM,CAACO,IAAP,EAAT;AACA;;AAED,UAAK,qBAASP,MAAT,CAAL,EAAyB;AACxBA,QAAAA,MAAM,GAAGC,SAAT;AACA;AACD;AACD;;AAED,SAAOD,MAAP;AACA;AAED;;;;;;;;;;;AASO,SAASQ,4BAAT,CAAuCC,KAAvC,QAAwD;AAAA,MAARC,GAAQ,QAARA,GAAQ;AAC9D,MAAMC,UAAU,GAAGF,KAAK,GAAG,QAAH,GAAcR,SAAtC;AAEA,MAAIW,UAAJ;;AACA,MAAK,CAAED,UAAF,IAAgB,CAAED,GAAvB,EAA6B;AAC5BE,IAAAA,UAAU,GAAGX,SAAb;AACA,GAFD,MAEO;AACNW,IAAAA,UAAU,GAAGd,eAAe,CAAEY,GAAF,CAA5B;AACA;;AAED,SAAO;AACNC,IAAAA,UAAU,EAAVA,UADM;AAEND,IAAAA,GAAG,EAAEE;AAFC,GAAP;AAIA","sourcesContent":["/**\n * External dependencies\n */\nimport { isEmpty, each } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport { NEW_TAB_REL } from './constants';\n\nexport function calculatePreferedImageSize( image, container ) {\n\tconst maxWidth = container.clientWidth;\n\tconst exceedMaxWidth = image.width > maxWidth;\n\tconst ratio = image.height / image.width;\n\tconst width = exceedMaxWidth ? maxWidth : image.width;\n\tconst height = exceedMaxWidth ? maxWidth * ratio : image.height;\n\treturn { width, height };\n}\n\nexport function removeNewTabRel( currentRel ) {\n\tlet newRel = currentRel;\n\n\tif ( currentRel !== undefined && ! isEmpty( newRel ) ) {\n\t\tif ( ! isEmpty( newRel ) ) {\n\t\t\teach( NEW_TAB_REL, function( relVal ) {\n\t\t\t\tconst regExp = new RegExp( '\\\\b' + relVal + '\\\\b', 'gi' );\n\t\t\t\tnewRel = newRel.replace( regExp, '' );\n\t\t\t} );\n\n\t\t\t// Only trim if NEW_TAB_REL values was replaced.\n\t\t\tif ( newRel !== currentRel ) {\n\t\t\t\tnewRel = newRel.trim();\n\t\t\t}\n\n\t\t\tif ( isEmpty( newRel ) ) {\n\t\t\t\tnewRel = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newRel;\n}\n\n/**\n * Helper to get the link target settings to be stored.\n *\n * @param {boolean} value         The new link target value.\n * @param {Object} attributes     Block attributes.\n * @param {Object} attributes.rel Image block's rel attribute.\n *\n * @return {Object} Updated link target settings.\n */\nexport function getUpdatedLinkTargetSettings( value, { rel } ) {\n\tconst linkTarget = value ? '_blank' : undefined;\n\n\tlet updatedRel;\n\tif ( ! linkTarget && ! rel ) {\n\t\tupdatedRel = undefined;\n\t} else {\n\t\tupdatedRel = removeNewTabRel( rel );\n\t}\n\n\treturn {\n\t\tlinkTarget,\n\t\trel: updatedRel,\n\t};\n}\n"]}