{"version":3,"sources":["@wordpress/block-library/src/more/edit.js"],"names":["MoreEdit","arguments","onChangeInput","bind","onKeyDown","state","defaultText","event","setState","value","target","length","undefined","props","setAttributes","customText","keyCode","insertBlocksAfter","ENTER","checked","attributes","noTeaser","toggleHideExcerpt","inputLength","currentWidth","width","getHideExcerptHelp","Component"],"mappings":";;;;;;;;;AAKA;;;;;;;;;;;;;;AAFA;;AACA;;AAEA;;AACA;;AACA;;;;;;IAEqBA,Q;;;;;AACpB,sBAAc;AAAA;;AAAA;AACb,+BAAUC,SAAV;AACA,UAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBC,IAAnB,6CAArB;AACA,UAAKC,SAAL,GAAiB,MAAKA,SAAL,CAAeD,IAAf,6CAAjB;AAEA,UAAKE,KAAL,GAAa;AACZC,MAAAA,WAAW,EAAE,cAAI,WAAJ;AADD,KAAb;AALa;AAQb;;;;kCAEcC,K,EAAQ;AACtB;AACA,WAAKC,QAAL,CAAe;AACdF,QAAAA,WAAW,EAAE;AADC,OAAf;AAIA,UAAMG,KAAK,GACVF,KAAK,CAACG,MAAN,CAAaD,KAAb,CAAmBE,MAAnB,KAA8B,CAA9B,GAAkCC,SAAlC,GAA8CL,KAAK,CAACG,MAAN,CAAaD,KAD5D;AAEA,WAAKI,KAAL,CAAWC,aAAX,CAA0B;AAAEC,QAAAA,UAAU,EAAEN;AAAd,OAA1B;AACA;;;8BAEUF,K,EAAQ;AAAA,UACVS,OADU,GACET,KADF,CACVS,OADU;AAAA,UAEVC,iBAFU,GAEY,KAAKJ,KAFjB,CAEVI,iBAFU;;AAGlB,UAAKD,OAAO,KAAKE,eAAjB,EAAyB;AACxBD,QAAAA,iBAAiB,CAAE,CAAE,yBAAa,kCAAb,CAAF,CAAF,CAAjB;AACA;AACD;;;uCAEmBE,O,EAAU;AAC7B,aAAOA,OAAO,GACX,cAAI,wBAAJ,CADW,GAEX,cAAI,yBAAJ,CAFH;AAGA;;;6BAEQ;AAAA,kCACyB,KAAKN,KAAL,CAAWO,UADpC;AAAA,UACAL,UADA,yBACAA,UADA;AAAA,UACYM,QADZ,yBACYA,QADZ;AAAA,UAEAP,aAFA,GAEkB,KAAKD,KAFvB,CAEAC,aAFA;;AAIR,UAAMQ,iBAAiB,GAAG,SAApBA,iBAAoB;AAAA,eACzBR,aAAa,CAAE;AAAEO,UAAAA,QAAQ,EAAE,CAAEA;AAAd,SAAF,CADY;AAAA,OAA1B;;AAJQ,UAMAf,WANA,GAMgB,KAAKD,KANrB,CAMAC,WANA;AAOR,UAAMG,KAAK,GAAGM,UAAU,KAAKH,SAAf,GAA2BG,UAA3B,GAAwCT,WAAtD;AACA,UAAMiB,WAAW,GAAGd,KAAK,CAACE,MAAN,GAAe,GAAnC;AACA,UAAMa,YAAY,GAAG;AAAEC,QAAAA,KAAK,EAAEF,WAAW,GAAG;AAAvB,OAArB;AAEA,aACC,qDACC,4BAAC,8BAAD,QACC,4BAAC,qBAAD,QACC,4BAAC,yBAAD;AACC,QAAA,KAAK,EAAG,cACP,2CADO,CADT;AAIC,QAAA,OAAO,EAAG,CAAC,CAAEF,QAJd;AAKC,QAAA,QAAQ,EAAGC,iBALZ;AAMC,QAAA,IAAI,EAAG,KAAKI;AANb,QADD,CADD,CADD,EAaC;AAAK,QAAA,SAAS,EAAC;AAAf,SACC;AACC,QAAA,IAAI,EAAC,MADN;AAEC,QAAA,KAAK,EAAGjB,KAFT;AAGC,QAAA,QAAQ,EAAG,KAAKP,aAHjB;AAIC,QAAA,SAAS,EAAG,KAAKE,SAJlB;AAKC,QAAA,KAAK,EAAGoB;AALT,QADD,CAbD,CADD;AAyBA;;;EAxEoCG,kB","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { PanelBody, ToggleControl } from '@wordpress/components';\nimport { Component } from '@wordpress/element';\nimport { InspectorControls } from '@wordpress/block-editor';\nimport { ENTER } from '@wordpress/keycodes';\nimport { getDefaultBlockName, createBlock } from '@wordpress/blocks';\n\nexport default class MoreEdit extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.onChangeInput = this.onChangeInput.bind( this );\n\t\tthis.onKeyDown = this.onKeyDown.bind( this );\n\n\t\tthis.state = {\n\t\t\tdefaultText: __( 'Read more' ),\n\t\t};\n\t}\n\n\tonChangeInput( event ) {\n\t\t// Set defaultText to an empty string, allowing the user to clear/replace the input field's text\n\t\tthis.setState( {\n\t\t\tdefaultText: '',\n\t\t} );\n\n\t\tconst value =\n\t\t\tevent.target.value.length === 0 ? undefined : event.target.value;\n\t\tthis.props.setAttributes( { customText: value } );\n\t}\n\n\tonKeyDown( event ) {\n\t\tconst { keyCode } = event;\n\t\tconst { insertBlocksAfter } = this.props;\n\t\tif ( keyCode === ENTER ) {\n\t\t\tinsertBlocksAfter( [ createBlock( getDefaultBlockName() ) ] );\n\t\t}\n\t}\n\n\tgetHideExcerptHelp( checked ) {\n\t\treturn checked\n\t\t\t? __( 'The excerpt is hidden.' )\n\t\t\t: __( 'The excerpt is visible.' );\n\t}\n\n\trender() {\n\t\tconst { customText, noTeaser } = this.props.attributes;\n\t\tconst { setAttributes } = this.props;\n\n\t\tconst toggleHideExcerpt = () =>\n\t\t\tsetAttributes( { noTeaser: ! noTeaser } );\n\t\tconst { defaultText } = this.state;\n\t\tconst value = customText !== undefined ? customText : defaultText;\n\t\tconst inputLength = value.length + 1.2;\n\t\tconst currentWidth = { width: inputLength + 'em' };\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t'Hide the excerpt on the full content page'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tchecked={ !! noTeaser }\n\t\t\t\t\t\t\tonChange={ toggleHideExcerpt }\n\t\t\t\t\t\t\thelp={ this.getHideExcerptHelp }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t\t<div className=\"wp-block-more\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\tonChange={ this.onChangeInput }\n\t\t\t\t\t\tonKeyDown={ this.onKeyDown }\n\t\t\t\t\t\tstyle={ currentWidth }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n"]}