{"version":3,"sources":["@wordpress/block-library/src/post-excerpt/edit.js"],"names":["usePostContentExcerpt","wordCount","rawPostContent","raw","excerptElement","document","createElement","innerHTML","excerpt","textContent","innerText","trim","split","join","PostExcerptEditor","attributes","moreText","showMoreOnNewLine","setAttributes","isSelected","setExcerpt","postContentExcerpt","newExcerptLength","newShowMoreOnNewLine","newMoreText","PostExcerptEdit"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEntityProp, useEntityId } from '@wordpress/core-data';\nimport { useMemo } from '@wordpress/element';\nimport { InspectorControls, RichText } from '@wordpress/block-editor';\nimport { PanelBody, RangeControl, ToggleControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\nfunction usePostContentExcerpt( wordCount ) {\n\tconst [ , , { raw: rawPostContent } ] = useEntityProp(\n\t\t'postType',\n\t\t'post',\n\t\t'content'\n\t);\n\treturn useMemo( () => {\n\t\tif ( ! rawPostContent ) {\n\t\t\treturn '';\n\t\t}\n\t\tconst excerptElement = document.createElement( 'div' );\n\t\texcerptElement.innerHTML = rawPostContent;\n\t\tconst excerpt =\n\t\t\texcerptElement.textContent || excerptElement.innerText || '';\n\t\treturn excerpt\n\t\t\t.trim()\n\t\t\t.split( ' ', wordCount )\n\t\t\t.join( ' ' );\n\t}, [ rawPostContent, wordCount ] );\n}\n\nfunction PostExcerptEditor( {\n\tattributes: { wordCount, moreText, showMoreOnNewLine },\n\tsetAttributes,\n\tisSelected,\n} ) {\n\tconst [ excerpt, setExcerpt ] = useEntityProp(\n\t\t'postType',\n\t\t'post',\n\t\t'excerpt'\n\t);\n\tconst postContentExcerpt = usePostContentExcerpt( wordCount );\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Post Excerpt Settings' ) }>\n\t\t\t\t\t{ ! excerpt && (\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Max words' ) }\n\t\t\t\t\t\t\tvalue={ wordCount }\n\t\t\t\t\t\t\tonChange={ ( newExcerptLength ) =>\n\t\t\t\t\t\t\t\tsetAttributes( { wordCount: newExcerptLength } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmin={ 10 }\n\t\t\t\t\t\t\tmax={ 100 }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Show link on new line' ) }\n\t\t\t\t\t\tchecked={ showMoreOnNewLine }\n\t\t\t\t\t\tonChange={ ( newShowMoreOnNewLine ) =>\n\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\tshowMoreOnNewLine: newShowMoreOnNewLine,\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<RichText\n\t\t\t\tclassName={\n\t\t\t\t\t! showMoreOnNewLine &&\n\t\t\t\t\t'wp-block-post-excerpt__excerpt is-inline'\n\t\t\t\t}\n\t\t\t\tplaceholder={ postContentExcerpt }\n\t\t\t\tvalue={ excerpt || ( isSelected ? '' : postContentExcerpt ) }\n\t\t\t\tonChange={ setExcerpt }\n\t\t\t\tkeepPlaceholderOnFocus\n\t\t\t/>\n\t\t\t{ ! showMoreOnNewLine && ' ' }\n\t\t\t{ showMoreOnNewLine ? (\n\t\t\t\t<p>\n\t\t\t\t\t<RichText\n\t\t\t\t\t\ttagName=\"a\"\n\t\t\t\t\t\tplaceholder={ __( 'Read more…' ) }\n\t\t\t\t\t\tvalue={ moreText }\n\t\t\t\t\t\tonChange={ ( newMoreText ) =>\n\t\t\t\t\t\t\tsetAttributes( { moreText: newMoreText } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</p>\n\t\t\t) : (\n\t\t\t\t<RichText\n\t\t\t\t\ttagName=\"a\"\n\t\t\t\t\tplaceholder={ __( 'Read more…' ) }\n\t\t\t\t\tvalue={ moreText }\n\t\t\t\t\tonChange={ ( newMoreText ) =>\n\t\t\t\t\t\tsetAttributes( { moreText: newMoreText } )\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default function PostExcerptEdit( {\n\tattributes,\n\tsetAttributes,\n\tisSelected,\n} ) {\n\tif ( ! useEntityId( 'postType', 'post' ) ) {\n\t\treturn 'Post Excerpt Placeholder';\n\t}\n\treturn (\n\t\t<PostExcerptEditor\n\t\t\tattributes={ attributes }\n\t\t\tsetAttributes={ setAttributes }\n\t\t\tisSelected={ isSelected }\n\t\t/>\n\t);\n}\n"]}