{"version":3,"sources":["@wordpress/edit-site/src/components/template-switcher/index.js"],"names":["TemplateLabel","template","homeId","slug","id","home","status","TemplateSwitcher","ids","templatePartIds","activeId","isTemplatePart","onActiveIdChange","onActiveTemplatePartIdChange","onAddTemplateId","hoveredTemplate","setHoveredTemplate","themePreviewVisible","setThemePreviewVisible","onHoverTemplate","type","onHoverTemplatePart","onMouseEnterTheme","onMouseLeaveTheme","select","getCurrentTheme","getEntityRecord","currentTheme","templates","map","label","value","templateParts","isAddTemplateOpen","setIsAddTemplateOpen","className","position","children","find","choice","onClose","undefined","plus","name"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { useState, useCallback } from '@wordpress/element';\nimport {\n\tTooltip,\n\tDropdownMenu,\n\tMenuGroup,\n\tMenuItemsChoice,\n\tMenuItem,\n} from '@wordpress/components';\nimport { Icon, home, plus } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport AddTemplate from '../add-template';\nimport TemplatePreview from './template-preview';\nimport ThemePreview from './theme-preview';\n\nfunction TemplateLabel( { template, homeId } ) {\n\treturn (\n\t\t<>\n\t\t\t{ template.slug }{ ' ' }\n\t\t\t{ template.id === homeId && (\n\t\t\t\t<Tooltip text={ __( 'Home' ) }>\n\t\t\t\t\t<div className=\"edit-site-template-switcher__label-home-icon\">\n\t\t\t\t\t\t<Icon icon={ home } />\n\t\t\t\t\t</div>\n\t\t\t\t</Tooltip>\n\t\t\t) }\n\t\t\t{ template.status !== 'auto-draft' && (\n\t\t\t\t<Tooltip text={ __( 'Customized' ) }>\n\t\t\t\t\t<span className=\"edit-site-template-switcher__label-customized-dot\" />\n\t\t\t\t</Tooltip>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default function TemplateSwitcher( {\n\tids,\n\ttemplatePartIds,\n\tactiveId,\n\thomeId,\n\tisTemplatePart,\n\tonActiveIdChange,\n\tonActiveTemplatePartIdChange,\n\tonAddTemplateId,\n} ) {\n\tconst [ hoveredTemplate, setHoveredTemplate ] = useState();\n\tconst [ themePreviewVisible, setThemePreviewVisible ] = useState( false );\n\n\tconst onHoverTemplate = ( id ) => {\n\t\tsetHoveredTemplate( { id, type: 'template' } );\n\t};\n\tconst onHoverTemplatePart = ( id ) => {\n\t\tsetHoveredTemplate( { id, type: 'template-part' } );\n\t};\n\n\tconst onMouseEnterTheme = () => {\n\t\tsetThemePreviewVisible( () => true );\n\t};\n\tconst onMouseLeaveTheme = () => {\n\t\tsetThemePreviewVisible( () => false );\n\t};\n\n\tconst { currentTheme, templates, templateParts } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getCurrentTheme, getEntityRecord } = select( 'core' );\n\t\t\treturn {\n\t\t\t\tcurrentTheme: getCurrentTheme(),\n\t\t\t\ttemplates: ids.map( ( id ) => {\n\t\t\t\t\tconst template = getEntityRecord(\n\t\t\t\t\t\t'postType',\n\t\t\t\t\t\t'wp_template',\n\t\t\t\t\t\tid\n\t\t\t\t\t);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tlabel: template ? (\n\t\t\t\t\t\t\t<TemplateLabel\n\t\t\t\t\t\t\t\ttemplate={ template }\n\t\t\t\t\t\t\t\thomeId={ homeId }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t__( 'Loading…' )\n\t\t\t\t\t\t),\n\t\t\t\t\t\tvalue: id,\n\t\t\t\t\t\tslug: template ? template.slug : __( 'Loading…' ),\n\t\t\t\t\t};\n\t\t\t\t} ),\n\t\t\t\ttemplateParts: templatePartIds.map( ( id ) => {\n\t\t\t\t\tconst template = getEntityRecord(\n\t\t\t\t\t\t'postType',\n\t\t\t\t\t\t'wp_template_part',\n\t\t\t\t\t\tid\n\t\t\t\t\t);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tlabel: template ? (\n\t\t\t\t\t\t\t<TemplateLabel template={ template } />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t__( 'Loading…' )\n\t\t\t\t\t\t),\n\t\t\t\t\t\tvalue: id,\n\t\t\t\t\t\tslug: template ? template.slug : __( 'Loading…' ),\n\t\t\t\t\t};\n\t\t\t\t} ),\n\t\t\t};\n\t\t},\n\t\t[ ids, templatePartIds, homeId ]\n\t);\n\tconst [ isAddTemplateOpen, setIsAddTemplateOpen ] = useState( false );\n\treturn (\n\t\t<>\n\t\t\t<DropdownMenu\n\t\t\t\tpopoverProps={ {\n\t\t\t\t\tclassName: 'edit-site-template-switcher__popover',\n\t\t\t\t\tposition: 'bottom right',\n\t\t\t\t} }\n\t\t\t\ticon={ null }\n\t\t\t\tlabel={ __( 'Switch Template' ) }\n\t\t\t\ttoggleProps={ {\n\t\t\t\t\tchildren: ( isTemplatePart\n\t\t\t\t\t\t? templateParts\n\t\t\t\t\t\t: templates\n\t\t\t\t\t).find( ( choice ) => choice.value === activeId ).slug,\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ ( { onClose } ) => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<MenuGroup label={ __( 'Templates' ) }>\n\t\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\t\tchoices={ templates }\n\t\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\t\t! isTemplatePart ? activeId : undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonSelect={ onActiveIdChange }\n\t\t\t\t\t\t\t\tonHover={ onHoverTemplate }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\ticon={ plus }\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\tsetIsAddTemplateOpen( true );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'New' ) }\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t<MenuGroup label={ __( 'Template Parts' ) }>\n\t\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\t\tchoices={ templateParts }\n\t\t\t\t\t\t\t\tvalue={ isTemplatePart ? activeId : undefined }\n\t\t\t\t\t\t\t\tonSelect={ onActiveTemplatePartIdChange }\n\t\t\t\t\t\t\t\tonHover={ onHoverTemplatePart }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t<MenuGroup label={ __( 'Current theme' ) }>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonMouseEnter={ onMouseEnterTheme }\n\t\t\t\t\t\t\t\tonMouseLeave={ onMouseLeaveTheme }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ currentTheme.name }\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t{ !! hoveredTemplate?.id && (\n\t\t\t\t\t\t\t<TemplatePreview item={ hoveredTemplate } />\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ themePreviewVisible && (\n\t\t\t\t\t\t\t<ThemePreview theme={ currentTheme } />\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<div className=\"edit-site-template-switcher__footer\" />\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</DropdownMenu>\n\t\t\t<AddTemplate\n\t\t\t\tids={ ids }\n\t\t\t\tonAddTemplateId={ onAddTemplateId }\n\t\t\t\tonRequestClose={ useCallback(\n\t\t\t\t\t() => setIsAddTemplateOpen( false ),\n\t\t\t\t\t[]\n\t\t\t\t) }\n\t\t\t\tisOpen={ isAddTemplateOpen }\n\t\t\t/>\n\t\t</>\n\t);\n}\n"]}