{"version":3,"sources":["@wordpress/edit-site/src/components/save-button/index.js"],"names":["some","useEntityProp","useEffect","useSelect","Button","__","useEditorContext","SaveButton","openEntitiesSavedStates","settings","templateType","setStatus","setTitle","slug","select","__experimentalGetDirtyEntityRecords","isSavingEntityRecord","dirtyEntityRecords","isDirty","length","isSaving","record","kind","name","key","disabled","undefined"],"mappings":";;;AAAA;;;AAGA,SAASA,IAAT,QAAqB,QAArB;AAEA;;;;AAGA,SAASC,aAAT,QAA8B,sBAA9B;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA,SAASC,MAAT,QAAuB,uBAAvB;AACA,SAASC,EAAT,QAAmB,iBAAnB;AAEA;;;;AAGA,SAASC,gBAAT,QAAiC,WAAjC;AAEA,eAAe,SAASC,UAAT,OAAmD;AAAA,MAA5BC,uBAA4B,QAA5BA,uBAA4B;;AAAA,0BAC5CF,gBAAgB,EAD4B;AAAA,MACzDG,QADyD,qBACzDA,QADyD;;AAAA,uBAEzCR,aAAa,CACpC,UADoC,EAEpCQ,QAAQ,CAACC,YAF2B,EAGpC,QAHoC,CAF4B;AAAA;AAAA,MAEvDC,SAFuD;;AAAA,wBAO1CV,aAAa,CACnC,UADmC,EAEnCQ,QAAQ,CAACC,YAF0B,EAGnC,OAHmC,CAP6B;AAAA;AAAA,MAOvDE,QAPuD;;AAAA,wBAYhDX,aAAa,CAAE,UAAF,EAAcQ,QAAQ,CAACC,YAAvB,EAAqC,MAArC,CAZmC;AAAA;AAAA,MAYzDG,IAZyD,uBAajE;;;AACAX,EAAAA,SAAS,CAAE,YAAM;AAChBS,IAAAA,SAAS,CAAE,SAAF,CAAT;AACAC,IAAAA,QAAQ,CAAEC,IAAF,CAAR;AACA,GAHQ,EAGN,CAAEA,IAAF,CAHM,CAAT;;AAdiE,mBAmBnCV,SAAS,CAAE,UAAEW,MAAF,EAAc;AAAA,kBAIlDA,MAAM,CAAE,MAAF,CAJ4C;AAAA,QAErDC,mCAFqD,WAErDA,mCAFqD;AAAA,QAGrDC,oBAHqD,WAGrDA,oBAHqD;;AAKtD,QAAMC,kBAAkB,GAAGF,mCAAmC,EAA9D;;AACA,WAAO;AACNG,MAAAA,OAAO,EAAED,kBAAkB,CAACE,MAAnB,GAA4B,CAD/B;AAENC,MAAAA,QAAQ,EAAEpB,IAAI,CAAEiB,kBAAF,EAAsB,UAAEI,MAAF;AAAA,eACnCL,oBAAoB,CAAEK,MAAM,CAACC,IAAT,EAAeD,MAAM,CAACE,IAAtB,EAA4BF,MAAM,CAACG,GAAnC,CADe;AAAA,OAAtB;AAFR,KAAP;AAMA,GAZsC,CAnB0B;AAAA,MAmBzDN,OAnByD,cAmBzDA,OAnByD;AAAA,MAmBhDE,QAnBgD,cAmBhDA,QAnBgD;;AAgCjE,MAAMK,QAAQ,GAAG,CAAEP,OAAF,IAAaE,QAA9B;AAEA,SACC,8BACC,cAAC,MAAD;AACC,IAAA,SAAS,MADV;AAEC,IAAA,SAAS,EAAC,+BAFX;AAGC,qBAAgBK,QAHjB;AAIC,IAAA,QAAQ,EAAGA,QAJZ;AAKC,IAAA,MAAM,EAAGL,QALV;AAMC,IAAA,OAAO,EAAGK,QAAQ,GAAGC,SAAH,GAAelB;AANlC,KAQGH,EAAE,CAAE,eAAF,CARL,CADD,CADD;AAcA","sourcesContent":["/**\n * External dependencies\n */\nimport { some } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { useEntityProp } from '@wordpress/core-data';\nimport { useEffect } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { Button } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useEditorContext } from '../editor';\n\nexport default function SaveButton( { openEntitiesSavedStates } ) {\n\tconst { settings } = useEditorContext();\n\tconst [ , setStatus ] = useEntityProp(\n\t\t'postType',\n\t\tsettings.templateType,\n\t\t'status'\n\t);\n\tconst [ , setTitle ] = useEntityProp(\n\t\t'postType',\n\t\tsettings.templateType,\n\t\t'title'\n\t);\n\tconst [ slug ] = useEntityProp( 'postType', settings.templateType, 'slug' );\n\t// Publish template if not done yet.\n\tuseEffect( () => {\n\t\tsetStatus( 'publish' );\n\t\tsetTitle( slug );\n\t}, [ slug ] );\n\n\tconst { isDirty, isSaving } = useSelect( ( select ) => {\n\t\tconst {\n\t\t\t__experimentalGetDirtyEntityRecords,\n\t\t\tisSavingEntityRecord,\n\t\t} = select( 'core' );\n\t\tconst dirtyEntityRecords = __experimentalGetDirtyEntityRecords();\n\t\treturn {\n\t\t\tisDirty: dirtyEntityRecords.length > 0,\n\t\t\tisSaving: some( dirtyEntityRecords, ( record ) =>\n\t\t\t\tisSavingEntityRecord( record.kind, record.name, record.key )\n\t\t\t),\n\t\t};\n\t} );\n\tconst disabled = ! isDirty || isSaving;\n\n\treturn (\n\t\t<>\n\t\t\t<Button\n\t\t\t\tisPrimary\n\t\t\t\tclassName=\"edit-site-save-button__button\"\n\t\t\t\taria-disabled={ disabled }\n\t\t\t\tdisabled={ disabled }\n\t\t\t\tisBusy={ isSaving }\n\t\t\t\tonClick={ disabled ? undefined : openEntitiesSavedStates }\n\t\t\t>\n\t\t\t\t{ __( 'Update Design' ) }\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n"]}