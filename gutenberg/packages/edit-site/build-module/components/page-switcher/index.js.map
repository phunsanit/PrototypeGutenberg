{"version":3,"sources":["@wordpress/edit-site/src/components/page-switcher/index.js"],"names":["getPath","getQueryString","useSelect","DropdownMenu","MenuGroup","MenuItemsChoice","__","__experimentalLinkControl","LinkControl","getPathFromLink","link","path","queryString","value","PageSwitcher","showOnFront","activePage","onActivePageChange","select","getEntityRecords","pageGroups","pages","map","_page","label","title","rendered","context","postType","postId","id","categories","category","name","query","categoryIds","queryContext","page","posts","unshift","onPageSelect","newPath","find","choice","onPostSelect","post","url","type","children","className"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { getPath, getQueryString } from '@wordpress/url';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tDropdownMenu,\n\tMenuGroup,\n\tMenuItemsChoice,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { __experimentalLinkControl as LinkControl } from '@wordpress/block-editor';\n\nfunction getPathFromLink( link ) {\n\tconst path = getPath( link );\n\tconst queryString = getQueryString( link );\n\tlet value = '/';\n\tif ( path ) value += path;\n\tif ( queryString ) value += `?${ queryString }`;\n\treturn value;\n}\nexport default function PageSwitcher( {\n\tshowOnFront,\n\tactivePage,\n\tonActivePageChange,\n} ) {\n\tconst { pages = [], categories = [], posts = [] } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getEntityRecords } = select( 'core' );\n\t\t\tconst pageGroups = {\n\t\t\t\tpages: getEntityRecords( 'postType', 'page' )?.map(\n\t\t\t\t\t( _page ) => {\n\t\t\t\t\t\tconst path = getPathFromLink( _page.link );\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tlabel: _page.title.rendered,\n\t\t\t\t\t\t\tvalue: path,\n\t\t\t\t\t\t\tcontext: { postType: 'page', postId: _page.id },\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t),\n\t\t\t\tcategories: getEntityRecords( 'taxonomy', 'category' )?.map(\n\t\t\t\t\t( category ) => {\n\t\t\t\t\t\tconst path = getPathFromLink( category.link );\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tlabel: category.name,\n\t\t\t\t\t\t\tvalue: path,\n\t\t\t\t\t\t\tcontext: {\n\t\t\t\t\t\t\t\tquery: { categoryIds: [ category.id ] },\n\t\t\t\t\t\t\t\tqueryContext: { page: 1 },\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t),\n\t\t\t\tposts: [],\n\t\t\t};\n\t\t\tif ( showOnFront === 'posts' )\n\t\t\t\tpageGroups.posts.unshift( {\n\t\t\t\t\tlabel: __( 'All Posts' ),\n\t\t\t\t\tvalue: '/',\n\t\t\t\t\tcontext: {\n\t\t\t\t\t\tquery: { categoryIds: [] },\n\t\t\t\t\t\tqueryContext: { page: 1 },\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\treturn pageGroups;\n\t\t},\n\t\t[ showOnFront ]\n\t);\n\n\tconst onPageSelect = ( newPath ) => {\n\t\tconst { value: path, context } = [ ...pages, ...categories ].find(\n\t\t\t( choice ) => choice.value === newPath\n\t\t);\n\t\tonActivePageChange( { path, context } );\n\t};\n\tconst onPostSelect = ( post ) =>\n\t\tonActivePageChange( {\n\t\t\tpath: getPathFromLink( post.url ),\n\t\t\tcontext: { postType: post.type, postId: post.id },\n\t\t} );\n\treturn (\n\t\t<DropdownMenu\n\t\t\ticon={ null }\n\t\t\tlabel={ __( 'Switch Page' ) }\n\t\t\ttoggleProps={ {\n\t\t\t\tchildren:\n\t\t\t\t\t[ ...pages, ...categories, ...posts ].find(\n\t\t\t\t\t\t( choice ) => choice.value === activePage.path\n\t\t\t\t\t)?.label || activePage.path,\n\t\t\t} }\n\t\t\tmenuProps={ { className: 'edit-site-page-switcher__menu' } }\n\t\t>\n\t\t\t{ () => (\n\t\t\t\t<>\n\t\t\t\t\t<MenuGroup label={ __( 'Pages' ) }>\n\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\tchoices={ pages }\n\t\t\t\t\t\t\tvalue={ activePage.path }\n\t\t\t\t\t\t\tonSelect={ onPageSelect }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t<MenuGroup label={ __( 'Categories' ) }>\n\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\tchoices={ categories }\n\t\t\t\t\t\t\tvalue={ activePage.path }\n\t\t\t\t\t\t\tonSelect={ onPageSelect }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t<MenuGroup label={ __( 'Posts' ) }>\n\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\tchoices={ posts }\n\t\t\t\t\t\t\tvalue={ activePage.path }\n\t\t\t\t\t\t\tonSelect={ onPageSelect }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<LinkControl\n\t\t\t\t\t\t\tsearchInputPlaceholder={ __( 'Search for Post' ) }\n\t\t\t\t\t\t\tonChange={ onPostSelect }\n\t\t\t\t\t\t\tsettings={ {} }\n\t\t\t\t\t\t\tnoDirectEntry\n\t\t\t\t\t\t\tshowInitialSuggestions\n\t\t\t\t\t\t/>\n\t\t\t\t\t</MenuGroup>\n\t\t\t\t</>\n\t\t\t) }\n\t\t</DropdownMenu>\n\t);\n}\n"]}