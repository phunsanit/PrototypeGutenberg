{"version":3,"sources":["@wordpress/edit-navigation/src/index.js"],"names":["fetchLinkSuggestions","search","perPage","path","per_page","type","posts","post","id","url","title","subtype","initialize","settings","process","env","GUTENBERG_PHASE","__experimentalFetchLinkSuggestions","document","getElementById"],"mappings":";;;;;;;;;AAaA;;;;;;AAVA;;AAKA;;AACA;;AAKA;;AACA;;AACA;;AACA;;AAKA;;AAtBA;;;;AAKA;;;;AAcA;;;;AAKA;;;;;;;;;;;;AAYA,IAAMA,oBAAoB;AAAA,qFAAG,iBAAQC,MAAR;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,4EAAmC,EAAnC,wBAAkBC,OAAlB,EAAkBA,OAAlB,8BAA4B,EAA5B;AAAA;AAAA,mBACR,uBAAU;AAC7BC,cAAAA,IAAI,EAAE,uBAAc,eAAd,EAA+B;AACpCF,gBAAAA,MAAM,EAANA,MADoC;AAEpCG,gBAAAA,QAAQ,EAAEF,OAF0B;AAGpCG,gBAAAA,IAAI,EAAE;AAH8B,eAA/B;AADuB,aAAV,CADQ;;AAAA;AACtBC,YAAAA,KADsB;AAAA,6CASrB,iBAAKA,KAAL,EAAY,UAAEC,IAAF;AAAA,qBAAc;AAChCC,gBAAAA,EAAE,EAAED,IAAI,CAACC,EADuB;AAEhCC,gBAAAA,GAAG,EAAEF,IAAI,CAACE,GAFsB;AAGhCC,gBAAAA,KAAK,EAAE,kCAAgBH,IAAI,CAACG,KAArB,KAAgC,cAAI,YAAJ,CAHP;AAIhCL,gBAAAA,IAAI,EAAEE,IAAI,CAACI,OAAL,IAAgBJ,IAAI,CAACF;AAJK,eAAd;AAAA,aAAZ,CATqB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAApBL,oBAAoB;AAAA;AAAA;AAAA,GAA1B;;AAiBO,SAASY,UAAT,CAAqBJ,EAArB,EAAyBK,QAAzB,EAAoC;AAC1C;;AACA,MAAKC,OAAO,CAACC,GAAR,CAAYC,eAAZ,KAAgC,CAArC,EAAyC;AACxC,oEAA8CH,QAA9C;AACA;;AACDA,EAAAA,QAAQ,CAACI,kCAAT,GAA8CjB,oBAA9C;AACA,uBACC,4BAAC,eAAD;AAAQ,IAAA,mBAAmB,EAAGa;AAA9B,IADD,EAECK,QAAQ,CAACC,cAAT,CAAyBX,EAAzB,CAFD;AAIA","sourcesContent":["/**\n * External dependencies\n */\nimport { map } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport '@wordpress/notices';\nimport {\n\tregisterCoreBlocks,\n\t__experimentalRegisterExperimentalCoreBlocks,\n} from '@wordpress/block-library';\nimport { render } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\n\n/**\n * Internal dependencies\n */\nimport Layout from './components/layout';\n\n/**\n * Fetches link suggestions from the API. This function is an exact copy of a function found at:\n *\n * wordpress/editor/src/components/provider/index.js\n *\n * It seems like there is no suitable package to import this from. Ideally it would be either part of core-data.\n * Until we refactor it, just copying the code is the simplest solution.\n *\n * @param {Object} search\n * @param {number} perPage\n * @return {Promise<Object[]>} List of suggestions\n */\nconst fetchLinkSuggestions = async ( search, { perPage = 20 } = {} ) => {\n\tconst posts = await apiFetch( {\n\t\tpath: addQueryArgs( '/wp/v2/search', {\n\t\t\tsearch,\n\t\t\tper_page: perPage,\n\t\t\ttype: 'post',\n\t\t} ),\n\t} );\n\n\treturn map( posts, ( post ) => ( {\n\t\tid: post.id,\n\t\turl: post.url,\n\t\ttitle: decodeEntities( post.title ) || __( '(no title)' ),\n\t\ttype: post.subtype || post.type,\n\t} ) );\n};\n\nexport function initialize( id, settings ) {\n\tregisterCoreBlocks();\n\tif ( process.env.GUTENBERG_PHASE === 2 ) {\n\t\t__experimentalRegisterExperimentalCoreBlocks( settings );\n\t}\n\tsettings.__experimentalFetchLinkSuggestions = fetchLinkSuggestions;\n\trender(\n\t\t<Layout blockEditorSettings={ settings } />,\n\t\tdocument.getElementById( id )\n\t);\n}\n"]}