{"version":3,"sources":["@wordpress/block-editor/src/components/block-mover/button.js"],"names":["classnames","castArray","first","last","getBlockType","Button","useInstanceId","useSelect","useDispatch","forwardRef","__","leftArrow","rightArrow","chevronUp","chevronDown","getBlockMoverDescription","getArrowIcon","direction","orientation","isRTL","getMovementDirectionLabel","moveDirection","BlockMoverButton","ref","clientIds","__experimentalOrientation","props","instanceId","blocksCount","length","select","getBlockIndex","getBlockRootClientId","getBlockOrder","getBlock","getSettings","getBlockListSettings","normalizedClientIds","firstClientId","blockRootClientId","firstBlockIndex","lastBlockIndex","blockOrder","block","isFirstBlock","isLastBlock","__experimentalMoverDirection","blockType","name","isDisabled","rootClientId","firstIndex","isFirst","isLast","moverOrientation","moveBlocksDown","moveBlocksUp","moverFunction","onClick","event","descriptionId","title","BlockMoverUpButton","BlockMoverDownButton"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { castArray, first, last } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { getBlockType } from '@wordpress/blocks';\nimport { Button } from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { forwardRef } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { leftArrow, rightArrow } from './icons';\nimport { chevronUp, chevronDown } from '@wordpress/icons';\nimport { getBlockMoverDescription } from './mover-description';\n\nconst getArrowIcon = ( direction, orientation, isRTL ) => {\n\tif ( direction === 'up' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL ? rightArrow : leftArrow;\n\t\t}\n\t\treturn chevronUp;\n\t} else if ( direction === 'down' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL ? leftArrow : rightArrow;\n\t\t}\n\t\treturn chevronDown;\n\t}\n\treturn null;\n};\n\nconst getMovementDirectionLabel = ( moveDirection, orientation, isRTL ) => {\n\tif ( moveDirection === 'up' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL ? __( 'Move right' ) : __( 'Move left' );\n\t\t}\n\t\treturn __( 'Move up' );\n\t} else if ( moveDirection === 'down' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL ? __( 'Move left' ) : __( 'Move right' );\n\t\t}\n\t\treturn __( 'Move down' );\n\t}\n\treturn null;\n};\n\nconst BlockMoverButton = forwardRef(\n\t(\n\t\t{\n\t\t\tclientIds,\n\t\t\tdirection,\n\t\t\t__experimentalOrientation: orientation,\n\t\t\t...props\n\t\t},\n\t\tref\n\t) => {\n\t\tconst instanceId = useInstanceId( BlockMoverButton );\n\t\tconst blocksCount = castArray( clientIds ).length;\n\n\t\tconst {\n\t\t\tblockType,\n\t\t\tisDisabled,\n\t\t\trootClientId,\n\t\t\tisFirst,\n\t\t\tisLast,\n\t\t\tfirstIndex,\n\t\t\tisRTL,\n\t\t\tmoverOrientation,\n\t\t} = useSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst {\n\t\t\t\t\tgetBlockIndex,\n\t\t\t\t\tgetBlockRootClientId,\n\t\t\t\t\tgetBlockOrder,\n\t\t\t\t\tgetBlock,\n\t\t\t\t\tgetSettings,\n\t\t\t\t\tgetBlockListSettings,\n\t\t\t\t} = select( 'core/block-editor' );\n\t\t\t\tconst normalizedClientIds = castArray( clientIds );\n\t\t\t\tconst firstClientId = first( normalizedClientIds );\n\t\t\t\tconst blockRootClientId = getBlockRootClientId( firstClientId );\n\t\t\t\tconst firstBlockIndex = getBlockIndex(\n\t\t\t\t\tfirstClientId,\n\t\t\t\t\tblockRootClientId\n\t\t\t\t);\n\t\t\t\tconst lastBlockIndex = getBlockIndex(\n\t\t\t\t\tlast( normalizedClientIds ),\n\t\t\t\t\tblockRootClientId\n\t\t\t\t);\n\t\t\t\tconst blockOrder = getBlockOrder( blockRootClientId );\n\t\t\t\tconst block = getBlock( firstClientId );\n\t\t\t\tconst isFirstBlock = firstBlockIndex === 0;\n\t\t\t\tconst isLastBlock = lastBlockIndex === blockOrder.length - 1;\n\t\t\t\tconst { __experimentalMoverDirection = 'vertical' } =\n\t\t\t\t\tgetBlockListSettings( blockRootClientId ) || {};\n\n\t\t\t\treturn {\n\t\t\t\t\tblockType: block ? getBlockType( block.name ) : null,\n\t\t\t\t\tisDisabled: direction === 'up' ? isFirstBlock : isLastBlock,\n\t\t\t\t\trootClientId: blockRootClientId,\n\t\t\t\t\tfirstIndex: firstBlockIndex,\n\t\t\t\t\tisFirst: isFirstBlock,\n\t\t\t\t\tisLast: isLastBlock,\n\t\t\t\t\tisRTL: getSettings().isRTL,\n\t\t\t\t\tmoverOrientation:\n\t\t\t\t\t\torientation || __experimentalMoverDirection,\n\t\t\t\t};\n\t\t\t},\n\t\t\t[ clientIds, direction ]\n\t\t);\n\n\t\tconst { moveBlocksDown, moveBlocksUp } = useDispatch(\n\t\t\t'core/block-editor'\n\t\t);\n\t\tconst moverFunction =\n\t\t\tdirection === 'up' ? moveBlocksUp : moveBlocksDown;\n\n\t\tconst onClick = ( event ) => {\n\t\t\tmoverFunction( clientIds, rootClientId );\n\t\t\tif ( props.onClick ) {\n\t\t\t\tprops.onClick( event );\n\t\t\t}\n\t\t};\n\n\t\tconst descriptionId = `block-editor-block-mover-button__description-${ instanceId }`;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Button\n\t\t\t\t\tref={ ref }\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'block-editor-block-mover-button',\n\t\t\t\t\t\t`is-${ direction }-button`\n\t\t\t\t\t) }\n\t\t\t\t\ticon={ getArrowIcon( direction, moverOrientation, isRTL ) }\n\t\t\t\t\tlabel={ getMovementDirectionLabel(\n\t\t\t\t\t\tdirection,\n\t\t\t\t\t\tmoverOrientation,\n\t\t\t\t\t\tisRTL\n\t\t\t\t\t) }\n\t\t\t\t\taria-describedby={ descriptionId }\n\t\t\t\t\t{ ...props }\n\t\t\t\t\tonClick={ isDisabled ? null : onClick }\n\t\t\t\t\taria-disabled={ isDisabled }\n\t\t\t\t/>\n\t\t\t\t<span\n\t\t\t\t\tid={ descriptionId }\n\t\t\t\t\tclassName=\"block-editor-block-mover-button__description\"\n\t\t\t\t>\n\t\t\t\t\t{ getBlockMoverDescription(\n\t\t\t\t\t\tblocksCount,\n\t\t\t\t\t\tblockType && blockType.title,\n\t\t\t\t\t\tfirstIndex,\n\t\t\t\t\t\tisFirst,\n\t\t\t\t\t\tisLast,\n\t\t\t\t\t\tdirection === 'up' ? -1 : 1,\n\t\t\t\t\t\tmoverOrientation,\n\t\t\t\t\t\tisRTL\n\t\t\t\t\t) }\n\t\t\t\t</span>\n\t\t\t</>\n\t\t);\n\t}\n);\n\nexport const BlockMoverUpButton = forwardRef( ( props, ref ) => {\n\treturn <BlockMoverButton direction=\"up\" ref={ ref } { ...props } />;\n} );\n\nexport const BlockMoverDownButton = forwardRef( ( props, ref ) => {\n\treturn <BlockMoverButton direction=\"down\" ref={ ref } { ...props } />;\n} );\n"]}