{"version":3,"sources":["@wordpress/block-editor/src/components/block-caption/index.native.js"],"names":["BlockCaption","accessible","accessibilityLabelCreator","onBlur","onChange","onFocus","isSelected","shouldDisplay","text","styles","container","padding","select","clientId","getBlockAttributes","getSelectedBlockClientId","caption","isBlockSelected","RichText","isEmpty","dispatch","updateBlockAttributes"],"mappings":";;;;;;;;;;;AAGA;;AAKA;;AACA;;AACA;;AAKA;;AAfA;;;;AAKA;;;;AAOA;;;AAKA,IAAMA,YAAY,GAAG,SAAfA,YAAe;AAAA,MACpBC,UADoB,QACpBA,UADoB;AAAA,MAEpBC,yBAFoB,QAEpBA,yBAFoB;AAAA,MAGpBC,MAHoB,QAGpBA,MAHoB;AAAA,MAIpBC,QAJoB,QAIpBA,QAJoB;AAAA,MAKpBC,OALoB,QAKpBA,OALoB;AAAA,MAMpBC,UANoB,QAMpBA,UANoB;AAAA,MAOpBC,aAPoB,QAOpBA,aAPoB;AAAA,MAQpBC,IARoB,QAQpBA,IARoB;AAAA,SAUpB,4BAAC,iBAAD;AAAM,IAAA,KAAK,EAAG,CAAEC,gBAAOC,SAAT,EAAoBH,aAAa,IAAIE,gBAAOE,OAA5C;AAAd,KACC,4BAAC,oBAAD;AACC,IAAA,yBAAyB,EAAGT,yBAD7B;AAEC,IAAA,UAAU,EAAGD,UAFd;AAGC,IAAA,UAAU,EAAGK,UAHd;AAIC,IAAA,MAAM,EAAGH,MAJV;AAKC,IAAA,QAAQ,EAAGC,QALZ;AAMC,IAAA,OAAO,EAAGC,OANX;AAOC,IAAA,aAAa,EAAGE,aAPjB;AAQC,IAAA,KAAK,EAAGC;AART,IADD,CAVoB;AAAA,CAArB;;eAwBe,sBAAS,CACvB,sBAAY,UAAEI,MAAF,SAA4B;AAAA,MAAhBC,QAAgB,SAAhBA,QAAgB;;AAAA,gBACkBD,MAAM,CAC9D,mBAD8D,CADxB;AAAA,MAC/BE,kBAD+B,WAC/BA,kBAD+B;AAAA,MACXC,wBADW,WACXA,wBADW;;AAAA,4BAInBD,kBAAkB,CAAED,QAAF,CAJC;AAAA,MAI/BG,OAJ+B,uBAI/BA,OAJ+B;;AAKvC,MAAMC,eAAe,GAAGF,wBAAwB,OAAOF,QAAvD,CALuC,CAOvC;AACA;;AACA,MAAMN,aAAa,GAClB,CAAEW,sBAASC,OAAT,CAAkBH,OAAlB,CAAF,GAAgC,CAAhC,IAAqCC,eADtC;AAGA,SAAO;AACNV,IAAAA,aAAa,EAAbA,aADM;AAENC,IAAAA,IAAI,EAAEQ;AAFA,GAAP;AAIA,CAhBD,CADuB,EAkBvB,wBAAc,UAAEI,QAAF,SAA8B;AAAA,MAAhBP,QAAgB,SAAhBA,QAAgB;;AAAA,kBACTO,QAAQ,CAAE,mBAAF,CADC;AAAA,MACnCC,qBADmC,aACnCA,qBADmC;;AAE3C,SAAO;AACNjB,IAAAA,QAAQ,EAAE,kBAAEY,OAAF,EAAe;AACxBK,MAAAA,qBAAqB,CAAER,QAAF,EAAY;AAAEG,QAAAA,OAAO,EAAPA;AAAF,OAAZ,CAArB;AACA;AAHK,GAAP;AAKA,CAPD,CAlBuB,CAAT,EA0BVhB,YA1BU,C","sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { Caption, RichText } from '@wordpress/block-editor';\nimport { compose } from '@wordpress/compose';\nimport { withDispatch, withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport styles from './styles.scss';\n\nconst BlockCaption = ( {\n\taccessible,\n\taccessibilityLabelCreator,\n\tonBlur,\n\tonChange,\n\tonFocus,\n\tisSelected,\n\tshouldDisplay,\n\ttext,\n} ) => (\n\t<View style={ [ styles.container, shouldDisplay && styles.padding ] }>\n\t\t<Caption\n\t\t\taccessibilityLabelCreator={ accessibilityLabelCreator }\n\t\t\taccessible={ accessible }\n\t\t\tisSelected={ isSelected }\n\t\t\tonBlur={ onBlur }\n\t\t\tonChange={ onChange }\n\t\t\tonFocus={ onFocus }\n\t\t\tshouldDisplay={ shouldDisplay }\n\t\t\tvalue={ text }\n\t\t/>\n\t</View>\n);\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst { getBlockAttributes, getSelectedBlockClientId } = select(\n\t\t\t'core/block-editor'\n\t\t);\n\t\tconst { caption } = getBlockAttributes( clientId );\n\t\tconst isBlockSelected = getSelectedBlockClientId() === clientId;\n\n\t\t// We'll render the caption so that the soft keyboard is not forced to close on Android\n\t\t// but still hide it by setting its display style to none. See wordpress-mobile/gutenberg-mobile#1221\n\t\tconst shouldDisplay =\n\t\t\t! RichText.isEmpty( caption ) > 0 || isBlockSelected;\n\n\t\treturn {\n\t\t\tshouldDisplay,\n\t\t\ttext: caption,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\tconst { updateBlockAttributes } = dispatch( 'core/block-editor' );\n\t\treturn {\n\t\t\tonChange: ( caption ) => {\n\t\t\t\tupdateBlockAttributes( clientId, { caption } );\n\t\t\t},\n\t\t};\n\t} ),\n] )( BlockCaption );\n"]}