{"version":3,"sources":["@wordpress/block-editor/src/components/block-list/index.native.js"],"names":["BlockListContext","stylesMemo","getStyles","isRootList","isStackedHorizontally","horizontalAlignment","styleName","computedStyles","styles","horizontal","BlockList","arguments","renderItem","bind","renderBlockListFooter","onCaretVerticalPositionChange","scrollViewInnerRef","addBlockToEndOfPost","shouldFlatListPreventAutomaticScroll","shouldShowInnerBlockAppender","renderEmptyList","newBlock","props","insertBlock","blockCount","targetId","caretY","previousCaretY","KeyboardAwareFlatList","handleCaretVerticalPositionChange","scrollViewRef","ref","isBlockInsertionPointVisible","blockClientIds","renderAppender","length","rootClientId","renderList","parentScrollRef","extraProps","clearSelectedBlock","title","header","isReadOnly","marginVertical","defaultBlock","marginTop","marginHorizontal","marginLeft","isFloatingToolbarVisible","parentWidth","blockToolbar","blockBorder","headerToolbar","floatingToolbar","containerStyle","flex","Platform","OS","removeClippedSubviews","autoScroll","height","width","overflowVisible","horizontalContentContainer","identity","innerAppender","clientId","item","contentResizeMode","contentStyle","onAddBlock","onDeleteBlock","paragraphBlock","withFooter","renderFooterAppender","blockListFooter","Component","select","__experimentalMoverDirection","getBlockCount","getBlockOrder","getSelectedBlockClientId","getSettings","getBlockHierarchyRootClientId","selectedBlockClientId","readOnly","rootBlockId","hasRootInnerBlocks","undefined","dispatch","replaceBlock","withPreferredColorScheme","EmptyListComponent","shouldShowInsertionPoint","defaultAppender","EmptyListComponentCompose","getBlockInsertionPoint","insertionPoint","blockInsertionPointIsVisible","index"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { identity } from 'lodash';\nimport { View, Platform, TouchableWithoutFeedback } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { Component, createContext } from '@wordpress/element';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport { createBlock } from '@wordpress/blocks';\nimport {\n\tKeyboardAwareFlatList,\n\tReadableContentView,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\nimport BlockListAppender from '../block-list-appender';\nimport BlockListItem from './block-list-item.native';\n\nconst BlockListContext = createContext();\n\nconst stylesMemo = {};\nconst getStyles = (\n\tisRootList,\n\tisStackedHorizontally,\n\thorizontalAlignment\n) => {\n\tif ( isRootList ) {\n\t\treturn;\n\t}\n\tconst styleName = `${ isStackedHorizontally }-${ horizontalAlignment }`;\n\tif ( stylesMemo[ styleName ] ) {\n\t\treturn stylesMemo[ styleName ];\n\t}\n\tconst computedStyles = [\n\t\tisStackedHorizontally && styles.horizontal,\n\t\thorizontalAlignment && styles[ `is-aligned-${ horizontalAlignment }` ],\n\t];\n\tstylesMemo[ styleName ] = computedStyles;\n\treturn computedStyles;\n};\n\nexport class BlockList extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.renderItem = this.renderItem.bind( this );\n\t\tthis.renderBlockListFooter = this.renderBlockListFooter.bind( this );\n\t\tthis.onCaretVerticalPositionChange = this.onCaretVerticalPositionChange.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.scrollViewInnerRef = this.scrollViewInnerRef.bind( this );\n\t\tthis.addBlockToEndOfPost = this.addBlockToEndOfPost.bind( this );\n\t\tthis.shouldFlatListPreventAutomaticScroll = this.shouldFlatListPreventAutomaticScroll.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.shouldShowInnerBlockAppender = this.shouldShowInnerBlockAppender.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.renderEmptyList = this.renderEmptyList.bind( this );\n\t}\n\n\taddBlockToEndOfPost( newBlock ) {\n\t\tthis.props.insertBlock( newBlock, this.props.blockCount );\n\t}\n\n\tonCaretVerticalPositionChange( targetId, caretY, previousCaretY ) {\n\t\tKeyboardAwareFlatList.handleCaretVerticalPositionChange(\n\t\t\tthis.scrollViewRef,\n\t\t\ttargetId,\n\t\t\tcaretY,\n\t\t\tpreviousCaretY\n\t\t);\n\t}\n\n\tscrollViewInnerRef( ref ) {\n\t\tthis.scrollViewRef = ref;\n\t}\n\n\tshouldFlatListPreventAutomaticScroll() {\n\t\treturn this.props.isBlockInsertionPointVisible;\n\t}\n\n\tshouldShowInnerBlockAppender() {\n\t\tconst { blockClientIds, renderAppender } = this.props;\n\t\treturn renderAppender && blockClientIds.length > 0;\n\t}\n\n\trenderEmptyList() {\n\t\treturn (\n\t\t\t<EmptyListComponentCompose\n\t\t\t\trootClientId={ this.props.rootClientId }\n\t\t\t\trenderAppender={ this.props.renderAppender }\n\t\t\t/>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { isRootList } = this.props;\n\t\t// Use of Context to propagate the main scroll ref to its children e.g InnerBlocks\n\t\treturn isRootList ? (\n\t\t\t<BlockListContext.Provider value={ this.scrollViewRef }>\n\t\t\t\t{ this.renderList() }\n\t\t\t</BlockListContext.Provider>\n\t\t) : (\n\t\t\t<BlockListContext.Consumer>\n\t\t\t\t{ ( ref ) =>\n\t\t\t\t\tthis.renderList( {\n\t\t\t\t\t\tparentScrollRef: ref,\n\t\t\t\t\t} )\n\t\t\t\t}\n\t\t\t</BlockListContext.Consumer>\n\t\t);\n\t}\n\n\trenderList( extraProps = {} ) {\n\t\tconst {\n\t\t\tclearSelectedBlock,\n\t\t\tblockClientIds,\n\t\t\ttitle,\n\t\t\theader,\n\t\t\tisReadOnly,\n\t\t\tisRootList,\n\t\t\thorizontal,\n\t\t\tmarginVertical = styles.defaultBlock.marginTop,\n\t\t\tmarginHorizontal = styles.defaultBlock.marginLeft,\n\t\t\tisFloatingToolbarVisible,\n\t\t\tisStackedHorizontally,\n\t\t\thorizontalAlignment,\n\t\t\tparentWidth,\n\t\t} = this.props;\n\t\tconst { parentScrollRef } = extraProps;\n\n\t\tconst {\n\t\t\tblockToolbar,\n\t\t\tblockBorder,\n\t\t\theaderToolbar,\n\t\t\tfloatingToolbar,\n\t\t} = styles;\n\n\t\tconst containerStyle = {\n\t\t\tflex: isRootList ? 1 : 0,\n\t\t\t// We set negative margin in the parent to remove the edge spacing between parent block and child block in ineer blocks\n\t\t\tmarginVertical: isRootList ? 0 : -marginVertical,\n\t\t\tmarginHorizontal: isRootList ? 0 : -marginHorizontal,\n\t\t};\n\t\treturn (\n\t\t\t<View\n\t\t\t\tstyle={ containerStyle }\n\t\t\t\tonAccessibilityEscape={ clearSelectedBlock }\n\t\t\t>\n\t\t\t\t<KeyboardAwareFlatList\n\t\t\t\t\t{ ...( Platform.OS === 'android'\n\t\t\t\t\t\t? { removeClippedSubviews: false }\n\t\t\t\t\t\t: {} ) } // Disable clipping on Android to fix focus losing. See https://github.com/wordpress-mobile/gutenberg-mobile/pull/741#issuecomment-472746541\n\t\t\t\t\taccessibilityLabel=\"block-list\"\n\t\t\t\t\tautoScroll={ this.props.autoScroll }\n\t\t\t\t\tinnerRef={ ( ref ) => {\n\t\t\t\t\t\tthis.scrollViewInnerRef( parentScrollRef || ref );\n\t\t\t\t\t} }\n\t\t\t\t\textraScrollHeight={\n\t\t\t\t\t\tblockToolbar.height + blockBorder.width\n\t\t\t\t\t}\n\t\t\t\t\tinputAccessoryViewHeight={\n\t\t\t\t\t\theaderToolbar.height +\n\t\t\t\t\t\t( isFloatingToolbarVisible\n\t\t\t\t\t\t\t? floatingToolbar.height\n\t\t\t\t\t\t\t: 0 )\n\t\t\t\t\t}\n\t\t\t\t\tkeyboardShouldPersistTaps=\"always\"\n\t\t\t\t\tscrollViewStyle={ [\n\t\t\t\t\t\t{ flex: isRootList ? 1 : 0 },\n\t\t\t\t\t\t! isRootList && styles.overflowVisible,\n\t\t\t\t\t] }\n\t\t\t\t\thorizontal={ horizontal }\n\t\t\t\t\textraData={ parentWidth }\n\t\t\t\t\tscrollEnabled={ isRootList }\n\t\t\t\t\tcontentContainerStyle={\n\t\t\t\t\t\thorizontal && styles.horizontalContentContainer\n\t\t\t\t\t}\n\t\t\t\t\tstyle={ getStyles(\n\t\t\t\t\t\tisRootList,\n\t\t\t\t\t\tisStackedHorizontally,\n\t\t\t\t\t\thorizontalAlignment\n\t\t\t\t\t) }\n\t\t\t\t\tdata={ blockClientIds }\n\t\t\t\t\tkeyExtractor={ identity }\n\t\t\t\t\trenderItem={ this.renderItem }\n\t\t\t\t\tshouldPreventAutomaticScroll={\n\t\t\t\t\t\tthis.shouldFlatListPreventAutomaticScroll\n\t\t\t\t\t}\n\t\t\t\t\ttitle={ title }\n\t\t\t\t\tListHeaderComponent={ header }\n\t\t\t\t\tListEmptyComponent={ ! isReadOnly && this.renderEmptyList }\n\t\t\t\t\tListFooterComponent={ this.renderBlockListFooter }\n\t\t\t\t/>\n\n\t\t\t\t{ this.shouldShowInnerBlockAppender() && (\n\t\t\t\t\t<View\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\tmarginHorizontal:\n\t\t\t\t\t\t\t\tmarginHorizontal -\n\t\t\t\t\t\t\t\tstyles.innerAppender.marginLeft,\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<BlockListAppender\n\t\t\t\t\t\t\trootClientId={ this.props.rootClientId }\n\t\t\t\t\t\t\trenderAppender={ this.props.renderAppender }\n\t\t\t\t\t\t\tshowSeparator\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t) }\n\t\t\t</View>\n\t\t);\n\t}\n\n\trenderItem( { item: clientId } ) {\n\t\tconst {\n\t\t\tcontentResizeMode,\n\t\t\tcontentStyle,\n\t\t\tonAddBlock,\n\t\t\tonDeleteBlock,\n\t\t\trootClientId,\n\t\t\tisStackedHorizontally,\n\t\t\tparentWidth,\n\t\t\tmarginVertical = styles.defaultBlock.marginTop,\n\t\t\tmarginHorizontal = styles.defaultBlock.marginLeft,\n\t\t} = this.props;\n\t\treturn (\n\t\t\t<BlockListItem\n\t\t\t\tisStackedHorizontally={ isStackedHorizontally }\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tclientId={ clientId }\n\t\t\t\tparentWidth={ parentWidth }\n\t\t\t\tcontentResizeMode={ contentResizeMode }\n\t\t\t\tcontentStyle={ contentStyle }\n\t\t\t\tonAddBlock={ onAddBlock }\n\t\t\t\tmarginVertical={ marginVertical }\n\t\t\t\tmarginHorizontal={ marginHorizontal }\n\t\t\t\tonDeleteBlock={ onDeleteBlock }\n\t\t\t\tshouldShowInnerBlockAppender={\n\t\t\t\t\tthis.shouldShowInnerBlockAppender\n\t\t\t\t}\n\t\t\t\tonCaretVerticalPositionChange={\n\t\t\t\t\tthis.onCaretVerticalPositionChange\n\t\t\t\t}\n\t\t\t/>\n\t\t);\n\t}\n\n\trenderBlockListFooter() {\n\t\tconst paragraphBlock = createBlock( 'core/paragraph' );\n\t\tconst {\n\t\t\tisReadOnly,\n\t\t\twithFooter = true,\n\t\t\trenderFooterAppender,\n\t\t} = this.props;\n\n\t\tif ( ! isReadOnly && withFooter ) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\t\taccessibilityLabel={ __( 'Add paragraph block' ) }\n\t\t\t\t\t\tonPress={ () => {\n\t\t\t\t\t\t\tthis.addBlockToEndOfPost( paragraphBlock );\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<View style={ styles.blockListFooter } />\n\t\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t\t</>\n\t\t\t);\n\t\t} else if ( renderFooterAppender ) {\n\t\t\treturn renderFooterAppender();\n\t\t}\n\t\treturn null;\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, { rootClientId, __experimentalMoverDirection } ) => {\n\t\tconst {\n\t\t\tgetBlockCount,\n\t\t\tgetBlockOrder,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tisBlockInsertionPointVisible,\n\t\t\tgetSettings,\n\t\t\tgetBlockHierarchyRootClientId,\n\t\t} = select( 'core/block-editor' );\n\n\t\tconst isStackedHorizontally =\n\t\t\t__experimentalMoverDirection === 'horizontal';\n\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst blockClientIds = getBlockOrder( rootClientId );\n\n\t\tconst isReadOnly = getSettings().readOnly;\n\n\t\tconst rootBlockId = getBlockHierarchyRootClientId(\n\t\t\tselectedBlockClientId\n\t\t);\n\t\tconst hasRootInnerBlocks = !! getBlockCount( rootBlockId );\n\n\t\tconst isFloatingToolbarVisible =\n\t\t\t!! selectedBlockClientId && hasRootInnerBlocks;\n\n\t\treturn {\n\t\t\tblockClientIds,\n\t\t\tblockCount: getBlockCount( rootClientId ),\n\t\t\tisBlockInsertionPointVisible: isBlockInsertionPointVisible(),\n\t\t\tisReadOnly,\n\t\t\tisRootList: rootClientId === undefined,\n\t\t\tisFloatingToolbarVisible,\n\t\t\tisStackedHorizontally,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { insertBlock, replaceBlock, clearSelectedBlock } = dispatch(\n\t\t\t'core/block-editor'\n\t\t);\n\n\t\treturn {\n\t\t\tclearSelectedBlock,\n\t\t\tinsertBlock,\n\t\t\treplaceBlock,\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( BlockList );\n\nclass EmptyListComponent extends Component {\n\trender() {\n\t\tconst {\n\t\t\tshouldShowInsertionPoint,\n\t\t\trootClientId,\n\t\t\trenderAppender,\n\t\t} = this.props;\n\t\treturn (\n\t\t\t<View style={ styles.defaultAppender }>\n\t\t\t\t<ReadableContentView>\n\t\t\t\t\t<BlockListAppender\n\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\trenderAppender={ renderAppender }\n\t\t\t\t\t\tshowSeparator={ shouldShowInsertionPoint }\n\t\t\t\t\t/>\n\t\t\t\t</ReadableContentView>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nconst EmptyListComponentCompose = compose( [\n\twithSelect( ( select, { rootClientId, __experimentalMoverDirection } ) => {\n\t\tconst {\n\t\t\tgetBlockOrder,\n\t\t\tgetBlockInsertionPoint,\n\t\t\tisBlockInsertionPointVisible,\n\t\t} = select( 'core/block-editor' );\n\n\t\tconst isStackedHorizontally =\n\t\t\t__experimentalMoverDirection === 'horizontal';\n\n\t\tconst blockClientIds = getBlockOrder( rootClientId );\n\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\tconst blockInsertionPointIsVisible = isBlockInsertionPointVisible();\n\t\tconst shouldShowInsertionPoint =\n\t\t\t! isStackedHorizontally &&\n\t\t\tblockInsertionPointIsVisible &&\n\t\t\tinsertionPoint.rootClientId === rootClientId &&\n\t\t\t// if list is empty, show the insertion point (via the default appender)\n\t\t\t( blockClientIds.length === 0 ||\n\t\t\t\t// or if the insertion point is right before the denoted block\n\t\t\t\t! blockClientIds[ insertionPoint.index ] );\n\n\t\treturn {\n\t\t\tshouldShowInsertionPoint,\n\t\t};\n\t} ),\n] )( EmptyListComponent );\n"]}