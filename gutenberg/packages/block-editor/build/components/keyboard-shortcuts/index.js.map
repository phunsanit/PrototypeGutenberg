{"version":3,"sources":["@wordpress/block-editor/src/components/keyboard-shortcuts/index.js"],"names":["KeyboardShortcuts","select","getSelectedBlockClientIds","getBlockOrder","clientIds","rootBlocksClientIds","duplicateBlocks","removeBlocks","insertAfterBlock","insertBeforeBlock","multiSelect","clearSelectedBlock","event","preventDefault","bindGlobal","isDisabled","length","window","getSelection","removeAllRanges","KeyboardShortcutsRegister","registerShortcut","name","category","description","keyCombination","modifier","character","aliases","Register"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { first, last } from 'lodash';\n/**\n * WordPress dependencies\n */\nimport { useEffect, useCallback } from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useShortcut } from '@wordpress/keyboard-shortcuts';\nimport { __ } from '@wordpress/i18n';\n\nfunction KeyboardShortcuts() {\n\t// Shortcuts Logic\n\tconst { clientIds, rootBlocksClientIds } = useSelect( ( select ) => {\n\t\tconst { getSelectedBlockClientIds, getBlockOrder } = select(\n\t\t\t'core/block-editor'\n\t\t);\n\t\treturn {\n\t\t\tclientIds: getSelectedBlockClientIds(),\n\t\t\trootBlocksClientIds: getBlockOrder(),\n\t\t};\n\t}, [] );\n\n\tconst {\n\t\tduplicateBlocks,\n\t\tremoveBlocks,\n\t\tinsertAfterBlock,\n\t\tinsertBeforeBlock,\n\t\tmultiSelect,\n\t\tclearSelectedBlock,\n\t} = useDispatch( 'core/block-editor' );\n\n\t// Prevents bookmark all Tabs shortcut in Chrome when devtools are closed.\n\t// Prevents reposition Chrome devtools pane shortcut when devtools are open.\n\tuseShortcut(\n\t\t'core/block-editor/duplicate',\n\t\tuseCallback(\n\t\t\t( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tduplicateBlocks( clientIds );\n\t\t\t},\n\t\t\t[ clientIds, duplicateBlocks ]\n\t\t),\n\t\t{ bindGlobal: true, isDisabled: clientIds.length === 0 }\n\t);\n\n\t// Does not clash with any known browser/native shortcuts, but preventDefault\n\t// is used to prevent any obscure unknown shortcuts from triggering.\n\tuseShortcut(\n\t\t'core/block-editor/remove',\n\t\tuseCallback(\n\t\t\t( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tremoveBlocks( clientIds );\n\t\t\t},\n\t\t\t[ clientIds, removeBlocks ]\n\t\t),\n\t\t{ bindGlobal: true, isDisabled: clientIds.length === 0 }\n\t);\n\n\t// Does not clash with any known browser/native shortcuts, but preventDefault\n\t// is used to prevent any obscure unknown shortcuts from triggering.\n\tuseShortcut(\n\t\t'core/block-editor/insert-after',\n\t\tuseCallback(\n\t\t\t( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tinsertAfterBlock( last( clientIds ) );\n\t\t\t},\n\t\t\t[ clientIds, insertAfterBlock ]\n\t\t),\n\t\t{ bindGlobal: true, isDisabled: clientIds.length === 0 }\n\t);\n\n\t// Prevent 'view recently closed tabs' in Opera using preventDefault.\n\tuseShortcut(\n\t\t'core/block-editor/insert-before',\n\t\tuseCallback(\n\t\t\t( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tinsertBeforeBlock( first( clientIds ) );\n\t\t\t},\n\t\t\t[ clientIds, insertBeforeBlock ]\n\t\t),\n\t\t{ bindGlobal: true, isDisabled: clientIds.length === 0 }\n\t);\n\n\tuseShortcut(\n\t\t'core/block-editor/delete-multi-selection',\n\t\tuseCallback(\n\t\t\t( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tremoveBlocks( clientIds );\n\t\t\t},\n\t\t\t[ clientIds, removeBlocks ]\n\t\t),\n\t\t{ isDisabled: clientIds.length < 1 }\n\t);\n\n\tuseShortcut(\n\t\t'core/block-editor/select-all',\n\t\tuseCallback(\n\t\t\t( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tmultiSelect(\n\t\t\t\t\tfirst( rootBlocksClientIds ),\n\t\t\t\t\tlast( rootBlocksClientIds )\n\t\t\t\t);\n\t\t\t},\n\t\t\t[ rootBlocksClientIds, multiSelect ]\n\t\t)\n\t);\n\n\tuseShortcut(\n\t\t'core/block-editor/unselect',\n\t\tuseCallback(\n\t\t\t( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tclearSelectedBlock();\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t},\n\t\t\t[ clientIds, clearSelectedBlock ]\n\t\t),\n\t\t{ isDisabled: clientIds.length < 2 }\n\t);\n\n\treturn null;\n}\n\nfunction KeyboardShortcutsRegister() {\n\t// Registering the shortcuts\n\tconst { registerShortcut } = useDispatch( 'core/keyboard-shortcuts' );\n\tuseEffect( () => {\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/duplicate',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Duplicate the selected block(s).' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primaryShift',\n\t\t\t\tcharacter: 'd',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/remove',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Remove the selected block(s).' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'access',\n\t\t\t\tcharacter: 'z',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/insert-before',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __(\n\t\t\t\t'Insert a new block before the selected block(s).'\n\t\t\t),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primaryAlt',\n\t\t\t\tcharacter: 't',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/insert-after',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __(\n\t\t\t\t'Insert a new block after the selected block(s).'\n\t\t\t),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primaryAlt',\n\t\t\t\tcharacter: 'y',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/delete-multi-selection',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Remove multiple selected blocks.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tcharacter: 'del',\n\t\t\t},\n\t\t\taliases: [\n\t\t\t\t{\n\t\t\t\t\tcharacter: 'backspace',\n\t\t\t\t},\n\t\t\t],\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/select-all',\n\t\t\tcategory: 'selection',\n\t\t\tdescription: __(\n\t\t\t\t'Select all text when typing. Press again to select all blocks.'\n\t\t\t),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primary',\n\t\t\t\tcharacter: 'a',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/unselect',\n\t\t\tcategory: 'selection',\n\t\t\tdescription: __( 'Clear selection.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tcharacter: 'escape',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/focus-toolbar',\n\t\t\tcategory: 'global',\n\t\t\tdescription: __( 'Navigate to the nearest toolbar.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'alt',\n\t\t\t\tcharacter: 'F10',\n\t\t\t},\n\t\t} );\n\t}, [ registerShortcut ] );\n\n\treturn null;\n}\n\nKeyboardShortcuts.Register = KeyboardShortcutsRegister;\n\nexport default KeyboardShortcuts;\n"]}