{"version":3,"sources":["@wordpress/block-editor/src/components/block-mover/index.js"],"names":["BlockMover","arguments","state","isFocused","onFocus","bind","onBlur","setState","props","isFirst","isLast","clientIds","isLocked","isHidden","rootClientId","hideDragHandle","orientation","__experimentalOrientation","isDraggable","onDraggableStart","onDraggableEnd","itemProps","Component","select","getBlock","getBlockIndex","getTemplateLock","getBlockOrder","getBlockRootClientId","normalizedClientIds","firstClientId","block","firstIndex","lastIndex","blockOrder","length","blockType","name"],"mappings":";;;;;;;;;AAcA;;;;;;;;;;;;;;;;AAXA;;AACA;;AAKA;;AAIA;;AAEA;;AAKA;;AACA;;;;;;IAEaA,U;;;;;AACZ,wBAAc;AAAA;;AAAA;AACb,+BAAUC,SAAV;AACA,UAAKC,KAAL,GAAa;AACZC,MAAAA,SAAS,EAAE;AADC,KAAb;AAGA,UAAKC,OAAL,GAAe,MAAKA,OAAL,CAAaC,IAAb,6CAAf;AACA,UAAKC,MAAL,GAAc,MAAKA,MAAL,CAAYD,IAAZ,6CAAd;AANa;AAOb;;;;8BAES;AACT,WAAKE,QAAL,CAAe;AACdJ,QAAAA,SAAS,EAAE;AADG,OAAf;AAGA;;;6BAEQ;AACR,WAAKI,QAAL,CAAe;AACdJ,QAAAA,SAAS,EAAE;AADG,OAAf;AAGA;;;6BAEQ;AAAA;;AAAA,wBAUJ,KAAKK,KAVD;AAAA,UAEPC,OAFO,eAEPA,OAFO;AAAA,UAGPC,MAHO,eAGPA,MAHO;AAAA,UAIPC,SAJO,eAIPA,SAJO;AAAA,UAKPC,QALO,eAKPA,QALO;AAAA,UAMPC,QANO,eAMPA,QANO;AAAA,UAOPC,YAPO,eAOPA,YAPO;AAAA,UAQPC,cARO,eAQPA,cARO;AAAA,UASoBC,WATpB,eASPC,yBATO;AAAA,UAWAd,SAXA,GAWc,KAAKD,KAXnB,CAWAC,SAXA;;AAYR,UAAKS,QAAQ,IAAMH,OAAO,IAAIC,MAAX,IAAqB,CAAEI,YAA1C,EAA2D;AAC1D,eAAO,IAAP;AACA,OAdO,CAgBR;AACA;AACA;AACA;;;AACA,aACC,4BAAC,uBAAD;AAAgB,QAAA,SAAS,EAAGH;AAA5B,SACG;AAAA,YAAIO,WAAJ,QAAIA,WAAJ;AAAA,YAAiBC,gBAAjB,QAAiBA,gBAAjB;AAAA,YAAmCC,cAAnC,QAAmCA,cAAnC;AAAA,eACD;AACC,UAAA,SAAS,EAAG,yBAAY,0BAAZ,EAAwC;AACnD,0BAAcjB,SAAS,IAAI,CAAEU,QADsB;AAEnD,6BAAiBG,WAAW,KAAK;AAFkB,WAAxC,CADb;AAKC,UAAA,SAAS,EAAGE,WAAW,IAAI,CAAEH,cAL9B;AAMC,UAAA,WAAW,EAAGI,gBANf;AAOC,UAAA,SAAS,EAAGC;AAPb,WASC,4BAAC,wBAAD,QACC,4BAAC,qCAAD;AACC,UAAA,OAAO,EAAG,MAAI,CAAChB,OADhB;AAEC,UAAA,MAAM,EAAG,MAAI,CAACE;AAFf,WAIG,UAAEe,SAAF;AAAA,iBACD,4BAAC,0BAAD;AACC,YAAA,SAAS,EAAGV;AADb,aAEMU,SAFN,EADC;AAAA,SAJH,CADD,EAYC,4BAAC,qCAAD;AACC,UAAA,OAAO,EAAG,MAAI,CAACjB,OADhB;AAEC,UAAA,MAAM,EAAG,MAAI,CAACE;AAFf,WAIG,UAAEe,SAAF;AAAA,iBACD,4BAAC,4BAAD;AACC,YAAA,SAAS,EAAGV;AADb,aAEMU,SAFN,EADC;AAAA,SAJH,CAZD,CATD,CADC;AAAA,OADH,CADD;AAwCA;;;EAlF8BC,kB;;;;eAqFjB,sBAAY,UAAEC,MAAF,SAA6B;AAAA,MAAjBZ,SAAiB,SAAjBA,SAAiB;;AAAA,gBAOnDY,MAAM,CAAE,mBAAF,CAP6C;AAAA,MAEtDC,QAFsD,WAEtDA,QAFsD;AAAA,MAGtDC,aAHsD,WAGtDA,aAHsD;AAAA,MAItDC,eAJsD,WAItDA,eAJsD;AAAA,MAKtDC,aALsD,WAKtDA,aALsD;AAAA,MAMtDC,oBANsD,WAMtDA,oBANsD;;AAQvD,MAAMC,mBAAmB,GAAG,uBAAWlB,SAAX,CAA5B;AACA,MAAMmB,aAAa,GAAG,mBAAOD,mBAAP,CAAtB;AACA,MAAME,KAAK,GAAGP,QAAQ,CAAEM,aAAF,CAAtB;AACA,MAAMhB,YAAY,GAAGc,oBAAoB,CAAE,mBAAOC,mBAAP,CAAF,CAAzC;AACA,MAAMG,UAAU,GAAGP,aAAa,CAAEK,aAAF,EAAiBhB,YAAjB,CAAhC;AACA,MAAMmB,SAAS,GAAGR,aAAa,CAC9B,kBAAMI,mBAAN,CAD8B,EAE9Bf,YAF8B,CAA/B;AAIA,MAAMoB,UAAU,GAAGP,aAAa,CAAEb,YAAF,CAAhC;AACA,MAAML,OAAO,GAAGuB,UAAU,KAAK,CAA/B;AACA,MAAMtB,MAAM,GAAGuB,SAAS,KAAKC,UAAU,CAACC,MAAX,GAAoB,CAAjD;AAEA,SAAO;AACNC,IAAAA,SAAS,EAAEL,KAAK,GAAG,0BAAcA,KAAK,CAACM,IAApB,CAAH,GAAgC,IAD1C;AAENzB,IAAAA,QAAQ,EAAEc,eAAe,CAAEZ,YAAF,CAAf,KAAoC,KAFxC;AAGNA,IAAAA,YAAY,EAAZA,YAHM;AAINkB,IAAAA,UAAU,EAAVA,UAJM;AAKNvB,IAAAA,OAAO,EAAPA,OALM;AAMNC,IAAAA,MAAM,EAANA;AANM,GAAP;AAQA,CA7Bc,EA6BVV,UA7BU,C","sourcesContent":["/**\n * External dependencies\n */\nimport { first, last, castArray } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tToolbarGroup,\n\t__experimentalToolbarItem as ToolbarItem,\n} from '@wordpress/components';\nimport { getBlockType } from '@wordpress/blocks';\nimport { Component } from '@wordpress/element';\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport BlockDraggable from '../block-draggable';\nimport { BlockMoverUpButton, BlockMoverDownButton } from './button';\n\nexport class BlockMover extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\tisFocused: false,\n\t\t};\n\t\tthis.onFocus = this.onFocus.bind( this );\n\t\tthis.onBlur = this.onBlur.bind( this );\n\t}\n\n\tonFocus() {\n\t\tthis.setState( {\n\t\t\tisFocused: true,\n\t\t} );\n\t}\n\n\tonBlur() {\n\t\tthis.setState( {\n\t\t\tisFocused: false,\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tisFirst,\n\t\t\tisLast,\n\t\t\tclientIds,\n\t\t\tisLocked,\n\t\t\tisHidden,\n\t\t\trootClientId,\n\t\t\thideDragHandle,\n\t\t\t__experimentalOrientation: orientation,\n\t\t} = this.props;\n\t\tconst { isFocused } = this.state;\n\t\tif ( isLocked || ( isFirst && isLast && ! rootClientId ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// We emulate a disabled state because forcefully applying the `disabled`\n\t\t// attribute on the buttons while it has focus causes the screen to change\n\t\t// to an unfocused state (body as active element) without firing blur on,\n\t\t// the rendering parent, leaving it unable to react to focus out.\n\t\treturn (\n\t\t\t<BlockDraggable clientIds={ clientIds }>\n\t\t\t\t{ ( { isDraggable, onDraggableStart, onDraggableEnd } ) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={ classnames( 'block-editor-block-mover', {\n\t\t\t\t\t\t\t'is-visible': isFocused || ! isHidden,\n\t\t\t\t\t\t\t'is-horizontal': orientation === 'horizontal',\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t\tdraggable={ isDraggable && ! hideDragHandle }\n\t\t\t\t\t\tonDragStart={ onDraggableStart }\n\t\t\t\t\t\tonDragEnd={ onDraggableEnd }\n\t\t\t\t\t>\n\t\t\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\t\tonFocus={ this.onFocus }\n\t\t\t\t\t\t\t\tonBlur={ this.onBlur }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ ( itemProps ) => (\n\t\t\t\t\t\t\t\t\t<BlockMoverUpButton\n\t\t\t\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t\t\t\t{ ...itemProps }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</ToolbarItem>\n\t\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\t\tonFocus={ this.onFocus }\n\t\t\t\t\t\t\t\tonBlur={ this.onBlur }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ ( itemProps ) => (\n\t\t\t\t\t\t\t\t\t<BlockMoverDownButton\n\t\t\t\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t\t\t\t{ ...itemProps }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</ToolbarItem>\n\t\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</BlockDraggable>\n\t\t);\n\t}\n}\n\nexport default withSelect( ( select, { clientIds } ) => {\n\tconst {\n\t\tgetBlock,\n\t\tgetBlockIndex,\n\t\tgetTemplateLock,\n\t\tgetBlockOrder,\n\t\tgetBlockRootClientId,\n\t} = select( 'core/block-editor' );\n\tconst normalizedClientIds = castArray( clientIds );\n\tconst firstClientId = first( normalizedClientIds );\n\tconst block = getBlock( firstClientId );\n\tconst rootClientId = getBlockRootClientId( first( normalizedClientIds ) );\n\tconst firstIndex = getBlockIndex( firstClientId, rootClientId );\n\tconst lastIndex = getBlockIndex(\n\t\tlast( normalizedClientIds ),\n\t\trootClientId\n\t);\n\tconst blockOrder = getBlockOrder( rootClientId );\n\tconst isFirst = firstIndex === 0;\n\tconst isLast = lastIndex === blockOrder.length - 1;\n\n\treturn {\n\t\tblockType: block ? getBlockType( block.name ) : null,\n\t\tisLocked: getTemplateLock( rootClientId ) === 'all',\n\t\trootClientId,\n\t\tfirstIndex,\n\t\tisFirst,\n\t\tisLast,\n\t};\n} )( BlockMover );\n"]}