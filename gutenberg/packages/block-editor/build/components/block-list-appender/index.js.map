{"version":3,"sources":["@wordpress/block-editor/src/components/block-list-appender/index.js"],"names":["stopPropagation","event","BlockListAppender","blockClientIds","rootClientId","canInsertDefaultBlock","isLocked","CustomAppender","renderAppender","className","tagName","TagName","appender","select","getBlockOrder","canInsertBlockType","getTemplateLock"],"mappings":";;;;;;;;;;;AAGA;;AACA;;AAKA;;AACA;;AAKA;;AACA;;AAhBA;;;;AAMA;;;;AAMA;;;AAMA,SAASA,eAAT,CAA0BC,KAA1B,EAAkC;AACjCA,EAAAA,KAAK,CAACD,eAAN;AACA;;AAED,SAASE,iBAAT,OAQI;AAAA,MAPHC,cAOG,QAPHA,cAOG;AAAA,MANHC,YAMG,QANHA,YAMG;AAAA,MALHC,qBAKG,QALHA,qBAKG;AAAA,MAJHC,QAIG,QAJHA,QAIG;AAAA,MAHaC,cAGb,QAHHC,cAGG;AAAA,MAFHC,SAEG,QAFHA,SAEG;AAAA,0BADHC,OACG;AAAA,MADMC,OACN,6BADgB,KAChB;;AACH,MAAKL,QAAQ,IAAIC,cAAc,KAAK,KAApC,EAA4C;AAC3C,WAAO,IAAP;AACA;;AAED,MAAIK,QAAJ;;AACA,MAAKL,cAAL,EAAsB;AACrB;AACAK,IAAAA,QAAQ,GAAG,4BAAC,cAAD,OAAX;AACA,GAHD,MAGO,IAAKP,qBAAL,EAA6B;AACnC;AACA;AACAO,IAAAA,QAAQ,GACP,4BAAC,6BAAD;AACC,MAAA,YAAY,EAAGR,YADhB;AAEC,MAAA,iBAAiB,EAAG,kBAAMD,cAAN;AAFrB,MADD;AAMA,GATM,MASA;AACN;AACA;AACAS,IAAAA,QAAQ,GACP,4BAAC,4BAAD;AACC,MAAA,YAAY,EAAGR,YADhB;AAEC,MAAA,SAAS,EAAC;AAFX,MADD;AAMA;;AAED,SACC,4BAAC,OAAD,CACC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARD;AASC,IAAA,QAAQ,EAAG,CAAC,CATb,CAUC;AACA;AAXD;AAYC,IAAA,OAAO,EAAGJ,eAZX;AAaC,IAAA,SAAS,EAAG,yBAAY,qBAAZ,EAAmCS,SAAnC;AAbb,KAeGG,QAfH,CADD;AAmBA;;eAEc,sBAAY,UAAEC,MAAF,SAAgC;AAAA,MAApBT,YAAoB,SAApBA,YAAoB;;AAAA,gBACKS,MAAM,CACpE,mBADoE,CADX;AAAA,MAClDC,aADkD,WAClDA,aADkD;AAAA,MACnCC,kBADmC,WACnCA,kBADmC;AAAA,MACfC,eADe,WACfA,eADe;;AAK1D,SAAO;AACNV,IAAAA,QAAQ,EAAE,CAAC,CAAEU,eAAe,CAAEZ,YAAF,CADtB;AAEND,IAAAA,cAAc,EAAEW,aAAa,CAAEV,YAAF,CAFvB;AAGNC,IAAAA,qBAAqB,EAAEU,kBAAkB,CACxC,kCADwC,EAExCX,YAFwC;AAHnC,GAAP;AAQA,CAbc,EAaVF,iBAbU,C","sourcesContent":["/**\n * External dependencies\n */\nimport { last } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\nimport { getDefaultBlockName } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport DefaultBlockAppender from '../default-block-appender';\nimport ButtonBlockAppender from '../button-block-appender';\n\nfunction stopPropagation( event ) {\n\tevent.stopPropagation();\n}\n\nfunction BlockListAppender( {\n\tblockClientIds,\n\trootClientId,\n\tcanInsertDefaultBlock,\n\tisLocked,\n\trenderAppender: CustomAppender,\n\tclassName,\n\ttagName: TagName = 'div',\n} ) {\n\tif ( isLocked || CustomAppender === false ) {\n\t\treturn null;\n\t}\n\n\tlet appender;\n\tif ( CustomAppender ) {\n\t\t// Prefer custom render prop if provided.\n\t\tappender = <CustomAppender />;\n\t} else if ( canInsertDefaultBlock ) {\n\t\t// Render the default block appender when renderAppender has not been\n\t\t// provided and the context supports use of the default appender.\n\t\tappender = (\n\t\t\t<DefaultBlockAppender\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tlastBlockClientId={ last( blockClientIds ) }\n\t\t\t/>\n\t\t);\n\t} else {\n\t\t// Fallback in the case no renderAppender has been provided and the\n\t\t// default block can't be inserted.\n\t\tappender = (\n\t\t\t<ButtonBlockAppender\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tclassName=\"block-list-appender__toggle\"\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<TagName\n\t\t\t// A `tabIndex` is used on the wrapping `div` element in order to\n\t\t\t// force a focus event to occur when an appender `button` element\n\t\t\t// is clicked. In some browsers (Firefox, Safari), button clicks do\n\t\t\t// not emit a focus event, which could cause this event to propagate\n\t\t\t// unexpectedly. The `tabIndex` ensures that the interaction is\n\t\t\t// captured as a focus, without also adding an extra tab stop.\n\t\t\t//\n\t\t\t// See: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button#Clicking_and_focus\n\t\t\ttabIndex={ -1 }\n\t\t\t// Prevent the block from being selected when the appender is\n\t\t\t// clicked.\n\t\t\tonFocus={ stopPropagation }\n\t\t\tclassName={ classnames( 'block-list-appender', className ) }\n\t\t>\n\t\t\t{ appender }\n\t\t</TagName>\n\t);\n}\n\nexport default withSelect( ( select, { rootClientId } ) => {\n\tconst { getBlockOrder, canInsertBlockType, getTemplateLock } = select(\n\t\t'core/block-editor'\n\t);\n\n\treturn {\n\t\tisLocked: !! getTemplateLock( rootClientId ),\n\t\tblockClientIds: getBlockOrder( rootClientId ),\n\t\tcanInsertDefaultBlock: canInsertBlockType(\n\t\t\tgetDefaultBlockName(),\n\t\t\trootClientId\n\t\t),\n\t};\n} )( BlockListAppender );\n"]}