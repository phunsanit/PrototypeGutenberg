{"version":3,"sources":["@wordpress/block-editor/src/components/block-navigation/branch.js"],"names":["BlockNavigationBranch","props","blocks","selectBlock","selectedBlockClientId","showAppender","showBlockMovers","showNestedBlocks","parentBlockClientId","level","terminatedLevels","path","isTreeRoot","filteredBlocks","rowCount","length","hasAppender","appenderPosition","block","index","clientId","innerBlocks","hasNestedBlocks","position","isLastRowAtLevel","updatedTerminatedLevels","updatedPath","defaultProps"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { map, compact } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Fragment } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockNavigationBlock from './block';\nimport BlockNavigationAppender from './appender';\n\nexport default function BlockNavigationBranch( props ) {\n\tconst {\n\t\tblocks,\n\t\tselectBlock,\n\t\tselectedBlockClientId,\n\t\tshowAppender,\n\t\tshowBlockMovers,\n\t\tshowNestedBlocks,\n\t\tparentBlockClientId,\n\t\tlevel = 1,\n\t\tterminatedLevels = [],\n\t\tpath = [],\n\t} = props;\n\n\tconst isTreeRoot = ! parentBlockClientId;\n\tconst filteredBlocks = compact( blocks );\n\t// Add +1 to the rowCount to take the block appender into account.\n\tconst rowCount = showAppender\n\t\t? filteredBlocks.length + 1\n\t\t: filteredBlocks.length;\n\tconst hasAppender =\n\t\tshowAppender && filteredBlocks.length > 0 && ! isTreeRoot;\n\tconst appenderPosition = rowCount;\n\n\treturn (\n\t\t<>\n\t\t\t{ map( filteredBlocks, ( block, index ) => {\n\t\t\t\tconst { clientId, innerBlocks } = block;\n\t\t\t\tconst hasNestedBlocks =\n\t\t\t\t\tshowNestedBlocks && !! innerBlocks && !! innerBlocks.length;\n\t\t\t\tconst position = index + 1;\n\t\t\t\tconst isLastRowAtLevel = rowCount === position;\n\t\t\t\tconst updatedTerminatedLevels = isLastRowAtLevel\n\t\t\t\t\t? [ ...terminatedLevels, level ]\n\t\t\t\t\t: terminatedLevels;\n\t\t\t\tconst updatedPath = [ ...path, position ];\n\n\t\t\t\treturn (\n\t\t\t\t\t<Fragment key={ clientId }>\n\t\t\t\t\t\t<BlockNavigationBlock\n\t\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\t\tonClick={ () => selectBlock( clientId ) }\n\t\t\t\t\t\t\tisSelected={ selectedBlockClientId === clientId }\n\t\t\t\t\t\t\tlevel={ level }\n\t\t\t\t\t\t\tposition={ position }\n\t\t\t\t\t\t\trowCount={ rowCount }\n\t\t\t\t\t\t\tshowBlockMovers={ showBlockMovers }\n\t\t\t\t\t\t\tterminatedLevels={ terminatedLevels }\n\t\t\t\t\t\t\tpath={ updatedPath }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ hasNestedBlocks && (\n\t\t\t\t\t\t\t<BlockNavigationBranch\n\t\t\t\t\t\t\t\tblocks={ innerBlocks }\n\t\t\t\t\t\t\t\tselectedBlockClientId={ selectedBlockClientId }\n\t\t\t\t\t\t\t\tselectBlock={ selectBlock }\n\t\t\t\t\t\t\t\tshowAppender={ showAppender }\n\t\t\t\t\t\t\t\tshowBlockMovers={ showBlockMovers }\n\t\t\t\t\t\t\t\tshowNestedBlocks={ showNestedBlocks }\n\t\t\t\t\t\t\t\tparentBlockClientId={ clientId }\n\t\t\t\t\t\t\t\tlevel={ level + 1 }\n\t\t\t\t\t\t\t\tterminatedLevels={ updatedTerminatedLevels }\n\t\t\t\t\t\t\t\tpath={ updatedPath }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Fragment>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t\t{ hasAppender && (\n\t\t\t\t<BlockNavigationAppender\n\t\t\t\t\tparentBlockClientId={ parentBlockClientId }\n\t\t\t\t\tposition={ rowCount }\n\t\t\t\t\trowCount={ appenderPosition }\n\t\t\t\t\tlevel={ level }\n\t\t\t\t\tterminatedLevels={ terminatedLevels }\n\t\t\t\t\tpath={ [ ...path, appenderPosition ] }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nBlockNavigationBranch.defaultProps = {\n\tselectBlock: () => {},\n};\n"]}