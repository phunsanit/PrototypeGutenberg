{"version":3,"sources":["@wordpress/block-editor/src/components/block-toolbar/index.js"],"names":["BlockToolbar","hideDragHandle","select","getBlockMode","getSelectedBlockClientIds","isBlockValid","getBlockRootClientId","getBlockListSettings","getSettings","selectedBlockClientIds","selectedBlockClientId","blockRootClientId","__experimentalMoverDirection","blockClientIds","blockClientId","hasFixedToolbar","rootClientId","isValid","length","mode","moverDirection","toggleBlockHighlight","nodeRef","ref","onChange","showMovers","showMoversGestures","gestures","displayHeaderToolbar","shouldShowMovers","shouldShowVisualToolbar","isMultiToolbar","animatedMoverStyles","opacity","transform","classes"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useRef } from '@wordpress/element';\nimport { useViewportMatch } from '@wordpress/compose';\n/**\n * Internal dependencies\n */\nimport BlockMover from '../block-mover';\nimport BlockParentSelector from '../block-parent-selector';\nimport BlockSwitcher from '../block-switcher';\nimport BlockControls from '../block-controls';\nimport BlockFormatControls from '../block-format-controls';\nimport BlockSettingsMenu from '../block-settings-menu';\nimport { useShowMoversGestures, useToggleBlockHighlight } from './utils';\n\nexport default function BlockToolbar( { hideDragHandle } ) {\n\tconst {\n\t\tblockClientIds,\n\t\tblockClientId,\n\t\thasFixedToolbar,\n\t\tisValid,\n\t\tmode,\n\t\tmoverDirection,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetBlockMode,\n\t\t\tgetSelectedBlockClientIds,\n\t\t\tisBlockValid,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockListSettings,\n\t\t\tgetSettings,\n\t\t} = select( 'core/block-editor' );\n\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\tconst selectedBlockClientId = selectedBlockClientIds[ 0 ];\n\t\tconst blockRootClientId = getBlockRootClientId( selectedBlockClientId );\n\n\t\tconst { __experimentalMoverDirection } =\n\t\t\tgetBlockListSettings( blockRootClientId ) || {};\n\n\t\treturn {\n\t\t\tblockClientIds: selectedBlockClientIds,\n\t\t\tblockClientId: selectedBlockClientId,\n\t\t\thasFixedToolbar: getSettings().hasFixedToolbar,\n\t\t\trootClientId: blockRootClientId,\n\t\t\tisValid:\n\t\t\t\tselectedBlockClientIds.length === 1\n\t\t\t\t\t? isBlockValid( selectedBlockClientIds[ 0 ] )\n\t\t\t\t\t: null,\n\t\t\tmode:\n\t\t\t\tselectedBlockClientIds.length === 1\n\t\t\t\t\t? getBlockMode( selectedBlockClientIds[ 0 ] )\n\t\t\t\t\t: null,\n\t\t\tmoverDirection: __experimentalMoverDirection,\n\t\t};\n\t}, [] );\n\n\tconst toggleBlockHighlight = useToggleBlockHighlight( blockClientId );\n\tconst nodeRef = useRef();\n\n\tconst { showMovers, gestures: showMoversGestures } = useShowMoversGestures(\n\t\t{\n\t\t\tref: nodeRef,\n\t\t\tonChange: toggleBlockHighlight,\n\t\t}\n\t);\n\n\tconst displayHeaderToolbar =\n\t\tuseViewportMatch( 'medium', '<' ) || hasFixedToolbar;\n\n\tconst shouldShowMovers = displayHeaderToolbar || showMovers;\n\n\tif ( blockClientIds.length === 0 ) {\n\t\treturn null;\n\t}\n\n\tconst shouldShowVisualToolbar = isValid && mode === 'visual';\n\tconst isMultiToolbar = blockClientIds.length > 1;\n\n\tconst animatedMoverStyles = {\n\t\topacity: shouldShowMovers ? 1 : 0,\n\t\ttransform: shouldShowMovers ? 'translateX(0px)' : 'translateX(100%)',\n\t};\n\n\tconst classes = classnames(\n\t\t'block-editor-block-toolbar',\n\t\tshouldShowMovers && 'is-showing-movers',\n\t\t! displayHeaderToolbar && 'has-responsive-movers'\n\t);\n\n\treturn (\n\t\t<div className={ classes }>\n\t\t\t<div\n\t\t\t\tclassName=\"block-editor-block-toolbar__mover-switcher-container\"\n\t\t\t\tref={ nodeRef }\n\t\t\t>\n\t\t\t\t{ ! isMultiToolbar && (\n\t\t\t\t\t<div className=\"block-editor-block-toolbar__block-parent-selector-wrapper\">\n\t\t\t\t\t\t<BlockParentSelector clientIds={ blockClientIds } />\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"block-editor-block-toolbar__mover-trigger-container\"\n\t\t\t\t\t{ ...showMoversGestures }\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__mover-trigger-wrapper\"\n\t\t\t\t\t\tstyle={ animatedMoverStyles }\n\t\t\t\t\t>\n\t\t\t\t\t\t<BlockMover\n\t\t\t\t\t\t\tclientIds={ blockClientIds }\n\t\t\t\t\t\t\t__experimentalOrientation={ moverDirection }\n\t\t\t\t\t\t\thideDragHandle={ hideDragHandle }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{ ( shouldShowVisualToolbar || isMultiToolbar ) && (\n\t\t\t\t\t<div\n\t\t\t\t\t\t{ ...showMoversGestures }\n\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__block-switcher-wrapper\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<BlockSwitcher clientIds={ blockClientIds } />\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</div>\n\n\t\t\t{ shouldShowVisualToolbar && ! isMultiToolbar && (\n\t\t\t\t<>\n\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\tbubblesVirtually\n\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t/>\n\t\t\t\t\t<BlockFormatControls.Slot\n\t\t\t\t\t\tbubblesVirtually\n\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t<BlockSettingsMenu clientIds={ blockClientIds } />\n\t\t</div>\n\t);\n}\n"]}