{"version":3,"sources":["@wordpress/edit-post/src/components/header/header-toolbar/index.js"],"names":["HeaderToolbar","onToggleInserter","isInserterOpen","select","hasInserterItems","getBlockRootClientId","getBlockSelectionEnd","hasFixedToolbar","isFeatureActive","isInserterEnabled","getEditorMode","getEditorSettings","richEditingEnabled","isTextModeEnabled","previewDeviceType","__experimentalGetPreviewDeviceType","isLargeViewport","displayBlockToolbar","toolbarAriaLabel","plus"],"mappings":";;;;;;;;;AAGA;;AACA;;AACA;;AACA;;AAMA;;AAKA;;AACA;;AAlBA;;;AAoBA,SAASA,aAAT,OAA+D;AAAA,MAArCC,gBAAqC,QAArCA,gBAAqC;AAAA,MAAnBC,cAAmB,QAAnBA,cAAmB;;AAAA,mBAM1D,qBAAW,UAAEC,MAAF,EAAc;AAAA,kBAKxBA,MAAM,CAAE,mBAAF,CALkB;AAAA,QAE3BC,gBAF2B,WAE3BA,gBAF2B;AAAA,QAG3BC,oBAH2B,WAG3BA,oBAH2B;AAAA,QAI3BC,oBAJ2B,WAI3BA,oBAJ2B;;AAM5B,WAAO;AACNC,MAAAA,eAAe,EAAEJ,MAAM,CAAE,gBAAF,CAAN,CAA2BK,eAA3B,CAChB,cADgB,CADX;AAIN;AACAC,MAAAA,iBAAiB,EAChBN,MAAM,CAAE,gBAAF,CAAN,CAA2BO,aAA3B,OAA+C,QAA/C,IACAP,MAAM,CAAE,aAAF,CAAN,CAAwBQ,iBAAxB,GACEC,kBAFF,IAGAR,gBAAgB,CACfC,oBAAoB,CAAEC,oBAAoB,EAAtB,CADL,CATX;AAYNO,MAAAA,iBAAiB,EAChBV,MAAM,CAAE,gBAAF,CAAN,CAA2BO,aAA3B,OAA+C,MAb1C;AAcNI,MAAAA,iBAAiB,EAAEX,MAAM,CACxB,gBADwB,CAAN,CAEjBY,kCAFiB;AAdb,KAAP;AAkBA,GAxBG,EAwBD,EAxBC,CAN0D;AAAA,MAE7DR,eAF6D,cAE7DA,eAF6D;AAAA,MAG7DE,iBAH6D,cAG7DA,iBAH6D;AAAA,MAI7DI,iBAJ6D,cAI7DA,iBAJ6D;AAAA,MAK7DC,iBAL6D,cAK7DA,iBAL6D;;AA+B9D,MAAME,eAAe,GAAG,+BAAkB,QAAlB,CAAxB;AAEA,MAAMC,mBAAmB,GACxB,CAAED,eAAF,IAAqBF,iBAAiB,KAAK,SAA3C,IAAwDP,eADzD;AAGA,MAAMW,gBAAgB,GAAGD,mBAAmB;AACzC;AACA,gBAAI,0BAAJ,CAFyC;AAGzC;AACA,gBAAI,gBAAJ,CAJH;AAMA,SACC,4BAAC,6BAAD;AACC,IAAA,SAAS,EAAC,0BADX;AAEC,kBAAaC;AAFd,KAIC,4BAAC,kBAAD;AACC,IAAA,SAAS,EAAC,2CADX;AAEC,IAAA,SAAS,MAFV;AAGC,IAAA,SAAS,EAAGhB,cAHb;AAIC,IAAA,OAAO,EAAGD,gBAJX;AAKC,IAAA,QAAQ,EAAG,CAAEQ,iBALd;AAMC,IAAA,IAAI,EAAGU,WANR;AAOC,IAAA,KAAK,EAAG,cACP,WADO,EAEP,yCAFO;AAPT,IAJD,EAgBC,4BAAC,yBAAD,OAhBD,EAiBC,4BAAC,yBAAD,OAjBD,EAkBC,4BAAC,yBAAD,OAlBD,EAmBC,4BAAC,uBAAD;AAAiB,IAAA,uBAAuB,EAAGN;AAA3C,IAnBD,EAoBC,4BAAC,oCAAD;AAAyB,IAAA,UAAU,EAAGA;AAAtC,IApBD,EAqBGI,mBAAmB,IACpB;AAAK,IAAA,SAAS,EAAC;AAAf,KACC,4BAAC,yBAAD;AAAc,IAAA,cAAc;AAA5B,IADD,CAtBF,CADD;AA6BA;;eAEcjB,a","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useViewportMatch } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { __, _x } from '@wordpress/i18n';\nimport {\n\tBlockToolbar,\n\tNavigableToolbar,\n\tBlockNavigationDropdown,\n\tToolSelector,\n} from '@wordpress/block-editor';\nimport {\n\tTableOfContents,\n\tEditorHistoryRedo,\n\tEditorHistoryUndo,\n} from '@wordpress/editor';\nimport { Button } from '@wordpress/components';\nimport { plus } from '@wordpress/icons';\n\nfunction HeaderToolbar( { onToggleInserter, isInserterOpen } ) {\n\tconst {\n\t\thasFixedToolbar,\n\t\tisInserterEnabled,\n\t\tisTextModeEnabled,\n\t\tpreviewDeviceType,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\thasInserterItems,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockSelectionEnd,\n\t\t} = select( 'core/block-editor' );\n\t\treturn {\n\t\t\thasFixedToolbar: select( 'core/edit-post' ).isFeatureActive(\n\t\t\t\t'fixedToolbar'\n\t\t\t),\n\t\t\t// This setting (richEditingEnabled) should not live in the block editor's setting.\n\t\t\tisInserterEnabled:\n\t\t\t\tselect( 'core/edit-post' ).getEditorMode() === 'visual' &&\n\t\t\t\tselect( 'core/editor' ).getEditorSettings()\n\t\t\t\t\t.richEditingEnabled &&\n\t\t\t\thasInserterItems(\n\t\t\t\t\tgetBlockRootClientId( getBlockSelectionEnd() )\n\t\t\t\t),\n\t\t\tisTextModeEnabled:\n\t\t\t\tselect( 'core/edit-post' ).getEditorMode() === 'text',\n\t\t\tpreviewDeviceType: select(\n\t\t\t\t'core/edit-post'\n\t\t\t).__experimentalGetPreviewDeviceType(),\n\t\t};\n\t}, [] );\n\tconst isLargeViewport = useViewportMatch( 'medium' );\n\n\tconst displayBlockToolbar =\n\t\t! isLargeViewport || previewDeviceType !== 'Desktop' || hasFixedToolbar;\n\n\tconst toolbarAriaLabel = displayBlockToolbar\n\t\t? /* translators: accessibility text for the editor toolbar when Top Toolbar is on */\n\t\t  __( 'Document and block tools' )\n\t\t: /* translators: accessibility text for the editor toolbar when Top Toolbar is off */\n\t\t  __( 'Document tools' );\n\n\treturn (\n\t\t<NavigableToolbar\n\t\t\tclassName=\"edit-post-header-toolbar\"\n\t\t\taria-label={ toolbarAriaLabel }\n\t\t>\n\t\t\t<Button\n\t\t\t\tclassName=\"edit-post-header-toolbar__inserter-toggle\"\n\t\t\t\tisPrimary\n\t\t\t\tisPressed={ isInserterOpen }\n\t\t\t\tonClick={ onToggleInserter }\n\t\t\t\tdisabled={ ! isInserterEnabled }\n\t\t\t\ticon={ plus }\n\t\t\t\tlabel={ _x(\n\t\t\t\t\t'Add block',\n\t\t\t\t\t'Generic label for block inserter button'\n\t\t\t\t) }\n\t\t\t/>\n\t\t\t<ToolSelector />\n\t\t\t<EditorHistoryUndo />\n\t\t\t<EditorHistoryRedo />\n\t\t\t<TableOfContents hasOutlineItemsDisabled={ isTextModeEnabled } />\n\t\t\t<BlockNavigationDropdown isDisabled={ isTextModeEnabled } />\n\t\t\t{ displayBlockToolbar && (\n\t\t\t\t<div className=\"edit-post-header-toolbar__block-toolbar\">\n\t\t\t\t\t<BlockToolbar hideDragHandle />\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</NavigableToolbar>\n\t);\n}\n\nexport default HeaderToolbar;\n"]}