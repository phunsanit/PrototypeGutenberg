{"version":3,"sources":["@wordpress/edit-post/src/components/layout/index.js"],"names":["interfaceLabels","leftSidebar","Layout","isInserterOpen","setIsInserterOpen","isMobileViewport","isHugeViewport","openGeneralSidebar","closeGeneralSidebar","select","hasFixedToolbar","isFeatureActive","sidebarIsOpened","getActiveComplementaryArea","isPublishSidebarOpened","isFullscreenActive","mode","getEditorMode","isRichEditingEnabled","getEditorSettings","richEditingEnabled","hasActiveMetaboxes","hasMetaBoxes","previousShortcut","getAllShortcutRawKeyCombinations","nextShortcut","hasBlockSelected","className","openSidebarPanel","entitiesSavedStatesCallback","setEntitiesSavedStatesCallback","closeEntitiesSavedStates","arg","close","previous","next"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tAutosaveMonitor,\n\tLocalAutosaveMonitor,\n\tUnsavedChangesWarning,\n\tEditorNotices,\n\tEditorKeyboardShortcutsRegister,\n} from '@wordpress/editor';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport {\n\tBlockBreadcrumb,\n\t__experimentalLibrary as Library,\n} from '@wordpress/block-editor';\nimport {\n\tButton,\n\tScrollLock,\n\tPopover,\n\tFocusReturnProvider,\n} from '@wordpress/components';\nimport { useViewportMatch } from '@wordpress/compose';\nimport { PluginArea } from '@wordpress/plugins';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tComplementaryArea,\n\tFullscreenMode,\n\tInterfaceSkeleton,\n} from '@wordpress/interface';\nimport { useState, useEffect, useCallback } from '@wordpress/element';\nimport { close } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport TextEditor from '../text-editor';\nimport VisualEditor from '../visual-editor';\nimport EditPostKeyboardShortcuts from '../keyboard-shortcuts';\nimport KeyboardShortcutHelpModal from '../keyboard-shortcut-help-modal';\nimport ManageBlocksModal from '../manage-blocks-modal';\nimport OptionsModal from '../options-modal';\nimport BrowserURL from '../browser-url';\nimport Header from '../header';\nimport SettingsSidebar from '../sidebar/settings-sidebar';\nimport MetaBoxes from '../meta-boxes';\nimport WelcomeGuide from '../welcome-guide';\nimport ActionsPanel from './actions-panel';\n\nconst interfaceLabels = {\n\tleftSidebar: __( 'Block Library' ),\n};\n\nfunction Layout() {\n\tconst [ isInserterOpen, setIsInserterOpen ] = useState( false );\n\tconst isMobileViewport = useViewportMatch( 'medium', '<' );\n\tconst isHugeViewport = useViewportMatch( 'huge', '>=' );\n\tconst { openGeneralSidebar, closeGeneralSidebar } = useDispatch(\n\t\t'core/edit-post'\n\t);\n\tconst {\n\t\tmode,\n\t\tisFullscreenActive,\n\t\tisRichEditingEnabled,\n\t\tsidebarIsOpened,\n\t\thasActiveMetaboxes,\n\t\thasFixedToolbar,\n\t\tpreviousShortcut,\n\t\tnextShortcut,\n\t\thasBlockSelected,\n\t} = useSelect( ( select ) => {\n\t\treturn {\n\t\t\thasFixedToolbar: select( 'core/edit-post' ).isFeatureActive(\n\t\t\t\t'fixedToolbar'\n\t\t\t),\n\t\t\tsidebarIsOpened: !! (\n\t\t\t\tselect( 'core/interface' ).getActiveComplementaryArea(\n\t\t\t\t\t'core/edit-post'\n\t\t\t\t) || select( 'core/edit-post' ).isPublishSidebarOpened()\n\t\t\t),\n\t\t\tisFullscreenActive: select( 'core/edit-post' ).isFeatureActive(\n\t\t\t\t'fullscreenMode'\n\t\t\t),\n\t\t\tmode: select( 'core/edit-post' ).getEditorMode(),\n\t\t\tisRichEditingEnabled: select( 'core/editor' ).getEditorSettings()\n\t\t\t\t.richEditingEnabled,\n\t\t\thasActiveMetaboxes: select( 'core/edit-post' ).hasMetaBoxes(),\n\t\t\tpreviousShortcut: select(\n\t\t\t\t'core/keyboard-shortcuts'\n\t\t\t).getAllShortcutRawKeyCombinations(\n\t\t\t\t'core/edit-post/previous-region'\n\t\t\t),\n\t\t\tnextShortcut: select(\n\t\t\t\t'core/keyboard-shortcuts'\n\t\t\t).getAllShortcutRawKeyCombinations( 'core/edit-post/next-region' ),\n\t\t};\n\t}, [] );\n\tconst className = classnames( 'edit-post-layout', 'is-mode-' + mode, {\n\t\t'is-sidebar-opened': sidebarIsOpened,\n\t\t'has-fixed-toolbar': hasFixedToolbar,\n\t\t'has-metaboxes': hasActiveMetaboxes,\n\t} );\n\tconst openSidebarPanel = () =>\n\t\topenGeneralSidebar(\n\t\t\thasBlockSelected ? 'edit-post/block' : 'edit-post/document'\n\t\t);\n\n\t// Inserter and Sidebars are mutually exclusive\n\tuseEffect( () => {\n\t\tif ( sidebarIsOpened && ! isHugeViewport ) {\n\t\t\tsetIsInserterOpen( false );\n\t\t}\n\t}, [ sidebarIsOpened, isHugeViewport ] );\n\tuseEffect( () => {\n\t\tif ( isInserterOpen && ! isHugeViewport ) {\n\t\t\tcloseGeneralSidebar();\n\t\t}\n\t}, [ isInserterOpen, isHugeViewport ] );\n\n\t// Local state for save panel.\n\t// Note 'thruthy' callback implies an open panel.\n\tconst [\n\t\tentitiesSavedStatesCallback,\n\t\tsetEntitiesSavedStatesCallback,\n\t] = useState( false );\n\tconst closeEntitiesSavedStates = useCallback(\n\t\t( arg ) => {\n\t\t\tif ( typeof entitiesSavedStatesCallback === 'function' ) {\n\t\t\t\tentitiesSavedStatesCallback( arg );\n\t\t\t}\n\t\t\tsetEntitiesSavedStatesCallback( false );\n\t\t},\n\t\t[ entitiesSavedStatesCallback ]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<FullscreenMode isActive={ isFullscreenActive } />\n\t\t\t<BrowserURL />\n\t\t\t<UnsavedChangesWarning />\n\t\t\t<AutosaveMonitor />\n\t\t\t<LocalAutosaveMonitor />\n\t\t\t<EditPostKeyboardShortcuts />\n\t\t\t<EditorKeyboardShortcutsRegister />\n\t\t\t<SettingsSidebar />\n\t\t\t<FocusReturnProvider>\n\t\t\t\t<InterfaceSkeleton\n\t\t\t\t\tclassName={ className }\n\t\t\t\t\tlabels={ interfaceLabels }\n\t\t\t\t\theader={\n\t\t\t\t\t\t<Header\n\t\t\t\t\t\t\tisInserterOpen={ isInserterOpen }\n\t\t\t\t\t\t\tonToggleInserter={ () =>\n\t\t\t\t\t\t\t\tsetIsInserterOpen( ! isInserterOpen )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetEntitiesSavedStatesCallback={\n\t\t\t\t\t\t\t\tsetEntitiesSavedStatesCallback\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tleftSidebar={\n\t\t\t\t\t\tmode === 'visual' &&\n\t\t\t\t\t\tisInserterOpen && (\n\t\t\t\t\t\t\t<div className=\"edit-post-layout__inserter-panel\">\n\t\t\t\t\t\t\t\t<div className=\"edit-post-layout__inserter-panel-header\">\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\ticon={ close }\n\t\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\t\tsetIsInserterOpen( false )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"edit-post-layout__inserter-panel-content\">\n\t\t\t\t\t\t\t\t\t<Library\n\t\t\t\t\t\t\t\t\t\tshowInserterHelpPanel\n\t\t\t\t\t\t\t\t\t\tonSelect={ () => {\n\t\t\t\t\t\t\t\t\t\t\tif ( isMobileViewport ) {\n\t\t\t\t\t\t\t\t\t\t\t\tsetIsInserterOpen( false );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tsidebar={\n\t\t\t\t\t\t( ! isMobileViewport || sidebarIsOpened ) && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{ ! isMobileViewport && ! sidebarIsOpened && (\n\t\t\t\t\t\t\t\t\t<div className=\"edit-post-layout__toogle-sidebar-panel\">\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"edit-post-layout__toogle-sidebar-panel-button\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={ openSidebarPanel }\n\t\t\t\t\t\t\t\t\t\t\taria-expanded={ false }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ hasBlockSelected\n\t\t\t\t\t\t\t\t\t\t\t\t? __( 'Open block settings' )\n\t\t\t\t\t\t\t\t\t\t\t\t: __(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Open document settings'\n\t\t\t\t\t\t\t\t\t\t\t\t  ) }\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t<ComplementaryArea.Slot scope=\"core/edit-post\" />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tcontent={\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<EditorNotices />\n\t\t\t\t\t\t\t{ ( mode === 'text' || ! isRichEditingEnabled ) && (\n\t\t\t\t\t\t\t\t<TextEditor />\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ isRichEditingEnabled && mode === 'visual' && (\n\t\t\t\t\t\t\t\t<VisualEditor />\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t<div className=\"edit-post-layout__metaboxes\">\n\t\t\t\t\t\t\t\t<MetaBoxes location=\"normal\" />\n\t\t\t\t\t\t\t\t<MetaBoxes location=\"advanced\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{ isMobileViewport && sidebarIsOpened && (\n\t\t\t\t\t\t\t\t<ScrollLock />\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t\tfooter={\n\t\t\t\t\t\t! isMobileViewport &&\n\t\t\t\t\t\tisRichEditingEnabled &&\n\t\t\t\t\t\tmode === 'visual' && (\n\t\t\t\t\t\t\t<div className=\"edit-post-layout__footer\">\n\t\t\t\t\t\t\t\t<BlockBreadcrumb />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tactions={\n\t\t\t\t\t\t<ActionsPanel\n\t\t\t\t\t\t\tcloseEntitiesSavedStates={\n\t\t\t\t\t\t\t\tcloseEntitiesSavedStates\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisEntitiesSavedStatesOpen={\n\t\t\t\t\t\t\t\tentitiesSavedStatesCallback\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetEntitiesSavedStatesCallback={\n\t\t\t\t\t\t\t\tsetEntitiesSavedStatesCallback\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tshortcuts={ {\n\t\t\t\t\t\tprevious: previousShortcut,\n\t\t\t\t\t\tnext: nextShortcut,\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t<ManageBlocksModal />\n\t\t\t\t<OptionsModal />\n\t\t\t\t<KeyboardShortcutHelpModal />\n\t\t\t\t<WelcomeGuide />\n\t\t\t\t<Popover.Slot />\n\t\t\t\t<PluginArea />\n\t\t\t</FocusReturnProvider>\n\t\t</>\n\t);\n}\n\nexport default Layout;\n"]}