{"version":3,"sources":["@wordpress/edit-post/src/components/layout/actions-panel.js"],"names":["ActionsPanel","setEntitiesSavedStatesCallback","closeEntitiesSavedStates","isEntitiesSavedStatesOpen","closePublishSidebar","togglePublishSidebar","select","publishSidebarOpened","isPublishSidebarOpened","hasActiveMetaboxes","hasMetaBoxes","isSavingMetaBoxes","hasNonPostEntityChanges","openEntitiesSavedStates","unmountableContent","PluginPrePublishPanel","Slot","PluginPostPublishPanel"],"mappings":";;;;;;;;;AAOA;;AAJA;;AACA;;AACA;;AACA;;AAKA;;AACA;;AAZA;;;;AAQA;;;AAMe,SAASA,YAAT,OAIX;AAAA,MAHHC,8BAGG,QAHHA,8BAGG;AAAA,MAFHC,wBAEG,QAFHA,wBAEG;AAAA,MADHC,yBACG,QADHA,yBACG;;AAAA,qBACmD,uBACrD,gBADqD,CADnD;AAAA,MACKC,mBADL,gBACKA,mBADL;AAAA,MAC0BC,oBAD1B,gBAC0BA,oBAD1B;;AAAA,mBASC,qBAAW,UAAEC,MAAF,EAAc;AAC5B,WAAO;AACNC,MAAAA,oBAAoB,EAAED,MAAM,CAC3B,gBAD2B,CAAN,CAEpBE,sBAFoB,EADhB;AAINC,MAAAA,kBAAkB,EAAEH,MAAM,CAAE,gBAAF,CAAN,CAA2BI,YAA3B,EAJd;AAKNC,MAAAA,iBAAiB,EAAEL,MAAM,CAAE,gBAAF,CAAN,CAA2BK,iBAA3B,EALb;AAMNC,MAAAA,uBAAuB,EAAEN,MAAM,CAC9B,aAD8B,CAAN,CAEvBM,uBAFuB;AANnB,KAAP;AAUA,GAXG,EAWD,EAXC,CATD;AAAA,MAKFL,oBALE,cAKFA,oBALE;AAAA,MAMFE,kBANE,cAMFA,kBANE;AAAA,MAOFE,iBAPE,cAOFA,iBAPE;AAAA,MAQFC,uBARE,cAQFA,uBARE;;AAsBH,MAAMC,uBAAuB,GAAG,0BAC/B;AAAA,WAAMZ,8BAA8B,CAAE,IAAF,CAApC;AAAA,GAD+B,EAE/B,EAF+B,CAAhC,CAtBG,CA2BH;AACA;;AACA,MAAIa,kBAAJ;;AACA,MAAKP,oBAAL,EAA4B;AAC3BO,IAAAA,kBAAkB,GACjB,4BAAC,wBAAD;AACC,MAAA,OAAO,EAAGV,mBADX;AAEC,MAAA,YAAY,EAAGK,kBAFhB;AAGC,MAAA,aAAa,EAAGE,iBAHjB;AAIC,MAAA,mBAAmB,EAAGI,+BAAsBC,IAJ7C;AAKC,MAAA,oBAAoB,EAAGC,gCAAuBD;AAL/C,MADD;AASA,GAVD,MAUO,IAAKJ,uBAAL,EAA+B;AACrCE,IAAAA,kBAAkB,GACjB;AAAK,MAAA,SAAS,EAAC;AAAf,OACC,4BAAC,kBAAD;AACC,MAAA,WAAW,MADZ;AAEC,MAAA,SAAS,EAAC,6DAFX;AAGC,MAAA,OAAO,EAAGD,uBAHX;AAIC,uBAAgB;AAJjB,OAMG,cAAI,iBAAJ,CANH,CADD,CADD;AAYA,GAbM,MAaA;AACNC,IAAAA,kBAAkB,GACjB;AAAK,MAAA,SAAS,EAAC;AAAf,OACC,4BAAC,kBAAD;AACC,MAAA,WAAW,MADZ;AAEC,MAAA,SAAS,EAAC,+CAFX;AAGC,MAAA,OAAO,EAAGT,oBAHX;AAIC,uBAAgB;AAJjB,OAMG,cAAI,oBAAJ,CANH,CADD,CADD;AAYA,GAlEE,CAoEH;AACA;;;AACA,SACC,qDACC,4BAAC,2BAAD;AACC,IAAA,MAAM,EAAGF,yBADV;AAEC,IAAA,KAAK,EAAGD;AAFT,IADD,EAKG,CAAEC,yBAAF,IAA+BW,kBALlC,CADD;AASA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { EntitiesSavedStates, PostPublishPanel } from '@wordpress/editor';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { Button } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useCallback } from '@wordpress/element';\n/**\n * Internal dependencies\n */\nimport PluginPostPublishPanel from '../sidebar/plugin-post-publish-panel';\nimport PluginPrePublishPanel from '../sidebar/plugin-pre-publish-panel';\n\nexport default function ActionsPanel( {\n\tsetEntitiesSavedStatesCallback,\n\tcloseEntitiesSavedStates,\n\tisEntitiesSavedStatesOpen,\n} ) {\n\tconst { closePublishSidebar, togglePublishSidebar } = useDispatch(\n\t\t'core/edit-post'\n\t);\n\tconst {\n\t\tpublishSidebarOpened,\n\t\thasActiveMetaboxes,\n\t\tisSavingMetaBoxes,\n\t\thasNonPostEntityChanges,\n\t} = useSelect( ( select ) => {\n\t\treturn {\n\t\t\tpublishSidebarOpened: select(\n\t\t\t\t'core/edit-post'\n\t\t\t).isPublishSidebarOpened(),\n\t\t\thasActiveMetaboxes: select( 'core/edit-post' ).hasMetaBoxes(),\n\t\t\tisSavingMetaBoxes: select( 'core/edit-post' ).isSavingMetaBoxes(),\n\t\t\thasNonPostEntityChanges: select(\n\t\t\t\t'core/editor'\n\t\t\t).hasNonPostEntityChanges(),\n\t\t};\n\t}, [] );\n\n\tconst openEntitiesSavedStates = useCallback(\n\t\t() => setEntitiesSavedStatesCallback( true ),\n\t\t[]\n\t);\n\n\t// It is ok for these components to be unmounted when not in visual use.\n\t// We don't want more than one present at a time, decide which to render.\n\tlet unmountableContent;\n\tif ( publishSidebarOpened ) {\n\t\tunmountableContent = (\n\t\t\t<PostPublishPanel\n\t\t\t\tonClose={ closePublishSidebar }\n\t\t\t\tforceIsDirty={ hasActiveMetaboxes }\n\t\t\t\tforceIsSaving={ isSavingMetaBoxes }\n\t\t\t\tPrePublishExtension={ PluginPrePublishPanel.Slot }\n\t\t\t\tPostPublishExtension={ PluginPostPublishPanel.Slot }\n\t\t\t/>\n\t\t);\n\t} else if ( hasNonPostEntityChanges ) {\n\t\tunmountableContent = (\n\t\t\t<div className=\"edit-post-layout__toggle-entities-saved-states-panel\">\n\t\t\t\t<Button\n\t\t\t\t\tisSecondary\n\t\t\t\t\tclassName=\"edit-post-layout__toggle-entities-saved-states-panel-button\"\n\t\t\t\t\tonClick={ openEntitiesSavedStates }\n\t\t\t\t\taria-expanded={ false }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Open save panel' ) }\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\tunmountableContent = (\n\t\t\t<div className=\"edit-post-layout__toggle-publish-panel\">\n\t\t\t\t<Button\n\t\t\t\t\tisSecondary\n\t\t\t\t\tclassName=\"edit-post-layout__toggle-publish-panel-button\"\n\t\t\t\t\tonClick={ togglePublishSidebar }\n\t\t\t\t\taria-expanded={ false }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Open publish panel' ) }\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Since EntitiesSavedStates controls its own panel, we can keep it\n\t// always mounted to retain its own component state (such as checkboxes).\n\treturn (\n\t\t<>\n\t\t\t<EntitiesSavedStates\n\t\t\t\tisOpen={ isEntitiesSavedStatesOpen }\n\t\t\t\tclose={ closeEntitiesSavedStates }\n\t\t\t/>\n\t\t\t{ ! isEntitiesSavedStatesOpen && unmountableContent }\n\t\t</>\n\t);\n}\n"]}