{"version":3,"sources":["@wordpress/edit-post/src/plugins/copy-content-menu-item/index.js"],"names":["MenuItem","withDispatch","withSelect","__","useCopyOnClick","compose","ifCondition","useRef","useEffect","CopyContentMenuItem","createNotice","editedPostContent","ref","hasCopied","isDismissible","type","select","getEditedPostAttribute","dispatch","length"],"mappings":";;AAAA;;;AAGA,SAASA,QAAT,QAAyB,uBAAzB;AACA,SAASC,YAAT,EAAuBC,UAAvB,QAAyC,iBAAzC;AACA,SAASC,EAAT,QAAmB,iBAAnB;AACA,SAASC,cAAT,EAAyBC,OAAzB,EAAkCC,WAAlC,QAAqD,oBAArD;AACA,SAASC,MAAT,EAAiBC,SAAjB,QAAkC,oBAAlC;;AAEA,SAASC,mBAAT,OAAoE;AAAA,MAApCC,YAAoC,QAApCA,YAAoC;AAAA,MAAtBC,iBAAsB,QAAtBA,iBAAsB;AACnE,MAAMC,GAAG,GAAGL,MAAM,EAAlB;AACA,MAAMM,SAAS,GAAGT,cAAc,CAAEQ,GAAF,EAAOD,iBAAP,CAAhC;AAEAH,EAAAA,SAAS,CAAE,YAAM;AAChB,QAAK,CAAEK,SAAP,EAAmB;AAClB;AACA;;AAEDH,IAAAA,YAAY,CAAE,MAAF,EAAUP,EAAE,CAAE,qBAAF,CAAZ,EAAuC;AAClDW,MAAAA,aAAa,EAAE,IADmC;AAElDC,MAAAA,IAAI,EAAE;AAF4C,KAAvC,CAAZ;AAIA,GATQ,EASN,CAAEF,SAAF,CATM,CAAT;AAWA,SACC,cAAC,QAAD;AAAU,IAAA,GAAG,EAAGD;AAAhB,KACGC,SAAS,GAAGV,EAAE,CAAE,SAAF,CAAL,GAAqBA,EAAE,CAAE,kBAAF,CADnC,CADD;AAKA;;AAED,eAAeE,OAAO,CACrBH,UAAU,CAAE,UAAEc,MAAF;AAAA,SAAgB;AAC3BL,IAAAA,iBAAiB,EAAEK,MAAM,CAAE,aAAF,CAAN,CAAwBC,sBAAxB,CAClB,SADkB;AADQ,GAAhB;AAAA,CAAF,CADW,EAMrBhB,YAAY,CAAE,UAAEiB,QAAF,EAAgB;AAAA,kBACJA,QAAQ,CAAE,cAAF,CADJ;AAAA,MACrBR,YADqB,aACrBA,YADqB;;AAG7B,SAAO;AACNA,IAAAA,YAAY,EAAZA;AADM,GAAP;AAGA,CANW,CANS,EAarBJ,WAAW,CAAE;AAAA,MAAIK,iBAAJ,SAAIA,iBAAJ;AAAA,SAA6BA,iBAAiB,CAACQ,MAAlB,GAA2B,CAAxD;AAAA,CAAF,CAbU,CAAP,CAcZV,mBAdY,CAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { MenuItem } from '@wordpress/components';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { useCopyOnClick, compose, ifCondition } from '@wordpress/compose';\nimport { useRef, useEffect } from '@wordpress/element';\n\nfunction CopyContentMenuItem( { createNotice, editedPostContent } ) {\n\tconst ref = useRef();\n\tconst hasCopied = useCopyOnClick( ref, editedPostContent );\n\n\tuseEffect( () => {\n\t\tif ( ! hasCopied ) {\n\t\t\treturn;\n\t\t}\n\n\t\tcreateNotice( 'info', __( 'All content copied.' ), {\n\t\t\tisDismissible: true,\n\t\t\ttype: 'snackbar',\n\t\t} );\n\t}, [ hasCopied ] );\n\n\treturn (\n\t\t<MenuItem ref={ ref }>\n\t\t\t{ hasCopied ? __( 'Copied!' ) : __( 'Copy all content' ) }\n\t\t</MenuItem>\n\t);\n}\n\nexport default compose(\n\twithSelect( ( select ) => ( {\n\t\teditedPostContent: select( 'core/editor' ).getEditedPostAttribute(\n\t\t\t'content'\n\t\t),\n\t} ) ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t};\n\t} ),\n\tifCondition( ( { editedPostContent } ) => editedPostContent.length > 0 )\n)( CopyContentMenuItem );\n"]}