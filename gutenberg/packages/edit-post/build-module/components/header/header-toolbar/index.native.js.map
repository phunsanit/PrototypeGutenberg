{"version":3,"sources":["@wordpress/edit-post/src/components/header/header-toolbar/index.native.js"],"names":["useRef","ScrollView","View","compose","withPreferredColorScheme","withSelect","withDispatch","withViewportMatch","__","Inserter","BlockToolbar","Toolbar","ToolbarButton","keyboardClose","undo","undoIcon","redo","redoIcon","styles","HeaderToolbar","hasRedo","hasUndo","showInserter","showKeyboardHideButton","getStylesFromColorScheme","onHideKeyboard","isRTL","scrollViewRef","scrollToStart","current","scrollTo","x","renderHistoryButtons","buttons","hint","reverse","container","containerDark","scrollableContent","keyboardHideContainer","select","hasEditorRedo","hasEditorUndo","getEditorMode","getEditorSettings","richEditingEnabled","isTextModeEnabled","getSettings","dispatch","clearSelectedBlock","togglePostTitleSelection","isLargeViewport"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { useRef } from 'react';\nimport { ScrollView, View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { withViewportMatch } from '@wordpress/viewport';\nimport { __ } from '@wordpress/i18n';\nimport { Inserter, BlockToolbar } from '@wordpress/block-editor';\nimport { Toolbar, ToolbarButton } from '@wordpress/components';\nimport {\n\tkeyboardClose,\n\tundo as undoIcon,\n\tredo as redoIcon,\n} from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nfunction HeaderToolbar( {\n\thasRedo,\n\thasUndo,\n\tredo,\n\tundo,\n\tshowInserter,\n\tshowKeyboardHideButton,\n\tgetStylesFromColorScheme,\n\tonHideKeyboard,\n\tisRTL,\n} ) {\n\tconst scrollViewRef = useRef( null );\n\tconst scrollToStart = () => {\n\t\tscrollViewRef.current.scrollTo( { x: 0 } );\n\t};\n\n\tconst renderHistoryButtons = () => {\n\t\tconst buttons = [\n\t\t\t/* TODO: replace with EditorHistoryRedo and EditorHistoryUndo */\n\t\t\t<ToolbarButton\n\t\t\t\tkey=\"undoButton\"\n\t\t\t\ttitle={ __( 'Undo' ) }\n\t\t\t\ticon={ undoIcon }\n\t\t\t\tisDisabled={ ! hasUndo }\n\t\t\t\tonClick={ undo }\n\t\t\t\textraProps={ {\n\t\t\t\t\thint: __( 'Double tap to undo last change' ),\n\t\t\t\t} }\n\t\t\t/>,\n\t\t\t<ToolbarButton\n\t\t\t\tkey=\"redoButton\"\n\t\t\t\ttitle={ __( 'Redo' ) }\n\t\t\t\ticon={ redoIcon }\n\t\t\t\tisDisabled={ ! hasRedo }\n\t\t\t\tonClick={ redo }\n\t\t\t\textraProps={ {\n\t\t\t\t\thint: __( 'Double tap to redo last change' ),\n\t\t\t\t} }\n\t\t\t/>,\n\t\t];\n\n\t\treturn isRTL ? buttons.reverse() : buttons;\n\t};\n\n\treturn (\n\t\t<View\n\t\t\tstyle={ getStylesFromColorScheme(\n\t\t\t\tstyles.container,\n\t\t\t\tstyles.containerDark\n\t\t\t) }\n\t\t>\n\t\t\t<ScrollView\n\t\t\t\tref={ scrollViewRef }\n\t\t\t\tonContentSizeChange={ scrollToStart }\n\t\t\t\thorizontal={ true }\n\t\t\t\tshowsHorizontalScrollIndicator={ false }\n\t\t\t\tkeyboardShouldPersistTaps=\"always\"\n\t\t\t\talwaysBounceHorizontal={ false }\n\t\t\t\tcontentContainerStyle={ styles.scrollableContent }\n\t\t\t>\n\t\t\t\t<Inserter disabled={ ! showInserter } />\n\t\t\t\t{ renderHistoryButtons() }\n\t\t\t\t<BlockToolbar />\n\t\t\t</ScrollView>\n\t\t\t{ showKeyboardHideButton && (\n\t\t\t\t<Toolbar passedStyle={ styles.keyboardHideContainer }>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\ttitle={ __( 'Hide keyboard' ) }\n\t\t\t\t\t\ticon={ keyboardClose }\n\t\t\t\t\t\tonClick={ onHideKeyboard }\n\t\t\t\t\t\textraProps={ {\n\t\t\t\t\t\t\thint: __( 'Tap to hide the keyboard' ),\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</Toolbar>\n\t\t\t) }\n\t\t</View>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => ( {\n\t\thasRedo: select( 'core/editor' ).hasEditorRedo(),\n\t\thasUndo: select( 'core/editor' ).hasEditorUndo(),\n\t\t// This setting (richEditingEnabled) should not live in the block editor's setting.\n\t\tshowInserter:\n\t\t\tselect( 'core/edit-post' ).getEditorMode() === 'visual' &&\n\t\t\tselect( 'core/editor' ).getEditorSettings().richEditingEnabled,\n\t\tisTextModeEnabled:\n\t\t\tselect( 'core/edit-post' ).getEditorMode() === 'text',\n\t\tisRTL: select( 'core/block-editor' ).getSettings().isRTL,\n\t} ) ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { clearSelectedBlock } = dispatch( 'core/block-editor' );\n\t\tconst { togglePostTitleSelection } = dispatch( 'core/editor' );\n\n\t\treturn {\n\t\t\tredo: dispatch( 'core/editor' ).redo,\n\t\t\tundo: dispatch( 'core/editor' ).undo,\n\t\t\tonHideKeyboard() {\n\t\t\t\tclearSelectedBlock();\n\t\t\t\ttogglePostTitleSelection( false );\n\t\t\t},\n\t\t};\n\t} ),\n\twithViewportMatch( { isLargeViewport: 'medium' } ),\n\twithPreferredColorScheme,\n] )( HeaderToolbar );\n"]}