{"version":3,"sources":["@wordpress/edit-post/src/components/manage-blocks-modal/manager.js"],"names":["filter","includes","isArray","withSelect","compose","withState","TextControl","__","_n","sprintf","BlockManagerCategory","BlockManager","search","setState","blockTypes","categories","hasBlockSupport","isMatchingSearchTerm","numberOfHiddenBlocks","blockType","parent","nextSearch","length","map","category","slug","title","select","getBlockTypes","getCategories","getPreference","hiddenBlockTypes"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { filter, includes, isArray } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\nimport { compose, withState } from '@wordpress/compose';\nimport { TextControl } from '@wordpress/components';\nimport { __, _n, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockManagerCategory from './category';\n\nfunction BlockManager( {\n\tsearch,\n\tsetState,\n\tblockTypes,\n\tcategories,\n\thasBlockSupport,\n\tisMatchingSearchTerm,\n\tnumberOfHiddenBlocks,\n} ) {\n\t// Filtering occurs here (as opposed to `withSelect`) to avoid wasted\n\t// wasted renders by consequence of `Array#filter` producing a new\n\t// value reference on each call.\n\tblockTypes = blockTypes.filter(\n\t\t( blockType ) =>\n\t\t\thasBlockSupport( blockType, 'inserter', true ) &&\n\t\t\t( ! search || isMatchingSearchTerm( blockType, search ) ) &&\n\t\t\t( ! blockType.parent ||\n\t\t\t\tincludes( blockType.parent, 'core/post-content' ) )\n\t);\n\n\treturn (\n\t\t<div className=\"edit-post-manage-blocks-modal__content\">\n\t\t\t<TextControl\n\t\t\t\ttype=\"search\"\n\t\t\t\tlabel={ __( 'Search for a block' ) }\n\t\t\t\tvalue={ search }\n\t\t\t\tonChange={ ( nextSearch ) =>\n\t\t\t\t\tsetState( {\n\t\t\t\t\t\tsearch: nextSearch,\n\t\t\t\t\t} )\n\t\t\t\t}\n\t\t\t\tclassName=\"edit-post-manage-blocks-modal__search\"\n\t\t\t/>\n\t\t\t{ !! numberOfHiddenBlocks && (\n\t\t\t\t<div className=\"edit-post-manage-blocks-modal__disabled-blocks-count\">\n\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t/* translators: %d: number of blocks. */\n\t\t\t\t\t\t_n(\n\t\t\t\t\t\t\t'%d block is disabled.',\n\t\t\t\t\t\t\t'%d blocks are disabled.',\n\t\t\t\t\t\t\tnumberOfHiddenBlocks\n\t\t\t\t\t\t),\n\t\t\t\t\t\tnumberOfHiddenBlocks\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t<div\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\trole=\"region\"\n\t\t\t\taria-label={ __( 'Available block types' ) }\n\t\t\t\tclassName=\"edit-post-manage-blocks-modal__results\"\n\t\t\t>\n\t\t\t\t{ blockTypes.length === 0 && (\n\t\t\t\t\t<p className=\"edit-post-manage-blocks-modal__no-results\">\n\t\t\t\t\t\t{ __( 'No blocks found.' ) }\n\t\t\t\t\t</p>\n\t\t\t\t) }\n\t\t\t\t{ categories.map( ( category ) => (\n\t\t\t\t\t<BlockManagerCategory\n\t\t\t\t\t\tkey={ category.slug }\n\t\t\t\t\t\ttitle={ category.title }\n\t\t\t\t\t\tblockTypes={ filter( blockTypes, {\n\t\t\t\t\t\t\tcategory: category.slug,\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t\t<BlockManagerCategory\n\t\t\t\t\ttitle={ __( 'Uncategorized' ) }\n\t\t\t\t\tblockTypes={ filter(\n\t\t\t\t\t\tblockTypes,\n\t\t\t\t\t\t( { category } ) => ! category\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default compose( [\n\twithState( { search: '' } ),\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetBlockTypes,\n\t\t\tgetCategories,\n\t\t\thasBlockSupport,\n\t\t\tisMatchingSearchTerm,\n\t\t} = select( 'core/blocks' );\n\t\tconst { getPreference } = select( 'core/edit-post' );\n\t\tconst hiddenBlockTypes = getPreference( 'hiddenBlockTypes' );\n\t\tconst numberOfHiddenBlocks =\n\t\t\tisArray( hiddenBlockTypes ) && hiddenBlockTypes.length;\n\n\t\treturn {\n\t\t\tblockTypes: getBlockTypes(),\n\t\t\tcategories: getCategories(),\n\t\t\thasBlockSupport,\n\t\t\tisMatchingSearchTerm,\n\t\t\tnumberOfHiddenBlocks,\n\t\t};\n\t} ),\n] )( BlockManager );\n"]}