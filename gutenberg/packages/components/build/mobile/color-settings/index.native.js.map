{"version":3,"sources":["@wordpress/components/src/mobile/color-settings/index.native.js"],"names":["ColorSettings","label","onColorChange","onGradientChange","colorValue","onReplaceSubsheet","shouldEnableBottomSheetScroll","shouldDisableBottomSheetMaxHeight","isBottomSheetContentScrolling","onCloseBottomSheet","onHardwareButtonPress","defaultSettings","currentValue","setCurrentValue","isCustomScreen","setIsCustomScreen","segments","colorsUtils","subsheets","isGradient","isGradientColor","selectedSegmentIndex","currentSegment","setCurrentSegment","isSolidSegment","horizontalSeparatorStyle","styles","horizontalSeparator","horizontalSeparatorDark","onCustomScreenToggle","afterHardwareButtonPress","shouldShow","LayoutAnimation","configureNext","create","Types","easeInEaseOut","Properties","opacity","setColor","color","getFooter","item","colorIndicator","footer","flex","selectColorText"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Text, LayoutAnimation } from 'react-native';\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState, useEffect } from '@wordpress/element';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\n/**\n * Internal dependencies\n */\nimport ColorPicker from '../../color-picker';\nimport ColorPalette from '../../color-palette';\nimport ColorIndicator from '../../color-indicator';\nimport NavigationHeader from '../bottom-sheet/navigation-header';\nimport SegmentedControls from '../segmented-control';\nimport { colorsUtils } from './utils';\n\nimport styles from './style.scss';\n\nfunction ColorSettings( {\n\tlabel,\n\tonColorChange,\n\tonGradientChange,\n\tcolorValue,\n\tonReplaceSubsheet,\n\tshouldEnableBottomSheetScroll,\n\tshouldDisableBottomSheetMaxHeight,\n\tisBottomSheetContentScrolling,\n\tonCloseBottomSheet,\n\tonHardwareButtonPress,\n\tdefaultSettings,\n} ) {\n\tconst [ currentValue, setCurrentValue ] = useState( colorValue );\n\tconst [ isCustomScreen, setIsCustomScreen ] = useState( false );\n\n\tconst { segments, subsheets, isGradient } = colorsUtils;\n\tconst isGradientColor = isGradient( currentValue );\n\tconst selectedSegmentIndex = isGradientColor ? 1 : 0;\n\n\tconst [ currentSegment, setCurrentSegment ] = useState(\n\t\tsegments[ selectedSegmentIndex ]\n\t);\n\n\tconst isSolidSegment = currentSegment === segments[ 0 ];\n\n\tconst horizontalSeparatorStyle = usePreferredColorSchemeStyle(\n\t\tstyles.horizontalSeparator,\n\t\tstyles.horizontalSeparatorDark\n\t);\n\n\tuseEffect( () => {\n\t\tonHardwareButtonPress( () => {\n\t\t\tif ( isCustomScreen ) {\n\t\t\t\tonCustomScreenToggle( false );\n\t\t\t} else {\n\t\t\t\tonReplaceSubsheet(\n\t\t\t\t\tsubsheets[ 0 ],\n\t\t\t\t\t{},\n\t\t\t\t\tafterHardwareButtonPress()\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\t}, [ isCustomScreen ] );\n\n\tuseEffect( () => {\n\t\tsetCurrentSegment( segments[ selectedSegmentIndex ] );\n\t\tshouldDisableBottomSheetMaxHeight( true );\n\t\tonCloseBottomSheet( null );\n\t}, [] );\n\n\tfunction afterHardwareButtonPress() {\n\t\tonHardwareButtonPress( null );\n\t\tshouldDisableBottomSheetMaxHeight( true );\n\t}\n\n\tfunction onCustomScreenToggle( shouldShow ) {\n\t\tLayoutAnimation.configureNext(\n\t\t\tLayoutAnimation.create(\n\t\t\t\t300,\n\t\t\t\tLayoutAnimation.Types.easeInEaseOut,\n\t\t\t\tLayoutAnimation.Properties.opacity\n\t\t\t)\n\t\t);\n\t\tsetIsCustomScreen( shouldShow );\n\t}\n\n\tfunction setColor( color ) {\n\t\tsetCurrentValue( color );\n\t\tif ( isSolidSegment && onColorChange && onGradientChange ) {\n\t\t\tonColorChange( color );\n\t\t\tonGradientChange( '' );\n\t\t} else if ( isSolidSegment && onColorChange ) {\n\t\t\tonColorChange( color );\n\t\t} else if ( ! isSolidSegment && onGradientChange ) {\n\t\t\tonGradientChange( color );\n\t\t}\n\t}\n\n\tfunction getFooter() {\n\t\tif ( onGradientChange ) {\n\t\t\treturn (\n\t\t\t\t<SegmentedControls\n\t\t\t\t\tsegments={ segments }\n\t\t\t\t\tsegmentHandler={ ( item ) => setCurrentSegment( item ) }\n\t\t\t\t\tselectedIndex={ selectedSegmentIndex }\n\t\t\t\t\taddonLeft={\n\t\t\t\t\t\tcurrentValue && (\n\t\t\t\t\t\t\t<ColorIndicator\n\t\t\t\t\t\t\t\tcolor={ currentValue }\n\t\t\t\t\t\t\t\tstyle={ styles.colorIndicator }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<View style={ styles.footer }>\n\t\t\t\t<View style={ styles.flex }>\n\t\t\t\t\t{ currentValue && (\n\t\t\t\t\t\t<ColorIndicator\n\t\t\t\t\t\t\tcolor={ currentValue }\n\t\t\t\t\t\t\tstyle={ styles.colorIndicator }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</View>\n\t\t\t\t<Text\n\t\t\t\t\tstyle={ styles.selectColorText }\n\t\t\t\t\tmaxFontSizeMultiplier={ 2 }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Select a color' ) }\n\t\t\t\t</Text>\n\t\t\t\t<View style={ styles.flex } />\n\t\t\t</View>\n\t\t);\n\t}\n\n\treturn (\n\t\t<View renderToHardwareTextureAndroid>\n\t\t\t{ isCustomScreen && (\n\t\t\t\t<View>\n\t\t\t\t\t<ColorPicker\n\t\t\t\t\t\tshouldEnableBottomSheetScroll={\n\t\t\t\t\t\t\tshouldEnableBottomSheetScroll\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshouldDisableBottomSheetMaxHeight={\n\t\t\t\t\t\t\tshouldDisableBottomSheetMaxHeight\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetColor={ setColor }\n\t\t\t\t\t\tactiveColor={ currentValue }\n\t\t\t\t\t\tisGradientColor={ isGradientColor }\n\t\t\t\t\t\tonNavigationBack={ () => {\n\t\t\t\t\t\t\tonCustomScreenToggle( false );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonCloseBottomSheet={ onCloseBottomSheet }\n\t\t\t\t\t\tisBottomSheetContentScrolling={\n\t\t\t\t\t\t\tisBottomSheetContentScrolling\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t) }\n\t\t\t{ ! isCustomScreen && (\n\t\t\t\t<View>\n\t\t\t\t\t<NavigationHeader\n\t\t\t\t\t\tscreen={ label }\n\t\t\t\t\t\tleftButtonOnPress={ () =>\n\t\t\t\t\t\t\tonReplaceSubsheet( subsheets[ 0 ] )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<ColorPalette\n\t\t\t\t\t\tsetColor={ setColor }\n\t\t\t\t\t\tactiveColor={ currentValue }\n\t\t\t\t\t\tisGradientColor={ isGradientColor }\n\t\t\t\t\t\tcurrentSegment={ currentSegment }\n\t\t\t\t\t\tisCustomScreen={ isCustomScreen }\n\t\t\t\t\t\tonCustomPress={ () => {\n\t\t\t\t\t\t\tonCustomScreenToggle( true );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tshouldEnableBottomSheetScroll={\n\t\t\t\t\t\t\tshouldEnableBottomSheetScroll\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdefaultSettings={ defaultSettings }\n\t\t\t\t\t/>\n\t\t\t\t\t<View style={ horizontalSeparatorStyle } />\n\t\t\t\t\t{ getFooter() }\n\t\t\t\t</View>\n\t\t\t) }\n\t\t</View>\n\t);\n}\n\nexport default ColorSettings;\n"]}