{"version":3,"sources":["@wordpress/components/src/mobile/color-settings/index.native.js"],"names":["View","Text","LayoutAnimation","__","useState","useEffect","usePreferredColorSchemeStyle","ColorPicker","ColorPalette","ColorIndicator","NavigationHeader","SegmentedControls","colorsUtils","styles","ColorSettings","label","onColorChange","onGradientChange","colorValue","onReplaceSubsheet","shouldEnableBottomSheetScroll","shouldDisableBottomSheetMaxHeight","isBottomSheetContentScrolling","onCloseBottomSheet","onHardwareButtonPress","defaultSettings","currentValue","setCurrentValue","isCustomScreen","setIsCustomScreen","segments","subsheets","isGradient","isGradientColor","selectedSegmentIndex","currentSegment","setCurrentSegment","isSolidSegment","horizontalSeparatorStyle","horizontalSeparator","horizontalSeparatorDark","onCustomScreenToggle","afterHardwareButtonPress","shouldShow","configureNext","create","Types","easeInEaseOut","Properties","opacity","setColor","color","getFooter","item","colorIndicator","footer","flex","selectColorText"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Text, LayoutAnimation } from 'react-native';\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState, useEffect } from '@wordpress/element';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\n/**\n * Internal dependencies\n */\nimport ColorPicker from '../../color-picker';\nimport ColorPalette from '../../color-palette';\nimport ColorIndicator from '../../color-indicator';\nimport NavigationHeader from '../bottom-sheet/navigation-header';\nimport SegmentedControls from '../segmented-control';\nimport { colorsUtils } from './utils';\n\nimport styles from './style.scss';\n\nfunction ColorSettings( {\n\tlabel,\n\tonColorChange,\n\tonGradientChange,\n\tcolorValue,\n\tonReplaceSubsheet,\n\tshouldEnableBottomSheetScroll,\n\tshouldDisableBottomSheetMaxHeight,\n\tisBottomSheetContentScrolling,\n\tonCloseBottomSheet,\n\tonHardwareButtonPress,\n\tdefaultSettings,\n} ) {\n\tconst [ currentValue, setCurrentValue ] = useState( colorValue );\n\tconst [ isCustomScreen, setIsCustomScreen ] = useState( false );\n\n\tconst { segments, subsheets, isGradient } = colorsUtils;\n\tconst isGradientColor = isGradient( currentValue );\n\tconst selectedSegmentIndex = isGradientColor ? 1 : 0;\n\n\tconst [ currentSegment, setCurrentSegment ] = useState(\n\t\tsegments[ selectedSegmentIndex ]\n\t);\n\n\tconst isSolidSegment = currentSegment === segments[ 0 ];\n\n\tconst horizontalSeparatorStyle = usePreferredColorSchemeStyle(\n\t\tstyles.horizontalSeparator,\n\t\tstyles.horizontalSeparatorDark\n\t);\n\n\tuseEffect( () => {\n\t\tonHardwareButtonPress( () => {\n\t\t\tif ( isCustomScreen ) {\n\t\t\t\tonCustomScreenToggle( false );\n\t\t\t} else {\n\t\t\t\tonReplaceSubsheet(\n\t\t\t\t\tsubsheets[ 0 ],\n\t\t\t\t\t{},\n\t\t\t\t\tafterHardwareButtonPress()\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\t}, [ isCustomScreen ] );\n\n\tuseEffect( () => {\n\t\tsetCurrentSegment( segments[ selectedSegmentIndex ] );\n\t\tshouldDisableBottomSheetMaxHeight( true );\n\t\tonCloseBottomSheet( null );\n\t}, [] );\n\n\tfunction afterHardwareButtonPress() {\n\t\tonHardwareButtonPress( null );\n\t\tshouldDisableBottomSheetMaxHeight( true );\n\t}\n\n\tfunction onCustomScreenToggle( shouldShow ) {\n\t\tLayoutAnimation.configureNext(\n\t\t\tLayoutAnimation.create(\n\t\t\t\t300,\n\t\t\t\tLayoutAnimation.Types.easeInEaseOut,\n\t\t\t\tLayoutAnimation.Properties.opacity\n\t\t\t)\n\t\t);\n\t\tsetIsCustomScreen( shouldShow );\n\t}\n\n\tfunction setColor( color ) {\n\t\tsetCurrentValue( color );\n\t\tif ( isSolidSegment && onColorChange && onGradientChange ) {\n\t\t\tonColorChange( color );\n\t\t\tonGradientChange( '' );\n\t\t} else if ( isSolidSegment && onColorChange ) {\n\t\t\tonColorChange( color );\n\t\t} else if ( ! isSolidSegment && onGradientChange ) {\n\t\t\tonGradientChange( color );\n\t\t}\n\t}\n\n\tfunction getFooter() {\n\t\tif ( onGradientChange ) {\n\t\t\treturn (\n\t\t\t\t<SegmentedControls\n\t\t\t\t\tsegments={ segments }\n\t\t\t\t\tsegmentHandler={ ( item ) => setCurrentSegment( item ) }\n\t\t\t\t\tselectedIndex={ selectedSegmentIndex }\n\t\t\t\t\taddonLeft={\n\t\t\t\t\t\tcurrentValue && (\n\t\t\t\t\t\t\t<ColorIndicator\n\t\t\t\t\t\t\t\tcolor={ currentValue }\n\t\t\t\t\t\t\t\tstyle={ styles.colorIndicator }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<View style={ styles.footer }>\n\t\t\t\t<View style={ styles.flex }>\n\t\t\t\t\t{ currentValue && (\n\t\t\t\t\t\t<ColorIndicator\n\t\t\t\t\t\t\tcolor={ currentValue }\n\t\t\t\t\t\t\tstyle={ styles.colorIndicator }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</View>\n\t\t\t\t<Text\n\t\t\t\t\tstyle={ styles.selectColorText }\n\t\t\t\t\tmaxFontSizeMultiplier={ 2 }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Select a color' ) }\n\t\t\t\t</Text>\n\t\t\t\t<View style={ styles.flex } />\n\t\t\t</View>\n\t\t);\n\t}\n\n\treturn (\n\t\t<View renderToHardwareTextureAndroid>\n\t\t\t{ isCustomScreen && (\n\t\t\t\t<View>\n\t\t\t\t\t<ColorPicker\n\t\t\t\t\t\tshouldEnableBottomSheetScroll={\n\t\t\t\t\t\t\tshouldEnableBottomSheetScroll\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshouldDisableBottomSheetMaxHeight={\n\t\t\t\t\t\t\tshouldDisableBottomSheetMaxHeight\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetColor={ setColor }\n\t\t\t\t\t\tactiveColor={ currentValue }\n\t\t\t\t\t\tisGradientColor={ isGradientColor }\n\t\t\t\t\t\tonNavigationBack={ () => {\n\t\t\t\t\t\t\tonCustomScreenToggle( false );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonCloseBottomSheet={ onCloseBottomSheet }\n\t\t\t\t\t\tisBottomSheetContentScrolling={\n\t\t\t\t\t\t\tisBottomSheetContentScrolling\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t) }\n\t\t\t{ ! isCustomScreen && (\n\t\t\t\t<View>\n\t\t\t\t\t<NavigationHeader\n\t\t\t\t\t\tscreen={ label }\n\t\t\t\t\t\tleftButtonOnPress={ () =>\n\t\t\t\t\t\t\tonReplaceSubsheet( subsheets[ 0 ] )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<ColorPalette\n\t\t\t\t\t\tsetColor={ setColor }\n\t\t\t\t\t\tactiveColor={ currentValue }\n\t\t\t\t\t\tisGradientColor={ isGradientColor }\n\t\t\t\t\t\tcurrentSegment={ currentSegment }\n\t\t\t\t\t\tisCustomScreen={ isCustomScreen }\n\t\t\t\t\t\tonCustomPress={ () => {\n\t\t\t\t\t\t\tonCustomScreenToggle( true );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tshouldEnableBottomSheetScroll={\n\t\t\t\t\t\t\tshouldEnableBottomSheetScroll\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdefaultSettings={ defaultSettings }\n\t\t\t\t\t/>\n\t\t\t\t\t<View style={ horizontalSeparatorStyle } />\n\t\t\t\t\t{ getFooter() }\n\t\t\t\t</View>\n\t\t\t) }\n\t\t</View>\n\t);\n}\n\nexport default ColorSettings;\n"]}