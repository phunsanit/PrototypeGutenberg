{"version":3,"sources":["@wordpress/editor/src/components/provider/index.js"],"names":["map","pick","defaultTo","memize","compose","Component","withDispatch","withSelect","__","EntityProvider","BlockEditorProvider","BlockContextProvider","__unstableEditorStyles","EditorStyles","apiFetch","addQueryArgs","decodeEntities","withRegistryProvider","mediaUpload","ReusableBlocksButtons","ConvertToGroupButtons","fetchLinkSuggestions","search","perPage","path","per_page","type","posts","post","id","url","title","subtype","EditorProvider","props","arguments","getBlockEditorSettings","maxSize","getDefaultBlockContext","recovery","updatePostLock","settings","postLock","setupEditor","initialEdits","template","autosave","createWarningNotice","actions","label","editLink","reusableBlocks","__experimentalFetchReusableBlocks","hasUploadPermissions","canUserUseUnfilteredHTML","undo","shouldInsertAtTheTop","undefined","__experimentalReusableBlocks","__experimentalFetchLinkSuggestions","__experimentalCanUserUseUnfilteredHTML","__experimentalUndo","__experimentalShouldInsertAtTheTop","postId","postType","updateEditorSettings","prevProps","tearDownEditor","children","blocks","resetEditorBlocks","selectionStart","selectionEnd","isReady","resetEditorBlocksWithoutUndoLevel","isPostTitleSelected","editorSettings","defaultBlockContext","styles","select","isEditorReady","__unstableIsEditorReady","getEditorBlocks","getEditorSelectionStart","getEditorSelectionEnd","__experimentalGetReusableBlocks","canUser","dispatch","__experimentalTearDownEditor","options","__unstableShouldCreateUndoLevel"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { map, pick, defaultTo } from 'lodash';\nimport memize from 'memize';\n\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { Component } from '@wordpress/element';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { EntityProvider } from '@wordpress/core-data';\nimport {\n\tBlockEditorProvider,\n\tBlockContextProvider,\n\t__unstableEditorStyles as EditorStyles,\n} from '@wordpress/block-editor';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\n\n/**\n * Internal dependencies\n */\nimport withRegistryProvider from './with-registry-provider';\nimport { mediaUpload } from '../../utils';\nimport ReusableBlocksButtons from '../reusable-blocks-buttons';\nimport ConvertToGroupButtons from '../convert-to-group-buttons';\n\n/**\n * Fetches link suggestions from the API. This function is an exact copy of a function found at:\n *\n * wordpress/editor/src/components/provider/index.js\n *\n * It seems like there is no suitable package to import this from. Ideally it would be either part of core-data.\n * Until we refactor it, just copying the code is the simplest solution.\n *\n * @param {Object} search\n * @param {number} perPage\n * @return {Promise<Object[]>} List of suggestions\n */\nconst fetchLinkSuggestions = async ( search, { perPage = 20 } = {} ) => {\n\tconst posts = await apiFetch( {\n\t\tpath: addQueryArgs( '/wp/v2/search', {\n\t\t\tsearch,\n\t\t\tper_page: perPage,\n\t\t\ttype: 'post',\n\t\t} ),\n\t} );\n\n\treturn map( posts, ( post ) => ( {\n\t\tid: post.id,\n\t\turl: post.url,\n\t\ttitle: decodeEntities( post.title ) || __( '(no title)' ),\n\t\ttype: post.subtype || post.type,\n\t} ) );\n};\n\nclass EditorProvider extends Component {\n\tconstructor( props ) {\n\t\tsuper( ...arguments );\n\n\t\tthis.getBlockEditorSettings = memize( this.getBlockEditorSettings, {\n\t\t\tmaxSize: 1,\n\t\t} );\n\n\t\tthis.getDefaultBlockContext = memize( this.getDefaultBlockContext, {\n\t\t\tmaxSize: 1,\n\t\t} );\n\n\t\t// Assume that we don't need to initialize in the case of an error recovery.\n\t\tif ( props.recovery ) {\n\t\t\treturn;\n\t\t}\n\n\t\tprops.updatePostLock( props.settings.postLock );\n\t\tprops.setupEditor(\n\t\t\tprops.post,\n\t\t\tprops.initialEdits,\n\t\t\tprops.settings.template\n\t\t);\n\n\t\tif ( props.settings.autosave ) {\n\t\t\tprops.createWarningNotice(\n\t\t\t\t__(\n\t\t\t\t\t'There is an autosave of this post that is more recent than the version below.'\n\t\t\t\t),\n\t\t\t\t{\n\t\t\t\t\tid: 'autosave-exists',\n\t\t\t\t\tactions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __( 'View the autosave' ),\n\t\t\t\t\t\t\turl: props.settings.autosave.editLink,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tgetBlockEditorSettings(\n\t\tsettings,\n\t\treusableBlocks,\n\t\t__experimentalFetchReusableBlocks,\n\t\thasUploadPermissions,\n\t\tcanUserUseUnfilteredHTML,\n\t\tundo,\n\t\tshouldInsertAtTheTop\n\t) {\n\t\treturn {\n\t\t\t...pick( settings, [\n\t\t\t\t'__experimentalBlockDirectory',\n\t\t\t\t'__experimentalBlockPatterns',\n\t\t\t\t'__experimentalBlockPatternCategories',\n\t\t\t\t'__experimentalDisableCustomUnits',\n\t\t\t\t'__experimentalDisableCustomLineHeight',\n\t\t\t\t'__experimentalEnableLegacyWidgetBlock',\n\t\t\t\t'__experimentalEnableFullSiteEditing',\n\t\t\t\t'__experimentalEnableFullSiteEditingDemo',\n\t\t\t\t'__experimentalFeatures',\n\t\t\t\t'__experimentalGlobalStylesUserEntityId',\n\t\t\t\t'__experimentalGlobalStylesBase',\n\t\t\t\t'__experimentalPreferredStyleVariations',\n\t\t\t\t'alignWide',\n\t\t\t\t'allowedBlockTypes',\n\t\t\t\t'availableLegacyWidgets',\n\t\t\t\t'bodyPlaceholder',\n\t\t\t\t'codeEditingEnabled',\n\t\t\t\t'colors',\n\t\t\t\t'disableCustomColors',\n\t\t\t\t'disableCustomFontSizes',\n\t\t\t\t'disableCustomGradients',\n\t\t\t\t'focusMode',\n\t\t\t\t'fontSizes',\n\t\t\t\t'gradients',\n\t\t\t\t'hasFixedToolbar',\n\t\t\t\t'hasPermissionsToManageWidgets',\n\t\t\t\t'imageSizes',\n\t\t\t\t'imageDimensions',\n\t\t\t\t'isRTL',\n\t\t\t\t'maxWidth',\n\t\t\t\t'onUpdateDefaultBlockStyles',\n\t\t\t\t'styles',\n\t\t\t\t'template',\n\t\t\t\t'templateLock',\n\t\t\t\t'titlePlaceholder',\n\t\t\t] ),\n\t\t\tmediaUpload: hasUploadPermissions ? mediaUpload : undefined,\n\t\t\t__experimentalReusableBlocks: reusableBlocks,\n\t\t\t__experimentalFetchReusableBlocks,\n\t\t\t__experimentalFetchLinkSuggestions: fetchLinkSuggestions,\n\t\t\t__experimentalCanUserUseUnfilteredHTML: canUserUseUnfilteredHTML,\n\t\t\t__experimentalUndo: undo,\n\t\t\t__experimentalShouldInsertAtTheTop: shouldInsertAtTheTop,\n\t\t};\n\t}\n\n\tgetDefaultBlockContext( postId, postType ) {\n\t\treturn { postId, postType };\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.updateEditorSettings( this.props.settings );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( this.props.settings !== prevProps.settings ) {\n\t\t\tthis.props.updateEditorSettings( this.props.settings );\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.props.tearDownEditor();\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tcanUserUseUnfilteredHTML,\n\t\t\tchildren,\n\t\t\tpost,\n\t\t\tblocks,\n\t\t\tresetEditorBlocks,\n\t\t\tselectionStart,\n\t\t\tselectionEnd,\n\t\t\tisReady,\n\t\t\tsettings,\n\t\t\treusableBlocks,\n\t\t\tresetEditorBlocksWithoutUndoLevel,\n\t\t\thasUploadPermissions,\n\t\t\tisPostTitleSelected,\n\t\t\t__experimentalFetchReusableBlocks,\n\t\t\tundo,\n\t\t} = this.props;\n\n\t\tif ( ! isReady ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst editorSettings = this.getBlockEditorSettings(\n\t\t\tsettings,\n\t\t\treusableBlocks,\n\t\t\t__experimentalFetchReusableBlocks,\n\t\t\thasUploadPermissions,\n\t\t\tcanUserUseUnfilteredHTML,\n\t\t\tundo,\n\t\t\tisPostTitleSelected\n\t\t);\n\n\t\tconst defaultBlockContext = this.getDefaultBlockContext(\n\t\t\tpost.id,\n\t\t\tpost.type\n\t\t);\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<EditorStyles styles={ settings.styles } />\n\t\t\t\t<EntityProvider kind=\"root\" type=\"site\">\n\t\t\t\t\t<EntityProvider\n\t\t\t\t\t\tkind=\"postType\"\n\t\t\t\t\t\ttype={ post.type }\n\t\t\t\t\t\tid={ post.id }\n\t\t\t\t\t>\n\t\t\t\t\t\t<BlockContextProvider value={ defaultBlockContext }>\n\t\t\t\t\t\t\t<BlockEditorProvider\n\t\t\t\t\t\t\t\tvalue={ blocks }\n\t\t\t\t\t\t\t\tonInput={ resetEditorBlocksWithoutUndoLevel }\n\t\t\t\t\t\t\t\tonChange={ resetEditorBlocks }\n\t\t\t\t\t\t\t\tselectionStart={ selectionStart }\n\t\t\t\t\t\t\t\tselectionEnd={ selectionEnd }\n\t\t\t\t\t\t\t\tsettings={ editorSettings }\n\t\t\t\t\t\t\t\tuseSubRegistry={ false }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ children }\n\t\t\t\t\t\t\t\t<ReusableBlocksButtons />\n\t\t\t\t\t\t\t\t<ConvertToGroupButtons />\n\t\t\t\t\t\t\t</BlockEditorProvider>\n\t\t\t\t\t\t</BlockContextProvider>\n\t\t\t\t\t</EntityProvider>\n\t\t\t\t</EntityProvider>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithRegistryProvider,\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tcanUserUseUnfilteredHTML,\n\t\t\t__unstableIsEditorReady: isEditorReady,\n\t\t\tgetEditorBlocks,\n\t\t\tgetEditorSelectionStart,\n\t\t\tgetEditorSelectionEnd,\n\t\t\t__experimentalGetReusableBlocks,\n\t\t\tisPostTitleSelected,\n\t\t} = select( 'core/editor' );\n\t\tconst { canUser } = select( 'core' );\n\n\t\treturn {\n\t\t\tcanUserUseUnfilteredHTML: canUserUseUnfilteredHTML(),\n\t\t\tisReady: isEditorReady(),\n\t\t\tblocks: getEditorBlocks(),\n\t\t\tselectionStart: getEditorSelectionStart(),\n\t\t\tselectionEnd: getEditorSelectionEnd(),\n\t\t\treusableBlocks: __experimentalGetReusableBlocks(),\n\t\t\thasUploadPermissions: defaultTo(\n\t\t\t\tcanUser( 'create', 'media' ),\n\t\t\t\ttrue\n\t\t\t),\n\t\t\t// This selector is only defined on mobile.\n\t\t\tisPostTitleSelected: isPostTitleSelected && isPostTitleSelected(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst {\n\t\t\tsetupEditor,\n\t\t\tupdatePostLock,\n\t\t\tresetEditorBlocks,\n\t\t\tupdateEditorSettings,\n\t\t\t__experimentalFetchReusableBlocks,\n\t\t\t__experimentalTearDownEditor,\n\t\t\tundo,\n\t\t} = dispatch( 'core/editor' );\n\t\tconst { createWarningNotice } = dispatch( 'core/notices' );\n\n\t\treturn {\n\t\t\tsetupEditor,\n\t\t\tupdatePostLock,\n\t\t\tcreateWarningNotice,\n\t\t\tresetEditorBlocks,\n\t\t\tupdateEditorSettings,\n\t\t\tresetEditorBlocksWithoutUndoLevel( blocks, options ) {\n\t\t\t\tresetEditorBlocks( blocks, {\n\t\t\t\t\t...options,\n\t\t\t\t\t__unstableShouldCreateUndoLevel: false,\n\t\t\t\t} );\n\t\t\t},\n\t\t\ttearDownEditor: __experimentalTearDownEditor,\n\t\t\t__experimentalFetchReusableBlocks,\n\t\t\tundo,\n\t\t};\n\t} ),\n] )( EditorProvider );\n"]}