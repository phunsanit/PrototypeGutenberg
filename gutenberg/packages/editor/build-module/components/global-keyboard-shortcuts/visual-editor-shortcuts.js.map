{"version":3,"sources":["@wordpress/editor/src/components/global-keyboard-shortcuts/visual-editor-shortcuts.js"],"names":["useShortcut","useDispatch","useSelect","deprecated","BlockEditorKeyboardShortcuts","SaveShortcut","VisualEditorGlobalKeyboardShortcuts","redo","undo","savePost","isEditedPostDirty","select","event","preventDefault","bindGlobal","EditorGlobalKeyboardShortcuts","alternative","plugin"],"mappings":";;AAAA;;;AAGA,SAASA,WAAT,QAA4B,+BAA5B;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,iBAAvC;AACA,OAAOC,UAAP,MAAuB,uBAAvB;AACA,SAASC,4BAAT,QAA6C,yBAA7C;AAEA;;;;AAGA,OAAOC,YAAP,MAAyB,iBAAzB;;AAEA,SAASC,mCAAT,GAA+C;AAAA,qBACbL,WAAW,CAAE,aAAF,CADE;AAAA,MACtCM,IADsC,gBACtCA,IADsC;AAAA,MAChCC,IADgC,gBAChCA,IADgC;AAAA,MAC1BC,QAD0B,gBAC1BA,QAD0B;;AAE9C,MAAMC,iBAAiB,GAAGR,SAAS,CAClC,UAAES,MAAF;AAAA,WAAcA,MAAM,CAAE,aAAF,CAAN,CAAwBD,iBAAtC;AAAA,GADkC,EAElC,EAFkC,CAAnC;AAKAV,EAAAA,WAAW,CACV,kBADU,EAEV,UAAEY,KAAF,EAAa;AACZJ,IAAAA,IAAI;AACJI,IAAAA,KAAK,CAACC,cAAN;AACA,GALS,EAMV;AAAEC,IAAAA,UAAU,EAAE;AAAd,GANU,CAAX;AASAd,EAAAA,WAAW,CACV,kBADU,EAEV,UAAEY,KAAF,EAAa;AACZL,IAAAA,IAAI;AACJK,IAAAA,KAAK,CAACC,cAAN;AACA,GALS,EAMV;AAAEC,IAAAA,UAAU,EAAE;AAAd,GANU,CAAX;AASAd,EAAAA,WAAW,CACV,kBADU,EAEV,UAAEY,KAAF,EAAa;AACZA,IAAAA,KAAK,CAACC,cAAN,GADY,CAGZ;AACA;AACA;AACA;AACA;;AACA,QAAK,CAAEH,iBAAiB,EAAxB,EAA6B;AAC5B;AACA;;AAEDD,IAAAA,QAAQ;AACR,GAfS,EAgBV;AAAEK,IAAAA,UAAU,EAAE;AAAd,GAhBU,CAAX;AAmBA,SACC,8BACC,cAAC,4BAAD,OADD,EAEC,cAAC,YAAD,OAFD,CADD;AAMA;;AAED,eAAeR,mCAAf;AAEA,OAAO,SAASS,6BAAT,GAAyC;AAC/CZ,EAAAA,UAAU,CAAE,+BAAF,EAAmC;AAC5Ca,IAAAA,WAAW,EAAE,qCAD+B;AAE5CC,IAAAA,MAAM,EAAE;AAFoC,GAAnC,CAAV;AAKA,SAAO,cAAC,mCAAD,OAAP;AACA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useShortcut } from '@wordpress/keyboard-shortcuts';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\nimport { BlockEditorKeyboardShortcuts } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport SaveShortcut from './save-shortcut';\n\nfunction VisualEditorGlobalKeyboardShortcuts() {\n\tconst { redo, undo, savePost } = useDispatch( 'core/editor' );\n\tconst isEditedPostDirty = useSelect(\n\t\t( select ) => select( 'core/editor' ).isEditedPostDirty,\n\t\t[]\n\t);\n\n\tuseShortcut(\n\t\t'core/editor/undo',\n\t\t( event ) => {\n\t\t\tundo();\n\t\t\tevent.preventDefault();\n\t\t},\n\t\t{ bindGlobal: true }\n\t);\n\n\tuseShortcut(\n\t\t'core/editor/redo',\n\t\t( event ) => {\n\t\t\tredo();\n\t\t\tevent.preventDefault();\n\t\t},\n\t\t{ bindGlobal: true }\n\t);\n\n\tuseShortcut(\n\t\t'core/editor/save',\n\t\t( event ) => {\n\t\t\tevent.preventDefault();\n\n\t\t\t// TODO: This should be handled in the `savePost` effect in\n\t\t\t// considering `isSaveable`. See note on `isEditedPostSaveable`\n\t\t\t// selector about dirtiness and meta-boxes.\n\t\t\t//\n\t\t\t// See: `isEditedPostSaveable`\n\t\t\tif ( ! isEditedPostDirty() ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsavePost();\n\t\t},\n\t\t{ bindGlobal: true }\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<BlockEditorKeyboardShortcuts />\n\t\t\t<SaveShortcut />\n\t\t</>\n\t);\n}\n\nexport default VisualEditorGlobalKeyboardShortcuts;\n\nexport function EditorGlobalKeyboardShortcuts() {\n\tdeprecated( 'EditorGlobalKeyboardShortcuts', {\n\t\talternative: 'VisualEditorGlobalKeyboardShortcuts',\n\t\tplugin: 'Gutenberg',\n\t} );\n\n\treturn <VisualEditorGlobalKeyboardShortcuts />;\n}\n"]}