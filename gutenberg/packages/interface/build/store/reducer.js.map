{"version":3,"sources":["@wordpress/interface/src/store/reducer.js"],"names":["createWithInitialState","initialState","reducer","state","action","singleEnableItems","type","itemType","scope","item","DEFAULTS","enableItems","newTypeState","multipleEnableItems","isEnable","currentTypeState","currentScopeState","combineReducers"],"mappings":";;;;;;;;;;;;;AAGA;;AAKA;;AAKA;;;;;;AAEA;;;;;;;;AAQA,IAAMA,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAEC,YAAF;AAAA,SAAoB,UAAEC,OAAF,EAAe;AACjE,WAAO;AAAA,UAAEC,KAAF,uEAAUF,YAAV;AAAA,UAAwBG,MAAxB;AAAA,aAAoCF,OAAO,CAAEC,KAAF,EAASC,MAAT,CAA3C;AAAA,KAAP;AACA,GAF8B;AAAA,CAA/B;AAIA;;;;;;;;;;AAQO,SAASC,iBAAT,GAGL;AAAA,MAFDF,KAEC,uEAFO,EAEP;;AAAA;AAAA,MADCG,IACD,QADCA,IACD;AAAA,MADOC,QACP,QADOA,QACP;AAAA,MADiBC,KACjB,QADiBA,KACjB;AAAA,MADwBC,IACxB,QADwBA,IACxB;;AACD,MAAKH,IAAI,KAAK,wBAAT,IAAqC,CAAEC,QAAvC,IAAmD,CAAEC,KAA1D,EAAkE;AACjE,WAAOL,KAAP;AACA;;AAED,MACC,CAAEM,IAAF,IACA,CAAE,iBAAKC,mBAASC,WAAT,CAAqBN,iBAA1B,EAA6C,CAAEE,QAAF,EAAYC,KAAZ,CAA7C,CAFH,EAGE;AACD,QAAMI,YAAY,GAAG,kBAAMT,KAAK,CAAEI,QAAF,CAAX,EAAyB,CAAEC,KAAF,CAAzB,CAArB;AACA,WAAO,qBAASI,YAAT,IACJ,kBAAMT,KAAN,EAAa,CAAEI,QAAF,CAAb,CADI,qBAGDJ,KAHC,oCAIFI,QAJE,EAIUK,YAJV,EAAP;AAMA;;AACD,2BACIT,KADJ,oCAEGI,QAFH,oBAGKJ,KAAK,CAAEI,QAAF,CAHV,oCAIIC,KAJJ,EAIaC,IAAI,IAAI,IAJrB;AAOA;AAED;;;;;;;;;;AAQO,SAASI,mBAAT,GAGL;AAAA,MAFDV,KAEC,uEAFO,EAEP;;AAAA;AAAA,MADCG,IACD,SADCA,IACD;AAAA,MADOC,QACP,SADOA,QACP;AAAA,MADiBC,KACjB,SADiBA,KACjB;AAAA,MADwBC,IACxB,SADwBA,IACxB;AAAA,MAD8BK,QAC9B,SAD8BA,QAC9B;;AACD,MACCR,IAAI,KAAK,0BAAT,IACA,CAAEC,QADF,IAEA,CAAEC,KAFF,IAGA,CAAEC,IAHF,IAIA,iBAAKN,KAAL,EAAY,CAAEI,QAAF,EAAYC,KAAZ,EAAmBC,IAAnB,CAAZ,MAA4CK,QAL7C,EAME;AACD,WAAOX,KAAP;AACA;;AACD,MAAMY,gBAAgB,GAAGZ,KAAK,CAAEI,QAAF,CAAL,IAAqB,EAA9C;AACA,MAAMS,iBAAiB,GAAGD,gBAAgB,CAAEP,KAAF,CAAhB,IAA6B,EAAvD;AAEA,2BACIL,KADJ,oCAEGI,QAFH,oBAGKQ,gBAHL,oCAIIP,KAJJ,oBAKMQ,iBALN,oCAMKP,IANL,EAMaK,QAAQ,IAAI,KANzB;AAUA;;AAED,IAAMH,WAAW,GAAG,2BAAiB;AACpCN,EAAAA,iBAAiB,EAAjBA,iBADoC;AAEpCQ,EAAAA,mBAAmB,EAAnBA;AAFoC,CAAjB,CAApB;;eAKe,kBAAM,CAAEI,qBAAF,EAAmBjB,sBAAsB,CAAEU,kBAAF,CAAzC,CAAN,EACd;AACCC,EAAAA,WAAW,EAAXA;AADD,CADc,C","sourcesContent":["/**\n * External dependencies\n */\nimport { flow, get, isEmpty, omit } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { combineReducers } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { DEFAULTS } from './defaults';\n\n/**\n * Higher-order reducer creator which provides the given initial state for the\n * original reducer.\n *\n * @param {*} initialState Initial state to provide to reducer.\n *\n * @return {Function} Higher-order reducer.\n */\nconst createWithInitialState = ( initialState ) => ( reducer ) => {\n\treturn ( state = initialState, action ) => reducer( state, action );\n};\n\n/**\n * Reducer to keep tract of the active area per scope.\n *\n * @param {boolean}  state   Previous state.\n * @param {Object}   action  Action Object.\n *\n * @return {Object} Updated state.\n */\nexport function singleEnableItems(\n\tstate = {},\n\t{ type, itemType, scope, item }\n) {\n\tif ( type !== 'SET_SINGLE_ENABLE_ITEM' || ! itemType || ! scope ) {\n\t\treturn state;\n\t}\n\n\tif (\n\t\t! item &&\n\t\t! get( DEFAULTS.enableItems.singleEnableItems, [ itemType, scope ] )\n\t) {\n\t\tconst newTypeState = omit( state[ itemType ], [ scope ] );\n\t\treturn isEmpty( newTypeState )\n\t\t\t? omit( state, [ itemType ] )\n\t\t\t: {\n\t\t\t\t\t...state,\n\t\t\t\t\t[ itemType ]: newTypeState,\n\t\t\t  };\n\t}\n\treturn {\n\t\t...state,\n\t\t[ itemType ]: {\n\t\t\t...state[ itemType ],\n\t\t\t[ scope ]: item || null,\n\t\t},\n\t};\n}\n\n/**\n * Reducer keeping track of the \"pinned\" items per scope\n *\n * @param {boolean}  state   Previous state.\n * @param {Object}   action  Action Object.\n *\n * @return {Object} Updated state.\n */\nexport function multipleEnableItems(\n\tstate = {},\n\t{ type, itemType, scope, item, isEnable }\n) {\n\tif (\n\t\ttype !== 'SET_MULTIPLE_ENABLE_ITEM' ||\n\t\t! itemType ||\n\t\t! scope ||\n\t\t! item ||\n\t\tget( state, [ itemType, scope, item ] ) === isEnable\n\t) {\n\t\treturn state;\n\t}\n\tconst currentTypeState = state[ itemType ] || {};\n\tconst currentScopeState = currentTypeState[ scope ] || {};\n\n\treturn {\n\t\t...state,\n\t\t[ itemType ]: {\n\t\t\t...currentTypeState,\n\t\t\t[ scope ]: {\n\t\t\t\t...currentScopeState,\n\t\t\t\t[ item ]: isEnable || false,\n\t\t\t},\n\t\t},\n\t};\n}\n\nconst enableItems = combineReducers( {\n\tsingleEnableItems,\n\tmultipleEnableItems,\n} );\n\nexport default flow( [ combineReducers, createWithInitialState( DEFAULTS ) ] )(\n\t{\n\t\tenableItems,\n\t}\n);\n"]}