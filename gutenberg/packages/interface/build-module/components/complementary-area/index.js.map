{"version":3,"sources":["@wordpress/interface/src/components/complementary-area/index.js"],"names":["classnames","Animate","Button","Panel","Slot","Fill","useDispatch","useSelect","__","withPluginContext","starEmpty","starFilled","useEffect","useRef","ComplementaryAreaHeader","PinnedItems","ComplementaryAreaSlot","scope","props","ComplementaryAreaFill","children","className","origin","useAdjustComplementaryListener","identifier","activeArea","isActive","isSmall","previousIsSmall","shouldOpenWhenNotSmall","enableComplementaryArea","disableComplementaryArea","current","ComplementaryArea","closeLabel","header","headerClassName","icon","isPinnable","panelClassName","smallScreenTitle","title","toggleShortcut","select","getActiveComplementaryArea","isItemPinned","_activeArea","isPinned","isViewportMatch","pinItem","unpinItem","ComplementaryAreaWrapped","context","ownProps","name"],"mappings":";;;;AAAA;;;AAGA,OAAOA,UAAP,MAAuB,YAAvB;AAEA;;;;AAGA,SAASC,OAAT,EAAkBC,MAAlB,EAA0BC,KAA1B,EAAiCC,IAAjC,EAAuCC,IAAvC,QAAmD,uBAAnD;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,iBAAvC;AACA,SAASC,EAAT,QAAmB,iBAAnB;AACA,SAASC,iBAAT,QAAkC,oBAAlC;AACA,SAASC,SAAT,EAAoBC,UAApB,QAAsC,kBAAtC;AACA,SAASC,SAAT,EAAoBC,MAApB,QAAkC,oBAAlC;AAEA;;;;AAGA,OAAOC,uBAAP,MAAoC,8BAApC;AACA,OAAOC,WAAP,MAAwB,iBAAxB;;AAEA,SAASC,qBAAT,OAAsD;AAAA,MAApBC,KAAoB,QAApBA,KAAoB;AAAA,MAAVC,KAAU;;AACrD,SAAO,cAAC,IAAD;AAAM,IAAA,IAAI,8BAAyBD,KAAzB;AAAV,KAAmDC,KAAnD,EAAP;AACA;;AAED,SAASC,qBAAT,QAAiE;AAAA,MAA/BF,KAA+B,SAA/BA,KAA+B;AAAA,MAAxBG,QAAwB,SAAxBA,QAAwB;AAAA,MAAdC,SAAc,SAAdA,SAAc;AAChE,SACC,cAAC,IAAD;AAAM,IAAA,IAAI,8BAAyBJ,KAAzB;AAAV,KACC,cAAC,OAAD;AAAS,IAAA,IAAI,EAAC,UAAd;AAAyB,IAAA,OAAO,EAAG;AAAEK,MAAAA,MAAM,EAAE;AAAV;AAAnC,KACG;AAAA,WAAM;AAAK,MAAA,SAAS,EAAGD;AAAjB,OAA+BD,QAA/B,CAAN;AAAA,GADH,CADD,CADD;AAOA;;AAED,SAASG,8BAAT,CACCN,KADD,EAECO,UAFD,EAGCC,UAHD,EAICC,QAJD,EAKCC,OALD,EAME;AACD,MAAMC,eAAe,GAAGf,MAAM,CAAE,KAAF,CAA9B;AACA,MAAMgB,sBAAsB,GAAGhB,MAAM,CAAE,KAAF,CAArC;;AAFC,qBAG6DP,WAAW,CACxE,gBADwE,CAHxE;AAAA,MAGOwB,uBAHP,gBAGOA,uBAHP;AAAA,MAGgCC,wBAHhC,gBAGgCA,wBAHhC;;AAMDnB,EAAAA,SAAS,CAAE,YAAM;AAChB;AACA,QAAKc,QAAQ,IAAIC,OAAZ,IAAuB,CAAEC,eAAe,CAACI,OAA9C,EAAwD;AACvD;AACAD,MAAAA,wBAAwB,CAAEd,KAAF,CAAxB,CAFuD,CAGvD;;AACAY,MAAAA,sBAAsB,CAACG,OAAvB,GAAiC,IAAjC;AACA,KALD,MAKO,KACN;AACA;AACAH,IAAAA,sBAAsB,CAACG,OAAvB,IACA,CAAEL,OADF,IAEAC,eAAe,CAACI,OALV,EAML;AACD;AACAH,MAAAA,sBAAsB,CAACG,OAAvB,GAAiC,KAAjC,CAFC,CAGD;;AACAF,MAAAA,uBAAuB,CAAEb,KAAF,EAASO,UAAT,CAAvB;AACA,KAXM,MAWA,KACN;AACA;AACAK,IAAAA,sBAAsB,CAACG,OAAvB,IACAP,UADA,IAEAA,UAAU,KAAKD,UALT,EAML;AACDK,MAAAA,sBAAsB,CAACG,OAAvB,GAAiC,KAAjC;AACA;;AACD,QAAKL,OAAO,KAAKC,eAAe,CAACI,OAAjC,EAA2C;AAC1CJ,MAAAA,eAAe,CAACI,OAAhB,GAA0BL,OAA1B;AACA;AACD,GA9BQ,EA8BN,CAAED,QAAF,EAAYC,OAAZ,EAAqBV,KAArB,EAA4BO,UAA5B,EAAwCC,UAAxC,CA9BM,CAAT;AA+BA;;AAED,SAASQ,iBAAT,QAcI;AAAA,MAbHb,QAaG,SAbHA,QAaG;AAAA,MAZHC,SAYG,SAZHA,SAYG;AAAA,+BAXHa,UAWG;AAAA,MAXHA,UAWG,iCAXU1B,EAAE,CAAE,cAAF,CAWZ;AAAA,MAVHgB,UAUG,SAVHA,UAUG;AAAA,MATHW,MASG,SATHA,MASG;AAAA,MARHC,eAQG,SARHA,eAQG;AAAA,MAPHC,IAOG,SAPHA,IAOG;AAAA,+BANHC,UAMG;AAAA,MANHA,UAMG,iCANU,IAMV;AAAA,MALHC,cAKG,SALHA,cAKG;AAAA,MAJHtB,KAIG,SAJHA,KAIG;AAAA,MAHHuB,gBAGG,SAHHA,gBAGG;AAAA,MAFHC,KAEG,SAFHA,KAEG;AAAA,MADHC,cACG,SADHA,cACG;;AAAA,mBACiDnC,SAAS,CAC5D,UAAEoC,MAAF,EAAc;AAAA,kBACwCA,MAAM,CAC1D,gBAD0D,CAD9C;AAAA,QACLC,0BADK,WACLA,0BADK;AAAA,QACuBC,YADvB,WACuBA,YADvB;;AAIb,QAAMC,WAAW,GAAGF,0BAA0B,CAAE3B,KAAF,CAA9C;;AACA,WAAO;AACNS,MAAAA,QAAQ,EAAEoB,WAAW,KAAKtB,UADpB;AAENuB,MAAAA,QAAQ,EAAEF,YAAY,CAAE5B,KAAF,EAASO,UAAT,CAFhB;AAGNC,MAAAA,UAAU,EAAEqB,WAHN;AAINnB,MAAAA,OAAO,EAAEgB,MAAM,CAAE,eAAF,CAAN,CAA0BK,eAA1B,CACR,UADQ;AAJH,KAAP;AAQA,GAd2D,EAe5D,CAAExB,UAAF,EAAcP,KAAd,CAf4D,CAD1D;AAAA,MACKS,QADL,cACKA,QADL;AAAA,MACeqB,QADf,cACeA,QADf;AAAA,MACyBtB,UADzB,cACyBA,UADzB;AAAA,MACqCE,OADrC,cACqCA,OADrC;;AAkBHJ,EAAAA,8BAA8B,CAC7BN,KAD6B,EAE7BO,UAF6B,EAG7BC,UAH6B,EAI7BC,QAJ6B,EAK7BC,OAL6B,CAA9B;;AAlBG,sBAyB2DrB,WAAW,CACxE,gBADwE,CAzBtE;AAAA,MAyBKwB,uBAzBL,iBAyBKA,uBAzBL;AAAA,MAyB8BC,wBAzB9B,iBAyB8BA,wBAzB9B;;AAAA,sBA4B4BzB,WAAW,CAAE,gBAAF,CA5BvC;AAAA,MA4BK2C,OA5BL,iBA4BKA,OA5BL;AAAA,MA4BcC,SA5Bd,iBA4BcA,SA5Bd;;AA6BH,SACC,8BACGH,QAAQ,IAAIT,UAAZ,IACD,cAAC,WAAD;AAAa,IAAA,KAAK,EAAGrB;AAArB,KACC,cAAC,MAAD;AACC,IAAA,IAAI,EAAGoB,IADR;AAEC,IAAA,KAAK,EAAGI,KAFT;AAGC,IAAA,OAAO,EAAG;AAAA,aACTf,QAAQ,GACLK,wBAAwB,CAAEd,KAAF,CADnB,GAELa,uBAAuB,CAAEb,KAAF,EAASO,UAAT,CAHjB;AAAA,KAHX;AAQC,IAAA,SAAS,EAAGE,QARb;AASC,qBAAgBA,QATjB;AAUC,IAAA,QAAQ,EAAGgB;AAVZ,IADD,CAFF,EAiBGhB,QAAQ,IACT,cAAC,qBAAD;AACC,IAAA,SAAS,EAAG1B,UAAU,CACrB,8BADqB,EAErBqB,SAFqB,CADvB;AAKC,IAAA,KAAK,EAAGJ;AALT,KAOC,cAAC,uBAAD;AACC,IAAA,SAAS,EAAGmB,eADb;AAEC,IAAA,UAAU,EAAGF,UAFd;AAGC,IAAA,OAAO,EAAG;AAAA,aAAMH,wBAAwB,CAAEd,KAAF,CAA9B;AAAA,KAHX;AAIC,IAAA,gBAAgB,EAAGuB,gBAJpB;AAKC,IAAA,cAAc,EAAGE;AALlB,KAOGP,MAAM,IACP,8BACC,8BAAUM,KAAV,CADD,EAEGH,UAAU,IACX,cAAC,MAAD;AACC,IAAA,SAAS,EAAC,8CADX;AAEC,IAAA,IAAI,EACHS,QAAQ,GAAGpC,UAAH,GAAgBD,SAH1B;AAKC,IAAA,KAAK,EACJqC,QAAQ,GACLvC,EAAE,CAAE,oBAAF,CADG,GAELA,EAAE,CAAE,gBAAF,CARP;AAUC,IAAA,OAAO,EAAG;AAAA,aACT,CAAEuC,QAAQ,GAAGG,SAAH,GAAeD,OAAzB,EACChC,KADD,EAECO,UAFD,CADS;AAAA,KAVX;AAgBC,IAAA,SAAS,EAAGuB,QAhBb;AAiBC,qBAAgBA;AAjBjB,IAHF,CARF,CAPD,EAyCC,cAAC,KAAD;AAAO,IAAA,SAAS,EAAGR;AAAnB,KAAsCnB,QAAtC,CAzCD,CAlBF,CADD;AAiEA;;AAED,IAAM+B,wBAAwB,GAAG1C,iBAAiB,CAAE,UAAE2C,OAAF,EAAWC,QAAX,EAAyB;AAC5E,SAAO;AACNhB,IAAAA,IAAI,EAAEgB,QAAQ,CAAChB,IAAT,IAAiBe,OAAO,CAACf,IADzB;AAENb,IAAAA,UAAU,EACT6B,QAAQ,CAAC7B,UAAT,cAA2B4B,OAAO,CAACE,IAAnC,cAA6CD,QAAQ,CAACC,IAAtD;AAHK,GAAP;AAKA,CANiD,CAAjB,CAM5BrB,iBAN4B,CAAjC;AAQAkB,wBAAwB,CAAC/C,IAAzB,GAAgCY,qBAAhC;AAEA,eAAemC,wBAAf","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Animate, Button, Panel, Slot, Fill } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { withPluginContext } from '@wordpress/plugins';\nimport { starEmpty, starFilled } from '@wordpress/icons';\nimport { useEffect, useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport ComplementaryAreaHeader from '../complementary-area-header';\nimport PinnedItems from '../pinned-items';\n\nfunction ComplementaryAreaSlot( { scope, ...props } ) {\n\treturn <Slot name={ `ComplementaryArea/${ scope }` } { ...props } />;\n}\n\nfunction ComplementaryAreaFill( { scope, children, className } ) {\n\treturn (\n\t\t<Fill name={ `ComplementaryArea/${ scope }` }>\n\t\t\t<Animate type=\"slide-in\" options={ { origin: 'left' } }>\n\t\t\t\t{ () => <div className={ className }>{ children }</div> }\n\t\t\t</Animate>\n\t\t</Fill>\n\t);\n}\n\nfunction useAdjustComplementaryListener(\n\tscope,\n\tidentifier,\n\tactiveArea,\n\tisActive,\n\tisSmall\n) {\n\tconst previousIsSmall = useRef( false );\n\tconst shouldOpenWhenNotSmall = useRef( false );\n\tconst { enableComplementaryArea, disableComplementaryArea } = useDispatch(\n\t\t'core/interface'\n\t);\n\tuseEffect( () => {\n\t\t// If the complementary area is active and the editor is switching from a big to a small window size.\n\t\tif ( isActive && isSmall && ! previousIsSmall.current ) {\n\t\t\t// Disable the complementary area.\n\t\t\tdisableComplementaryArea( scope );\n\t\t\t// Flag the complementary area to be reopened when the window size goes from small to big.\n\t\t\tshouldOpenWhenNotSmall.current = true;\n\t\t} else if (\n\t\t\t// If there is a flag indicating the complementary area should be enabled when we go from small to big window size\n\t\t\t// and we are going from a small to big window size.\n\t\t\tshouldOpenWhenNotSmall.current &&\n\t\t\t! isSmall &&\n\t\t\tpreviousIsSmall.current\n\t\t) {\n\t\t\t// Remove the flag indicating the complementary area should be enabled.\n\t\t\tshouldOpenWhenNotSmall.current = false;\n\t\t\t// Enable the complementary area.\n\t\t\tenableComplementaryArea( scope, identifier );\n\t\t} else if (\n\t\t\t// If the flag is indicating the current complementary should be reopened but another complementary area becomes active,\n\t\t\t// remove the flag.\n\t\t\tshouldOpenWhenNotSmall.current &&\n\t\t\tactiveArea &&\n\t\t\tactiveArea !== identifier\n\t\t) {\n\t\t\tshouldOpenWhenNotSmall.current = false;\n\t\t}\n\t\tif ( isSmall !== previousIsSmall.current ) {\n\t\t\tpreviousIsSmall.current = isSmall;\n\t\t}\n\t}, [ isActive, isSmall, scope, identifier, activeArea ] );\n}\n\nfunction ComplementaryArea( {\n\tchildren,\n\tclassName,\n\tcloseLabel = __( 'Close plugin' ),\n\tidentifier,\n\theader,\n\theaderClassName,\n\ticon,\n\tisPinnable = true,\n\tpanelClassName,\n\tscope,\n\tsmallScreenTitle,\n\ttitle,\n\ttoggleShortcut,\n} ) {\n\tconst { isActive, isPinned, activeArea, isSmall } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getActiveComplementaryArea, isItemPinned } = select(\n\t\t\t\t'core/interface'\n\t\t\t);\n\t\t\tconst _activeArea = getActiveComplementaryArea( scope );\n\t\t\treturn {\n\t\t\t\tisActive: _activeArea === identifier,\n\t\t\t\tisPinned: isItemPinned( scope, identifier ),\n\t\t\t\tactiveArea: _activeArea,\n\t\t\t\tisSmall: select( 'core/viewport' ).isViewportMatch(\n\t\t\t\t\t'< medium'\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ identifier, scope ]\n\t);\n\tuseAdjustComplementaryListener(\n\t\tscope,\n\t\tidentifier,\n\t\tactiveArea,\n\t\tisActive,\n\t\tisSmall\n\t);\n\tconst { enableComplementaryArea, disableComplementaryArea } = useDispatch(\n\t\t'core/interface'\n\t);\n\tconst { pinItem, unpinItem } = useDispatch( 'core/interface' );\n\treturn (\n\t\t<>\n\t\t\t{ isPinned && isPinnable && (\n\t\t\t\t<PinnedItems scope={ scope }>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\tlabel={ title }\n\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\tisActive\n\t\t\t\t\t\t\t\t? disableComplementaryArea( scope )\n\t\t\t\t\t\t\t\t: enableComplementaryArea( scope, identifier )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tisPressed={ isActive }\n\t\t\t\t\t\taria-expanded={ isActive }\n\t\t\t\t\t\tshortcut={ toggleShortcut }\n\t\t\t\t\t/>\n\t\t\t\t</PinnedItems>\n\t\t\t) }\n\t\t\t{ isActive && (\n\t\t\t\t<ComplementaryAreaFill\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'interface-complementary-area',\n\t\t\t\t\t\tclassName\n\t\t\t\t\t) }\n\t\t\t\t\tscope={ scope }\n\t\t\t\t>\n\t\t\t\t\t<ComplementaryAreaHeader\n\t\t\t\t\t\tclassName={ headerClassName }\n\t\t\t\t\t\tcloseLabel={ closeLabel }\n\t\t\t\t\t\tonClose={ () => disableComplementaryArea( scope ) }\n\t\t\t\t\t\tsmallScreenTitle={ smallScreenTitle }\n\t\t\t\t\t\ttoggleShortcut={ toggleShortcut }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ header || (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<strong>{ title }</strong>\n\t\t\t\t\t\t\t\t{ isPinnable && (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tclassName=\"interface-complementary-area__pin-unpin-item\"\n\t\t\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\t\t\tisPinned ? starFilled : starEmpty\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t\t\tisPinned\n\t\t\t\t\t\t\t\t\t\t\t\t? __( 'Unpin from toolbar' )\n\t\t\t\t\t\t\t\t\t\t\t\t: __( 'Pin to toolbar' )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\t\t( isPinned ? unpinItem : pinItem )(\n\t\t\t\t\t\t\t\t\t\t\t\tscope,\n\t\t\t\t\t\t\t\t\t\t\t\tidentifier\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisPressed={ isPinned }\n\t\t\t\t\t\t\t\t\t\taria-expanded={ isPinned }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ComplementaryAreaHeader>\n\t\t\t\t\t<Panel className={ panelClassName }>{ children }</Panel>\n\t\t\t\t</ComplementaryAreaFill>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nconst ComplementaryAreaWrapped = withPluginContext( ( context, ownProps ) => {\n\treturn {\n\t\ticon: ownProps.icon || context.icon,\n\t\tidentifier:\n\t\t\townProps.identifier || `${ context.name }/${ ownProps.name }`,\n\t};\n} )( ComplementaryArea );\n\nComplementaryAreaWrapped.Slot = ComplementaryAreaSlot;\n\nexport default ComplementaryAreaWrapped;\n"]}