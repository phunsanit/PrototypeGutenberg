{"version":3,"sources":["@wordpress/block-directory/src/components/downloadable-blocks-panel/index.js"],"names":["Fragment","compose","withSelect","__","_n","sprintf","Spinner","withSpokenMessages","DownloadableBlocksList","DownloadableBlocksPanel","downloadableItems","onSelect","onHover","hasPermission","isLoading","isWaiting","debouncedSpeak","length","resultsFoundMessage","select","filterValue","getDownloadableBlocks","hasInstallBlocksPermission","isRequestingDownloadableBlocks"],"mappings":";;AAAA;;;AAGA,SAASA,QAAT,QAAyB,oBAAzB;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,UAAT,QAA2B,iBAA3B;AACA,SAASC,EAAT,EAAaC,EAAb,EAAiBC,OAAjB,QAAgC,iBAAhC;AACA,SAASC,OAAT,EAAkBC,kBAAlB,QAA4C,uBAA5C;AAEA;;;;AAGA,OAAOC,sBAAP,MAAmC,6BAAnC;;AAEA,SAASC,uBAAT,OAQI;AAAA,MAPHC,iBAOG,QAPHA,iBAOG;AAAA,MANHC,QAMG,QANHA,QAMG;AAAA,MALHC,OAKG,QALHA,OAKG;AAAA,MAJHC,aAIG,QAJHA,aAIG;AAAA,MAHHC,SAGG,QAHHA,SAGG;AAAA,MAFHC,SAEG,QAFHA,SAEG;AAAA,MADHC,cACG,QADHA,cACG;;AACH,MAAK,CAAEH,aAAP,EAAuB;AACtBG,IAAAA,cAAc,CACbb,EAAE,CACD,gGADC,CADW,CAAd;AAKA,WACC;AAAG,MAAA,SAAS,EAAC;AAAb,OACGA,EAAE,CAAE,kCAAF,CADL,EAEC,yBAFD,EAGGA,EAAE,CACH,+DADG,CAHL,CADD;AASA;;AAED,MAAKW,SAAS,IAAIC,SAAlB,EAA8B;AAC7B,WACC;AAAG,MAAA,SAAS,EAAC;AAAb,OACC,cAAC,OAAD,OADD,CADD;AAKA;;AAED,MAAK,CAAEL,iBAAiB,CAACO,MAAzB,EAAkC;AACjC,WACC;AAAG,MAAA,SAAS,EAAC;AAAb,OACGd,EAAE,CAAE,kCAAF,CADL,CADD;AAKA;;AAED,MAAMe,mBAAmB,GAAGb,OAAO;AAClC;AACAD,EAAAA,EAAE,CACD,+EADC,EAED,gFAFC,EAGDM,iBAAiB,CAACO,MAHjB,CAFgC,EAOlCP,iBAAiB,CAACO,MAPgB,CAAnC;AAUAD,EAAAA,cAAc,CAAEE,mBAAF,CAAd;AACA,SACC,cAAC,QAAD,QACC;AAAG,IAAA,SAAS,EAAC;AAAb,KACGf,EAAE,CACH,gFADG,CADL,CADD,EAMC,cAAC,sBAAD;AACC,IAAA,KAAK,EAAGO,iBADT;AAEC,IAAA,QAAQ,EAAGC,QAFZ;AAGC,IAAA,OAAO,EAAGC;AAHX,IAND,CADD;AAcA;;AAED,eAAeX,OAAO,CAAE,CACvBM,kBADuB,EAEvBL,UAAU,CAAE,UAAEiB,MAAF,SAA+B;AAAA,MAAnBC,WAAmB,SAAnBA,WAAmB;;AAAA,gBAKtCD,MAAM,CAAE,sBAAF,CALgC;AAAA,MAEzCE,qBAFyC,WAEzCA,qBAFyC;AAAA,MAGzCC,0BAHyC,WAGzCA,0BAHyC;AAAA,MAIzCC,8BAJyC,WAIzCA,8BAJyC;;AAO1C,MAAMV,aAAa,GAAGS,0BAA0B,EAAhD;AACA,MAAMZ,iBAAiB,GAAGG,aAAa,GACpCQ,qBAAqB,CAAED,WAAF,CADe,GAEpC,EAFH;AAGA,MAAMN,SAAS,GAAGS,8BAA8B,EAAhD;AAEA,SAAO;AACNb,IAAAA,iBAAiB,EAAjBA,iBADM;AAENG,IAAAA,aAAa,EAAbA,aAFM;AAGNC,IAAAA,SAAS,EAATA;AAHM,GAAP;AAKA,CAlBS,CAFa,CAAF,CAAP,CAqBVL,uBArBU,CAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { Spinner, withSpokenMessages } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport DownloadableBlocksList from '../downloadable-blocks-list';\n\nfunction DownloadableBlocksPanel( {\n\tdownloadableItems,\n\tonSelect,\n\tonHover,\n\thasPermission,\n\tisLoading,\n\tisWaiting,\n\tdebouncedSpeak,\n} ) {\n\tif ( ! hasPermission ) {\n\t\tdebouncedSpeak(\n\t\t\t__(\n\t\t\t\t'No blocks found in your library. Please contact your site administrator to install new blocks.'\n\t\t\t)\n\t\t);\n\t\treturn (\n\t\t\t<p className=\"block-directory-downloadable-blocks-panel__description has-no-results\">\n\t\t\t\t{ __( 'No blocks found in your library.' ) }\n\t\t\t\t<br />\n\t\t\t\t{ __(\n\t\t\t\t\t'Please contact your site administrator to install new blocks.'\n\t\t\t\t) }\n\t\t\t</p>\n\t\t);\n\t}\n\n\tif ( isLoading || isWaiting ) {\n\t\treturn (\n\t\t\t<p className=\"block-directory-downloadable-blocks-panel__description has-no-results\">\n\t\t\t\t<Spinner />\n\t\t\t</p>\n\t\t);\n\t}\n\n\tif ( ! downloadableItems.length ) {\n\t\treturn (\n\t\t\t<p className=\"block-directory-downloadable-blocks-panel__description has-no-results\">\n\t\t\t\t{ __( 'No blocks found in your library.' ) }\n\t\t\t</p>\n\t\t);\n\t}\n\n\tconst resultsFoundMessage = sprintf(\n\t\t/* translators: %s: number of available blocks. */\n\t\t_n(\n\t\t\t'No blocks found in your library. We did find %d block available for download.',\n\t\t\t'No blocks found in your library. We did find %d blocks available for download.',\n\t\t\tdownloadableItems.length\n\t\t),\n\t\tdownloadableItems.length\n\t);\n\n\tdebouncedSpeak( resultsFoundMessage );\n\treturn (\n\t\t<Fragment>\n\t\t\t<p className=\"block-directory-downloadable-blocks-panel__description\">\n\t\t\t\t{ __(\n\t\t\t\t\t'No blocks found in your library. These blocks can be downloaded and installed:'\n\t\t\t\t) }\n\t\t\t</p>\n\t\t\t<DownloadableBlocksList\n\t\t\t\titems={ downloadableItems }\n\t\t\t\tonSelect={ onSelect }\n\t\t\t\tonHover={ onHover }\n\t\t\t/>\n\t\t</Fragment>\n\t);\n}\n\nexport default compose( [\n\twithSpokenMessages,\n\twithSelect( ( select, { filterValue } ) => {\n\t\tconst {\n\t\t\tgetDownloadableBlocks,\n\t\t\thasInstallBlocksPermission,\n\t\t\tisRequestingDownloadableBlocks,\n\t\t} = select( 'core/block-directory' );\n\n\t\tconst hasPermission = hasInstallBlocksPermission();\n\t\tconst downloadableItems = hasPermission\n\t\t\t? getDownloadableBlocks( filterValue )\n\t\t\t: [];\n\t\tconst isLoading = isRequestingDownloadableBlocks();\n\n\t\treturn {\n\t\t\tdownloadableItems,\n\t\t\thasPermission,\n\t\t\tisLoading,\n\t\t};\n\t} ),\n] )( DownloadableBlocksPanel );\n"]}