{"version":3,"sources":["@wordpress/nux/src/components/dot-tip/index.js"],"names":["onClick","event","stopPropagation","DotTip","position","children","isVisible","hasNextTip","onDismiss","onDisable","anchorParent","onFocusOutsideCallback","current","contains","relatedTarget","close","select","tipId","isTipVisible","getAssociatedGuide","associatedGuide","nextTipId","dispatch","dismissTip","disableTips"],"mappings":";;;;;;;;AAOA;;AAJA;;AACA;;AACA;;AACA;;AAEA;;AARA;;;AAUA,SAASA,OAAT,CAAkBC,KAAlB,EAA0B;AACzB;AACA;AACAA,EAAAA,KAAK,CAACC,eAAN;AACA;;AAEM,SAASC,MAAT,OAOH;AAAA,2BANHC,QAMG;AAAA,MANHA,QAMG,8BANQ,cAMR;AAAA,MALHC,QAKG,QALHA,QAKG;AAAA,MAJHC,SAIG,QAJHA,SAIG;AAAA,MAHHC,UAGG,QAHHA,UAGG;AAAA,MAFHC,SAEG,QAFHA,SAEG;AAAA,MADHC,SACG,QADHA,SACG;AACH,MAAMC,YAAY,GAAG,qBAAQ,IAAR,CAArB;AACA,MAAMC,sBAAsB,GAAG,0BAC9B,UAAEV,KAAF,EAAa;AACZ,QAAK,CAAES,YAAY,CAACE,OAApB,EAA8B;AAC7B;AACA;;AACD,QAAKF,YAAY,CAACE,OAAb,CAAqBC,QAArB,CAA+BZ,KAAK,CAACa,aAArC,CAAL,EAA4D;AAC3D;AACA;;AACDL,IAAAA,SAAS;AACT,GAT6B,EAU9B,CAAEA,SAAF,EAAaC,YAAb,CAV8B,CAA/B;;AAYA,MAAK,CAAEJ,SAAP,EAAmB;AAClB,WAAO,IAAP;AACA;;AAED,SACC,4BAAC,mBAAD;AACC,IAAA,SAAS,EAAC,aADX;AAEC,IAAA,QAAQ,EAAGF,QAFZ;AAGC,IAAA,OAAO,MAHR;AAIC,IAAA,YAAY,EAAC,WAJd;AAKC,IAAA,0BAA0B,MAL3B;AAMC,IAAA,IAAI,EAAC,QANN;AAOC,kBAAa,cAAI,aAAJ,CAPd;AAQC,IAAA,OAAO,EAAGJ,OARX;AASC,IAAA,cAAc,EAAGW;AATlB,KAWC,uCAAKN,QAAL,CAXD,EAYC,uCACC,4BAAC,kBAAD;AAAQ,IAAA,MAAM,MAAd;AAAe,IAAA,OAAO,EAAGG;AAAzB,KACGD,UAAU,GAAG,cAAI,cAAJ,CAAH,GAA0B,cAAI,QAAJ,CADvC,CADD,CAZD,EAiBC,4BAAC,kBAAD;AACC,IAAA,SAAS,EAAC,sBADX;AAEC,IAAA,IAAI,EAAGQ,YAFR;AAGC,IAAA,KAAK,EAAG,cAAI,cAAJ,CAHT;AAIC,IAAA,OAAO,EAAGN;AAJX,IAjBD,CADD;AA0BA;;eAEc,sBACd,sBAAY,UAAEO,MAAF,SAAyB;AAAA,MAAbC,KAAa,SAAbA,KAAa;;AAAA,gBACSD,MAAM,CAAE,UAAF,CADf;AAAA,MAC5BE,YAD4B,WAC5BA,YAD4B;AAAA,MACdC,kBADc,WACdA,kBADc;;AAEpC,MAAMC,eAAe,GAAGD,kBAAkB,CAAEF,KAAF,CAA1C;AACA,SAAO;AACNX,IAAAA,SAAS,EAAEY,YAAY,CAAED,KAAF,CADjB;AAENV,IAAAA,UAAU,EAAE,CAAC,EAAIa,eAAe,IAAIA,eAAe,CAACC,SAAvC;AAFP,GAAP;AAIA,CAPD,CADc,EASd,wBAAc,UAAEC,QAAF,SAA2B;AAAA,MAAbL,KAAa,SAAbA,KAAa;;AAAA,kBACJK,QAAQ,CAAE,UAAF,CADJ;AAAA,MAChCC,UADgC,aAChCA,UADgC;AAAA,MACpBC,WADoB,aACpBA,WADoB;;AAExC,SAAO;AACNhB,IAAAA,SADM,uBACM;AACXe,MAAAA,UAAU,CAAEN,KAAF,CAAV;AACA,KAHK;AAINR,IAAAA,SAJM,uBAIM;AACXe,MAAAA,WAAW;AACX;AANK,GAAP;AAQA,CAVD,CATc,EAoBZrB,MApBY,C","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { Popover, Button } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { useCallback, useRef } from '@wordpress/element';\nimport { close } from '@wordpress/icons';\n\nfunction onClick( event ) {\n\t// Tips are often nested within buttons. We stop propagation so that clicking\n\t// on a tip doesn't result in the button being clicked.\n\tevent.stopPropagation();\n}\n\nexport function DotTip( {\n\tposition = 'middle right',\n\tchildren,\n\tisVisible,\n\thasNextTip,\n\tonDismiss,\n\tonDisable,\n} ) {\n\tconst anchorParent = useRef( null );\n\tconst onFocusOutsideCallback = useCallback(\n\t\t( event ) => {\n\t\t\tif ( ! anchorParent.current ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( anchorParent.current.contains( event.relatedTarget ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tonDisable();\n\t\t},\n\t\t[ onDisable, anchorParent ]\n\t);\n\tif ( ! isVisible ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Popover\n\t\t\tclassName=\"nux-dot-tip\"\n\t\t\tposition={ position }\n\t\t\tnoArrow\n\t\t\tfocusOnMount=\"container\"\n\t\t\tshouldAnchorIncludePadding\n\t\t\trole=\"dialog\"\n\t\t\taria-label={ __( 'Editor tips' ) }\n\t\t\tonClick={ onClick }\n\t\t\tonFocusOutside={ onFocusOutsideCallback }\n\t\t>\n\t\t\t<p>{ children }</p>\n\t\t\t<p>\n\t\t\t\t<Button isLink onClick={ onDismiss }>\n\t\t\t\t\t{ hasNextTip ? __( 'See next tip' ) : __( 'Got it' ) }\n\t\t\t\t</Button>\n\t\t\t</p>\n\t\t\t<Button\n\t\t\t\tclassName=\"nux-dot-tip__disable\"\n\t\t\t\ticon={ close }\n\t\t\t\tlabel={ __( 'Disable tips' ) }\n\t\t\t\tonClick={ onDisable }\n\t\t\t/>\n\t\t</Popover>\n\t);\n}\n\nexport default compose(\n\twithSelect( ( select, { tipId } ) => {\n\t\tconst { isTipVisible, getAssociatedGuide } = select( 'core/nux' );\n\t\tconst associatedGuide = getAssociatedGuide( tipId );\n\t\treturn {\n\t\t\tisVisible: isTipVisible( tipId ),\n\t\t\thasNextTip: !! ( associatedGuide && associatedGuide.nextTipId ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { tipId } ) => {\n\t\tconst { dismissTip, disableTips } = dispatch( 'core/nux' );\n\t\treturn {\n\t\t\tonDismiss() {\n\t\t\t\tdismissTip( tipId );\n\t\t\t},\n\t\t\tonDisable() {\n\t\t\t\tdisableTips();\n\t\t\t},\n\t\t};\n\t} )\n)( DotTip );\n"]}