{"version":3,"sources":["@wordpress/docgen/src/markdown/formatter.js"],"names":["getSymbolTagsByName","require","cleanSpaces","paragraph","split","map","sentence","trim","reduce","acc","current","formatTag","title","tags","formatter","docs","length","push","formatExamples","tag","description","join","formatDeprecated","formatDescription","getHeading","index","text","repeat","getSymbolHeading","getTypeOutput","type","module","exports","rootDir","docPath","symbols","headingTitle","headingStartIndex","headingIndex","sort","first","second","firstName","name","toUpperCase","secondName","forEach","symbol","pop"],"mappings":"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","sourcesContent":["/**\n * Internal dependencies\n */\nconst getSymbolTagsByName = require( '../get-symbol-tags-by-name' );\n\nconst cleanSpaces = ( paragraph ) =>\n\tparagraph\n\t\t? paragraph\n\t\t\t\t.split( '\\n' )\n\t\t\t\t.map( ( sentence ) => sentence.trim() )\n\t\t\t\t.reduce( ( acc, current ) => acc + ' ' + current, '' )\n\t\t\t\t.trim()\n\t\t: '';\n\nconst formatTag = ( title, tags, formatter, docs ) => {\n\tif ( tags && tags.length > 0 ) {\n\t\tdocs.push( '\\n' );\n\t\tdocs.push( '\\n' );\n\t\tdocs.push( `*${ title }*` );\n\t\tdocs.push( '\\n' );\n\t\tdocs.push( ...tags.map( formatter ) );\n\t}\n};\n\nconst formatExamples = ( tags, docs ) => {\n\tif ( tags && tags.length > 0 ) {\n\t\tdocs.push( '\\n' );\n\t\tdocs.push( '\\n' );\n\t\tdocs.push( '*Usage*' );\n\t\tdocs.push( '\\n' );\n\t\tdocs.push( '\\n' );\n\t\tdocs.push(\n\t\t\t...tags.map( ( tag ) => `${ tag.description }` ).join( '\\n\\n' )\n\t\t);\n\t}\n};\n\nconst formatDeprecated = ( tags, docs ) => {\n\tif ( tags && tags.length > 0 ) {\n\t\tdocs.push( '\\n' );\n\t\tdocs.push(\n\t\t\t...tags.map(\n\t\t\t\t( tag ) =>\n\t\t\t\t\t`\\n> **Deprecated** ${ cleanSpaces( tag.description ) }`\n\t\t\t)\n\t\t);\n\t}\n};\n\nconst formatDescription = ( description, docs ) => {\n\tdocs.push( '\\n' );\n\tdocs.push( '\\n' );\n\tdocs.push( description );\n};\n\nconst getHeading = ( index, text ) => {\n\treturn '#'.repeat( index ) + ' ' + text;\n};\n\nconst getSymbolHeading = ( text ) => {\n\treturn `<a name=\"${ text }\" href=\"#${ text }\">#</a> **${ text }**`;\n};\n\nconst getTypeOutput = ( type ) => {\n\treturn type ? `\\`${ type }\\`` : '(unknown type)';\n};\n\nmodule.exports = function(\n\trootDir,\n\tdocPath,\n\tsymbols,\n\theadingTitle,\n\theadingStartIndex\n) {\n\tconst docs = [];\n\tlet headingIndex = headingStartIndex || 1;\n\tif ( headingTitle ) {\n\t\tdocs.push( getHeading( headingIndex, `${ headingTitle }` ) );\n\t\theadingIndex++;\n\t}\n\tdocs.push( '\\n' );\n\tdocs.push( '\\n' );\n\tsymbols.sort( ( first, second ) => {\n\t\tconst firstName = first.name.toUpperCase();\n\t\tconst secondName = second.name.toUpperCase();\n\t\tif ( firstName < secondName ) {\n\t\t\treturn -1;\n\t\t}\n\t\tif ( firstName > secondName ) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t} );\n\tif ( symbols && symbols.length > 0 ) {\n\t\tsymbols.forEach( ( symbol ) => {\n\t\t\tdocs.push( getSymbolHeading( symbol.name ) );\n\t\t\tformatDeprecated(\n\t\t\t\tgetSymbolTagsByName( symbol, 'deprecated' ),\n\t\t\t\tdocs\n\t\t\t);\n\t\t\tformatDescription( symbol.description, docs );\n\t\t\tformatTag(\n\t\t\t\t'Related',\n\t\t\t\tgetSymbolTagsByName( symbol, 'see', 'link' ),\n\t\t\t\t( tag ) => `\\n- ${ tag.description }`,\n\t\t\t\tdocs\n\t\t\t);\n\t\t\tformatExamples( getSymbolTagsByName( symbol, 'example' ), docs );\n\t\t\tformatTag(\n\t\t\t\t'Type',\n\t\t\t\tgetSymbolTagsByName( symbol, 'type' ),\n\t\t\t\t( tag ) =>\n\t\t\t\t\t`\\n- ${ getTypeOutput( tag.type ) } ${ cleanSpaces(\n\t\t\t\t\t\ttag.description\n\t\t\t\t\t) }`,\n\t\t\t\tdocs\n\t\t\t);\n\t\t\tformatTag(\n\t\t\t\t'Parameters',\n\t\t\t\tgetSymbolTagsByName( symbol, 'param' ),\n\t\t\t\t( tag ) =>\n\t\t\t\t\t`\\n- *${ tag.name }* ${ getTypeOutput(\n\t\t\t\t\t\ttag.type\n\t\t\t\t\t) }: ${ cleanSpaces( tag.description ) }`,\n\t\t\t\tdocs\n\t\t\t);\n\t\t\tformatTag(\n\t\t\t\t'Returns',\n\t\t\t\tgetSymbolTagsByName( symbol, 'return' ),\n\t\t\t\t( tag ) =>\n\t\t\t\t\t`\\n- ${ getTypeOutput( tag.type ) }: ${ cleanSpaces(\n\t\t\t\t\t\ttag.description\n\t\t\t\t\t) }`,\n\t\t\t\tdocs\n\t\t\t);\n\t\t\tformatTag(\n\t\t\t\t'Type Definition',\n\t\t\t\tgetSymbolTagsByName( symbol, 'typedef' ),\n\t\t\t\t( tag ) => `\\n- *${ tag.name }* ${ getTypeOutput( tag.type ) }`,\n\t\t\t\tdocs\n\t\t\t);\n\t\t\tformatTag(\n\t\t\t\t'Properties',\n\t\t\t\tgetSymbolTagsByName( symbol, 'property' ),\n\t\t\t\t( tag ) =>\n\t\t\t\t\t`\\n- *${ tag.name }* ${ getTypeOutput(\n\t\t\t\t\t\ttag.type\n\t\t\t\t\t) }: ${ cleanSpaces( tag.description ) }`,\n\t\t\t\tdocs\n\t\t\t);\n\t\t\tdocs.push( '\\n' );\n\t\t\tdocs.push( '\\n' );\n\t\t} );\n\t\tdocs.pop(); // remove last \\n, we want one blank line at the end of the file.\n\t} else {\n\t\tdocs.push( 'Nothing to document.' );\n\t\tdocs.push( '\\n' );\n\t}\n\treturn docs.join( '' );\n};\n"]}